<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 Pandas basics | Data Science Tutorial</title>
<meta name="author" content="Hank Lee">
<meta name="description" content="import pandas as pd  7.1 Inspecting DataFrame 拿到資料的第一步，就是去看看這份資料裡有甚麼東西 在R裡面，最常用的就是 head()來先看前幾筆，dim()來看一下列數和行數，str()來看各欄位的type，用summary來看各欄位的描述統計量...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 7 Pandas basics | Data Science Tutorial">
<meta property="og:type" content="book">
<meta property="og:description" content="import pandas as pd  7.1 Inspecting DataFrame 拿到資料的第一步，就是去看看這份資料裡有甚麼東西 在R裡面，最常用的就是 head()來先看前幾筆，dim()來看一下列數和行數，str()來看各欄位的type，用summary來看各欄位的描述統計量...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 Pandas basics | Data Science Tutorial">
<meta name="twitter:description" content="import pandas as pd  7.1 Inspecting DataFrame 拿到資料的第一步，就是去看看這份資料裡有甚麼東西 在R裡面，最常用的就是 head()來先看前幾筆，dim()來看一下列數和行數，str()來看各欄位的type，用summary來看各欄位的描述統計量...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Science Tutorial</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li class="book-part">Import Data</li>
<li><a class="" href="write-and-read-files.html"><span class="header-section-number">1</span> Write and read files</a></li>
<li><a class="" href="flat-files.html"><span class="header-section-number">2</span> Flat Files</a></li>
<li><a class="" href="database.html"><span class="header-section-number">3</span> Database</a></li>
<li><a class="" href="json-apis.html"><span class="header-section-number">4</span> JSON &amp; APIs</a></li>
<li class="book-part">Numpy</li>
<li><a class="" href="numpy-basics.html"><span class="header-section-number">5</span> numpy basics</a></li>
<li class="book-part">Pandas</li>
<li><a class="" href="pandas_cheatsheet.html"><span class="header-section-number">6</span> pandas_cheatsheet</a></li>
<li><a class="active" href="pandas-basics.html"><span class="header-section-number">7</span> Pandas basics</a></li>
<li><a class="" href="join-data.html"><span class="header-section-number">8</span> Join data</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/LeeHank/ds_tutorial">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="pandas-basics" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Pandas basics<a class="anchor" aria-label="anchor" href="#pandas-basics"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb97"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb97-1"><a href="pandas-basics.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre></div>
<div id="inspecting-dataframe" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Inspecting DataFrame<a class="anchor" aria-label="anchor" href="#inspecting-dataframe"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>拿到資料的第一步，就是去看看這份資料裡有甚麼東西<br></p></li>
<li><p>在R裡面，最常用的就是 <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>來先看前幾筆，<code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code>來看一下列數和行數，<code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>來看各欄位的type，用<code>summary</code>來看各欄位的描述統計量</p></li>
<li>
<p>在Python也是一樣，只是R都是用function，但python是物件導向，所以是用methods</p>
<table class="table table-sm">
<thead><tr class="header">
<th>R</th>
<th>Python</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>head(df, n)</td>
<td>df.head(n)</td>
</tr>
<tr class="even">
<td>dim(df)</td>
<td>df.shape</td>
</tr>
<tr class="odd">
<td>str(df)</td>
<td>df.info()</td>
</tr>
<tr class="even">
<td>summary(df)</td>
<td>df.describe()</td>
</tr>
</tbody>
</table>
</li>
<li><p>接下來我們就來讀一筆資料，然後看看這些結果</p></li>
</ul>
<div class="sourceCode" id="cb98"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb98-1"><a href="pandas-basics.html#cb98-1" aria-hidden="true" tabindex="-1"></a>homelessness <span class="op">=</span> pd.read_csv(<span class="st">"data/homelessness.csv"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb99"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb99-1"><a href="pandas-basics.html#cb99-1" aria-hidden="true" tabindex="-1"></a>homelessness.head()</span>
<span id="cb99-2"><a href="pandas-basics.html#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb99-3"><a href="pandas-basics.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0  East South Central  ...          864.0    4887681</span></span>
<span id="cb99-4"><a href="pandas-basics.html#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1             Pacific  ...          582.0     735139</span></span>
<span id="cb99-5"><a href="pandas-basics.html#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2            Mountain  ...         2606.0    7158024</span></span>
<span id="cb99-6"><a href="pandas-basics.html#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3  West South Central  ...          432.0    3009733</span></span>
<span id="cb99-7"><a href="pandas-basics.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4             Pacific  ...        20964.0   39461588</span></span>
<span id="cb99-8"><a href="pandas-basics.html#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb99-9"><a href="pandas-basics.html#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 6 columns]</span></span></code></pre></div>
<ul>
<li>這筆資料是在描述美國各州無家可歸的人數有多少<br>
</li>
<li>第二個欄位和第一個欄位，就在講是哪個州的哪個地區<br>
</li>
<li>第三個欄位的individuals在講the number of homeless individuals not part of a family with children<br>
</li>
<li>第四個欄位的family_members在講the number of homeless individuals part of a family with children<br>
</li>
<li>第五個欄位是這個州的人口有多少</li>
</ul>
<div class="sourceCode" id="cb100"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb100-1"><a href="pandas-basics.html#cb100-1" aria-hidden="true" tabindex="-1"></a>homelessness.shape</span>
<span id="cb100-2"><a href="pandas-basics.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (51, 6)</span></span></code></pre></div>
<ul>
<li>這筆資料有51的rows，5個column</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb101-1"><a href="pandas-basics.html#cb101-1" aria-hidden="true" tabindex="-1"></a>homelessness.info()</span>
<span id="cb101-2"><a href="pandas-basics.html#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb101-3"><a href="pandas-basics.html#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 51 entries, 0 to 50</span></span>
<span id="cb101-4"><a href="pandas-basics.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 6 columns):</span></span>
<span id="cb101-5"><a href="pandas-basics.html#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column          Non-Null Count  Dtype  </span></span>
<span id="cb101-6"><a href="pandas-basics.html#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------          --------------  -----  </span></span>
<span id="cb101-7"><a href="pandas-basics.html#cb101-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   Unnamed: 0      51 non-null     int64  </span></span>
<span id="cb101-8"><a href="pandas-basics.html#cb101-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   region          51 non-null     object </span></span>
<span id="cb101-9"><a href="pandas-basics.html#cb101-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   state           51 non-null     object </span></span>
<span id="cb101-10"><a href="pandas-basics.html#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   individuals     51 non-null     float64</span></span>
<span id="cb101-11"><a href="pandas-basics.html#cb101-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4   family_members  51 non-null     float64</span></span>
<span id="cb101-12"><a href="pandas-basics.html#cb101-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5   state_pop       51 non-null     int64  </span></span>
<span id="cb101-13"><a href="pandas-basics.html#cb101-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: float64(2), int64(2), object(2)</span></span>
<span id="cb101-14"><a href="pandas-basics.html#cb101-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 2.5+ KB</span></span></code></pre></div>
<div class="sourceCode" id="cb102"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb102-1"><a href="pandas-basics.html#cb102-1" aria-hidden="true" tabindex="-1"></a>homelessness.describe()</span>
<span id="cb102-2"><a href="pandas-basics.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        Unnamed: 0    individuals  family_members     state_pop</span></span>
<span id="cb102-3"><a href="pandas-basics.html#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; count   51.000000      51.000000       51.000000  5.100000e+01</span></span>
<span id="cb102-4"><a href="pandas-basics.html#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean    25.000000    7225.784314     3504.882353  6.405637e+06</span></span>
<span id="cb102-5"><a href="pandas-basics.html#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; std     14.866069   15991.025083     7805.411811  7.327258e+06</span></span>
<span id="cb102-6"><a href="pandas-basics.html#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min      0.000000     434.000000       75.000000  5.776010e+05</span></span>
<span id="cb102-7"><a href="pandas-basics.html#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 25%     12.500000    1446.500000      592.000000  1.777414e+06</span></span>
<span id="cb102-8"><a href="pandas-basics.html#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 50%     25.000000    3082.000000     1482.000000  4.461153e+06</span></span>
<span id="cb102-9"><a href="pandas-basics.html#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 75%     37.500000    6781.500000     3196.000000  7.340946e+06</span></span>
<span id="cb102-10"><a href="pandas-basics.html#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max     50.000000  109008.000000    52070.000000  3.946159e+07</span></span></code></pre></div>
</div>
<div id="parts-of-a-dataframe" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Parts of a DataFrame<a class="anchor" aria-label="anchor" href="#parts-of-a-dataframe"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>對data有初步認識後，我們常常就會想來擷取這份data的部分資訊<br></p></li>
<li><p>除了擷取某些column，某些row外，在R我們也常常用<code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code>和<code><a href="https://rdrr.io/r/base/colnames.html">rownames()</a></code>，來擷取dataframe的column names &amp; row names<br></p></li>
<li>
<p>在Python，一樣，又是因為物件導向，所以他是用attribute(因為是這份df的特性，而不是methods，所以使用時，也不用加括號)來得到這些資訊</p>
<table class="table table-sm">
<thead><tr class="header">
<th>R</th>
<th>Python</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>colnames(data)</td>
<td>data.columns</td>
</tr>
<tr class="even">
<td>rownames(data)</td>
<td>data.index</td>
</tr>
<tr class="odd">
<td></td>
<td>data.values</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="sourceCode" id="cb103"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb103-1"><a href="pandas-basics.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(homelessness.columns)</span>
<span id="cb103-2"><a href="pandas-basics.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Index(['Unnamed: 0', 'region', 'state', 'individuals', 'family_members',</span></span>
<span id="cb103-3"><a href="pandas-basics.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        'state_pop'],</span></span>
<span id="cb103-4"><a href="pandas-basics.html#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       dtype='object')</span></span></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb104-1"><a href="pandas-basics.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(homelessness.index)</span>
<span id="cb104-2"><a href="pandas-basics.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex(start=0, stop=51, step=1)</span></span></code></pre></div>
<ul>
<li>最後，python比R多出來的東西，是value，他可以只取出DataFrame裡面的值。那此時的data type，就會是二維list:</li>
</ul>
<div class="sourceCode" id="cb105"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb105-1"><a href="pandas-basics.html#cb105-1" aria-hidden="true" tabindex="-1"></a>homelessness.values</span>
<span id="cb105-2"><a href="pandas-basics.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; array([[0, 'East South Central', 'Alabama', 2570.0, 864.0, 4887681],</span></span>
<span id="cb105-3"><a href="pandas-basics.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [1, 'Pacific', 'Alaska', 1434.0, 582.0, 735139],</span></span>
<span id="cb105-4"><a href="pandas-basics.html#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [2, 'Mountain', 'Arizona', 7259.0, 2606.0, 7158024],</span></span>
<span id="cb105-5"><a href="pandas-basics.html#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [3, 'West South Central', 'Arkansas', 2280.0, 432.0, 3009733],</span></span>
<span id="cb105-6"><a href="pandas-basics.html#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [4, 'Pacific', 'California', 109008.0, 20964.0, 39461588],</span></span>
<span id="cb105-7"><a href="pandas-basics.html#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [5, 'Mountain', 'Colorado', 7607.0, 3250.0, 5691287],</span></span>
<span id="cb105-8"><a href="pandas-basics.html#cb105-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [6, 'New England', 'Connecticut', 2280.0, 1696.0, 3571520],</span></span>
<span id="cb105-9"><a href="pandas-basics.html#cb105-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [7, 'South Atlantic', 'Delaware', 708.0, 374.0, 965479],</span></span>
<span id="cb105-10"><a href="pandas-basics.html#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [8, 'South Atlantic', 'District of Columbia', 3770.0, 3134.0,</span></span>
<span id="cb105-11"><a href="pandas-basics.html#cb105-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         701547],</span></span>
<span id="cb105-12"><a href="pandas-basics.html#cb105-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [9, 'South Atlantic', 'Florida', 21443.0, 9587.0, 21244317],</span></span>
<span id="cb105-13"><a href="pandas-basics.html#cb105-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [10, 'South Atlantic', 'Georgia', 6943.0, 2556.0, 10511131],</span></span>
<span id="cb105-14"><a href="pandas-basics.html#cb105-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [11, 'Pacific', 'Hawaii', 4131.0, 2399.0, 1420593],</span></span>
<span id="cb105-15"><a href="pandas-basics.html#cb105-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [12, 'Mountain', 'Idaho', 1297.0, 715.0, 1750536],</span></span>
<span id="cb105-16"><a href="pandas-basics.html#cb105-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [13, 'East North Central', 'Illinois', 6752.0, 3891.0, 12723071],</span></span>
<span id="cb105-17"><a href="pandas-basics.html#cb105-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [14, 'East North Central', 'Indiana', 3776.0, 1482.0, 6695497],</span></span>
<span id="cb105-18"><a href="pandas-basics.html#cb105-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [15, 'West North Central', 'Iowa', 1711.0, 1038.0, 3148618],</span></span>
<span id="cb105-19"><a href="pandas-basics.html#cb105-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [16, 'West North Central', 'Kansas', 1443.0, 773.0, 2911359],</span></span>
<span id="cb105-20"><a href="pandas-basics.html#cb105-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [17, 'East South Central', 'Kentucky', 2735.0, 953.0, 4461153],</span></span>
<span id="cb105-21"><a href="pandas-basics.html#cb105-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [18, 'West South Central', 'Louisiana', 2540.0, 519.0, 4659690],</span></span>
<span id="cb105-22"><a href="pandas-basics.html#cb105-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [19, 'New England', 'Maine', 1450.0, 1066.0, 1339057],</span></span>
<span id="cb105-23"><a href="pandas-basics.html#cb105-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [20, 'South Atlantic', 'Maryland', 4914.0, 2230.0, 6035802],</span></span>
<span id="cb105-24"><a href="pandas-basics.html#cb105-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [21, 'New England', 'Massachusetts', 6811.0, 13257.0, 6882635],</span></span>
<span id="cb105-25"><a href="pandas-basics.html#cb105-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [22, 'East North Central', 'Michigan', 5209.0, 3142.0, 9984072],</span></span>
<span id="cb105-26"><a href="pandas-basics.html#cb105-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [23, 'West North Central', 'Minnesota', 3993.0, 3250.0, 5606249],</span></span>
<span id="cb105-27"><a href="pandas-basics.html#cb105-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [24, 'East South Central', 'Mississippi', 1024.0, 328.0, 2981020],</span></span>
<span id="cb105-28"><a href="pandas-basics.html#cb105-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [25, 'West North Central', 'Missouri', 3776.0, 2107.0, 6121623],</span></span>
<span id="cb105-29"><a href="pandas-basics.html#cb105-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [26, 'Mountain', 'Montana', 983.0, 422.0, 1060665],</span></span>
<span id="cb105-30"><a href="pandas-basics.html#cb105-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [27, 'West North Central', 'Nebraska', 1745.0, 676.0, 1925614],</span></span>
<span id="cb105-31"><a href="pandas-basics.html#cb105-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [28, 'Mountain', 'Nevada', 7058.0, 486.0, 3027341],</span></span>
<span id="cb105-32"><a href="pandas-basics.html#cb105-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [29, 'New England', 'New Hampshire', 835.0, 615.0, 1353465],</span></span>
<span id="cb105-33"><a href="pandas-basics.html#cb105-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [30, 'Mid-Atlantic', 'New Jersey', 6048.0, 3350.0, 8886025],</span></span>
<span id="cb105-34"><a href="pandas-basics.html#cb105-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [31, 'Mountain', 'New Mexico', 1949.0, 602.0, 2092741],</span></span>
<span id="cb105-35"><a href="pandas-basics.html#cb105-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [32, 'Mid-Atlantic', 'New York', 39827.0, 52070.0, 19530351],</span></span>
<span id="cb105-36"><a href="pandas-basics.html#cb105-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [33, 'South Atlantic', 'North Carolina', 6451.0, 2817.0, 10381615],</span></span>
<span id="cb105-37"><a href="pandas-basics.html#cb105-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [34, 'West North Central', 'North Dakota', 467.0, 75.0, 758080],</span></span>
<span id="cb105-38"><a href="pandas-basics.html#cb105-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [35, 'East North Central', 'Ohio', 6929.0, 3320.0, 11676341],</span></span>
<span id="cb105-39"><a href="pandas-basics.html#cb105-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [36, 'West South Central', 'Oklahoma', 2823.0, 1048.0, 3940235],</span></span>
<span id="cb105-40"><a href="pandas-basics.html#cb105-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [37, 'Pacific', 'Oregon', 11139.0, 3337.0, 4181886],</span></span>
<span id="cb105-41"><a href="pandas-basics.html#cb105-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [38, 'Mid-Atlantic', 'Pennsylvania', 8163.0, 5349.0, 12800922],</span></span>
<span id="cb105-42"><a href="pandas-basics.html#cb105-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [39, 'New England', 'Rhode Island', 747.0, 354.0, 1058287],</span></span>
<span id="cb105-43"><a href="pandas-basics.html#cb105-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [40, 'South Atlantic', 'South Carolina', 3082.0, 851.0, 5084156],</span></span>
<span id="cb105-44"><a href="pandas-basics.html#cb105-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [41, 'West North Central', 'South Dakota', 836.0, 323.0, 878698],</span></span>
<span id="cb105-45"><a href="pandas-basics.html#cb105-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [42, 'East South Central', 'Tennessee', 6139.0, 1744.0, 6771631],</span></span>
<span id="cb105-46"><a href="pandas-basics.html#cb105-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [43, 'West South Central', 'Texas', 19199.0, 6111.0, 28628666],</span></span>
<span id="cb105-47"><a href="pandas-basics.html#cb105-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [44, 'Mountain', 'Utah', 1904.0, 972.0, 3153550],</span></span>
<span id="cb105-48"><a href="pandas-basics.html#cb105-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [45, 'New England', 'Vermont', 780.0, 511.0, 624358],</span></span>
<span id="cb105-49"><a href="pandas-basics.html#cb105-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [46, 'South Atlantic', 'Virginia', 3928.0, 2047.0, 8501286],</span></span>
<span id="cb105-50"><a href="pandas-basics.html#cb105-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [47, 'Pacific', 'Washington', 16424.0, 5880.0, 7523869],</span></span>
<span id="cb105-51"><a href="pandas-basics.html#cb105-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [48, 'South Atlantic', 'West Virginia', 1021.0, 222.0, 1804291],</span></span>
<span id="cb105-52"><a href="pandas-basics.html#cb105-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [49, 'East North Central', 'Wisconsin', 2740.0, 2167.0, 5807406],</span></span>
<span id="cb105-53"><a href="pandas-basics.html#cb105-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [50, 'Mountain', 'Wyoming', 434.0, 205.0, 577601]], dtype=object)</span></span></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb106-1"><a href="pandas-basics.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(homelessness.values)</span>
<span id="cb106-2"><a href="pandas-basics.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'numpy.ndarray'&gt;</span></span></code></pre></div>
</div>
<div id="select-filter-arrange-mutate" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> select, filter, arrange, &amp; mutate<a class="anchor" aria-label="anchor" href="#select-filter-arrange-mutate"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>在R裡面，我最常用到的四個函數，在pandas裡面都有對應的method可以用</li>
</ul>
<div id="select-1" class="section level3" number="7.3.1">
<h3>
<span class="header-section-number">7.3.1</span> select<a class="anchor" aria-label="anchor" href="#select-1"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>dplyr</th>
<th>Pandas</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>select(df, col1)</td>
<td>df[“col1”]是series, df[[“col1”]]是df</td>
</tr>
<tr class="even">
<td>select(df, col1, col2)</td>
<td>df[[“col1”, “col2”]</td>
</tr>
<tr class="odd">
<td>select(df, col1:col3)</td>
<td>df.loc[:, “col1”:“col3”]</td>
</tr>
</tbody>
</table></div>
<ul>
<li>來練習吧：我想先select “individual”這個欄位</li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb107-1"><a href="pandas-basics.html#cb107-1" aria-hidden="true" tabindex="-1"></a>ind_series <span class="op">=</span> homelessness[<span class="st">"individuals"</span>]</span>
<span id="cb107-2"><a href="pandas-basics.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(ind_series))</span>
<span id="cb107-3"><a href="pandas-basics.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb108"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb108-1"><a href="pandas-basics.html#cb108-1" aria-hidden="true" tabindex="-1"></a>ind_series.head()</span>
<span id="cb108-2"><a href="pandas-basics.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0      2570.0</span></span>
<span id="cb108-3"><a href="pandas-basics.html#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      1434.0</span></span>
<span id="cb108-4"><a href="pandas-basics.html#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      7259.0</span></span>
<span id="cb108-5"><a href="pandas-basics.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      2280.0</span></span>
<span id="cb108-6"><a href="pandas-basics.html#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    109008.0</span></span>
<span id="cb108-7"><a href="pandas-basics.html#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: individuals, dtype: float64</span></span></code></pre></div>
<div class="sourceCode" id="cb109"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="pandas-basics.html#cb109-1" aria-hidden="true" tabindex="-1"></a>ind_df <span class="op">=</span> homelessness[[<span class="st">"individuals"</span>]]</span>
<span id="cb109-2"><a href="pandas-basics.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(ind_df))</span>
<span id="cb109-3"><a href="pandas-basics.html#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb110"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb110-1"><a href="pandas-basics.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ind_df.head())</span>
<span id="cb110-2"><a href="pandas-basics.html#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    individuals</span></span>
<span id="cb110-3"><a href="pandas-basics.html#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0       2570.0</span></span>
<span id="cb110-4"><a href="pandas-basics.html#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1434.0</span></span>
<span id="cb110-5"><a href="pandas-basics.html#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7259.0</span></span>
<span id="cb110-6"><a href="pandas-basics.html#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       2280.0</span></span>
<span id="cb110-7"><a href="pandas-basics.html#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     109008.0</span></span></code></pre></div>
<ul>
<li>再來，我想select “state”和”family_members”這兩個column</li>
</ul>
<div class="sourceCode" id="cb111"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb111-1"><a href="pandas-basics.html#cb111-1" aria-hidden="true" tabindex="-1"></a>state_fam <span class="op">=</span> homelessness[[<span class="st">"state"</span>, <span class="st">"family_members"</span>]]</span>
<span id="cb111-2"><a href="pandas-basics.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(state_fam.head())</span>
<span id="cb111-3"><a href="pandas-basics.html#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         state  family_members</span></span>
<span id="cb111-4"><a href="pandas-basics.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0     Alabama           864.0</span></span>
<span id="cb111-5"><a href="pandas-basics.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      Alaska           582.0</span></span>
<span id="cb111-6"><a href="pandas-basics.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     Arizona          2606.0</span></span>
<span id="cb111-7"><a href="pandas-basics.html#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    Arkansas           432.0</span></span>
<span id="cb111-8"><a href="pandas-basics.html#cb111-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  California         20964.0</span></span></code></pre></div>
<ul>
<li>再來，我想select從individuals到family_members</li>
</ul>
<div class="sourceCode" id="cb112"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb112-1"><a href="pandas-basics.html#cb112-1" aria-hidden="true" tabindex="-1"></a>ind_to_fam <span class="op">=</span> homelessness.loc[:, <span class="st">"individuals"</span>:<span class="st">"family_members"</span>]</span>
<span id="cb112-2"><a href="pandas-basics.html#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ind_to_fam.head())</span>
<span id="cb112-3"><a href="pandas-basics.html#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    individuals  family_members</span></span>
<span id="cb112-4"><a href="pandas-basics.html#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0       2570.0           864.0</span></span>
<span id="cb112-5"><a href="pandas-basics.html#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1434.0           582.0</span></span>
<span id="cb112-6"><a href="pandas-basics.html#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7259.0          2606.0</span></span>
<span id="cb112-7"><a href="pandas-basics.html#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       2280.0           432.0</span></span>
<span id="cb112-8"><a href="pandas-basics.html#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     109008.0         20964.0</span></span></code></pre></div>
</div>
<div id="filter-1" class="section level3" number="7.3.2">
<h3>
<span class="header-section-number">7.3.2</span> filter<a class="anchor" aria-label="anchor" href="#filter-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>篩選出individuals &gt; 10000的資料</li>
</ul>
<div class="sourceCode" id="cb113"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb113-1"><a href="pandas-basics.html#cb113-1" aria-hidden="true" tabindex="-1"></a>homelessness.query(<span class="st">"individuals &gt; 10000"</span>)</span>
<span id="cb113-2"><a href="pandas-basics.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb113-3"><a href="pandas-basics.html#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            4             Pacific  ...        20964.0   39461588</span></span>
<span id="cb113-4"><a href="pandas-basics.html#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            9      South Atlantic  ...         9587.0   21244317</span></span>
<span id="cb113-5"><a href="pandas-basics.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32          32        Mid-Atlantic  ...        52070.0   19530351</span></span>
<span id="cb113-6"><a href="pandas-basics.html#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 37          37             Pacific  ...         3337.0    4181886</span></span>
<span id="cb113-7"><a href="pandas-basics.html#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43          43  West South Central  ...         6111.0   28628666</span></span>
<span id="cb113-8"><a href="pandas-basics.html#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47          47             Pacific  ...         5880.0    7523869</span></span>
<span id="cb113-9"><a href="pandas-basics.html#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb113-10"><a href="pandas-basics.html#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6 rows x 6 columns]</span></span></code></pre></div>
<ul>
<li>篩選出region = “Mountain”的資料</li>
</ul>
<div class="sourceCode" id="cb114"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb114-1"><a href="pandas-basics.html#cb114-1" aria-hidden="true" tabindex="-1"></a>homelessness.query(<span class="st">"region == 'Mountain'"</span>).head()</span>
<span id="cb114-2"><a href="pandas-basics.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0    region     state  individuals  family_members  state_pop</span></span>
<span id="cb114-3"><a href="pandas-basics.html#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            2  Mountain   Arizona       7259.0          2606.0    7158024</span></span>
<span id="cb114-4"><a href="pandas-basics.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            5  Mountain  Colorado       7607.0          3250.0    5691287</span></span>
<span id="cb114-5"><a href="pandas-basics.html#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          12  Mountain     Idaho       1297.0           715.0    1750536</span></span>
<span id="cb114-6"><a href="pandas-basics.html#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 26          26  Mountain   Montana        983.0           422.0    1060665</span></span>
<span id="cb114-7"><a href="pandas-basics.html#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 28          28  Mountain    Nevada       7058.0           486.0    3027341</span></span></code></pre></div>
<ul>
<li>篩選出family members &lt; 1000 &amp; region = “Pacific”</li>
</ul>
<div class="sourceCode" id="cb115"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb115-1"><a href="pandas-basics.html#cb115-1" aria-hidden="true" tabindex="-1"></a>homelessness.query(<span class="st">"family_members &lt; 1000 &amp; region == 'Pacific'"</span>)</span>
<span id="cb115-2"><a href="pandas-basics.html#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0   region   state  individuals  family_members  state_pop</span></span>
<span id="cb115-3"><a href="pandas-basics.html#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1  Pacific  Alaska       1434.0           582.0     735139</span></span></code></pre></div>
<ul>
<li>篩選出region是”South Atlantic”或是”Mid_atlantic”</li>
</ul>
<div class="sourceCode" id="cb116"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb116-1"><a href="pandas-basics.html#cb116-1" aria-hidden="true" tabindex="-1"></a>homelessness[homelessness[<span class="st">"region"</span>].isin([<span class="st">"South Atlantic"</span>, <span class="st">"Mid_atlantic"</span>])]</span>
<span id="cb116-2"><a href="pandas-basics.html#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0          region  ... family_members  state_pop</span></span>
<span id="cb116-3"><a href="pandas-basics.html#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7            7  South Atlantic  ...          374.0     965479</span></span>
<span id="cb116-4"><a href="pandas-basics.html#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8            8  South Atlantic  ...         3134.0     701547</span></span>
<span id="cb116-5"><a href="pandas-basics.html#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            9  South Atlantic  ...         9587.0   21244317</span></span>
<span id="cb116-6"><a href="pandas-basics.html#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          10  South Atlantic  ...         2556.0   10511131</span></span>
<span id="cb116-7"><a href="pandas-basics.html#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          20  South Atlantic  ...         2230.0    6035802</span></span>
<span id="cb116-8"><a href="pandas-basics.html#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 33          33  South Atlantic  ...         2817.0   10381615</span></span>
<span id="cb116-9"><a href="pandas-basics.html#cb116-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 40          40  South Atlantic  ...          851.0    5084156</span></span>
<span id="cb116-10"><a href="pandas-basics.html#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 46          46  South Atlantic  ...         2047.0    8501286</span></span>
<span id="cb116-11"><a href="pandas-basics.html#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 48          48  South Atlantic  ...          222.0    1804291</span></span>
<span id="cb116-12"><a href="pandas-basics.html#cb116-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb116-13"><a href="pandas-basics.html#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [9 rows x 6 columns]</span></span></code></pre></div>
</div>
<div id="arrange-1" class="section level3" number="7.3.3">
<h3>
<span class="header-section-number">7.3.3</span> arrange<a class="anchor" aria-label="anchor" href="#arrange-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想看individuals的top5</li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb117-1"><a href="pandas-basics.html#cb117-1" aria-hidden="true" tabindex="-1"></a>homelessness.sort_values(<span class="st">"individuals"</span>, ascending <span class="op">=</span> <span class="va">False</span>).head()</span>
<span id="cb117-2"><a href="pandas-basics.html#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb117-3"><a href="pandas-basics.html#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            4             Pacific  ...        20964.0   39461588</span></span>
<span id="cb117-4"><a href="pandas-basics.html#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32          32        Mid-Atlantic  ...        52070.0   19530351</span></span>
<span id="cb117-5"><a href="pandas-basics.html#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            9      South Atlantic  ...         9587.0   21244317</span></span>
<span id="cb117-6"><a href="pandas-basics.html#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43          43  West South Central  ...         6111.0   28628666</span></span>
<span id="cb117-7"><a href="pandas-basics.html#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47          47             Pacific  ...         5880.0    7523869</span></span>
<span id="cb117-8"><a href="pandas-basics.html#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb117-9"><a href="pandas-basics.html#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 6 columns]</span></span></code></pre></div>
<ul>
<li>我想先依照region由小到大排，然後，region平手的，再依照family_members由大到小排，最後print出前五個</li>
</ul>
<div class="sourceCode" id="cb118"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb118-1"><a href="pandas-basics.html#cb118-1" aria-hidden="true" tabindex="-1"></a>homelessness.sort_values([<span class="st">"region"</span>, <span class="st">"family_members"</span>], ascending <span class="op">=</span> [<span class="va">True</span>, <span class="va">False</span>]).head()</span>
<span id="cb118-2"><a href="pandas-basics.html#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb118-3"><a href="pandas-basics.html#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          13  East North Central  ...         3891.0   12723071</span></span>
<span id="cb118-4"><a href="pandas-basics.html#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35          35  East North Central  ...         3320.0   11676341</span></span>
<span id="cb118-5"><a href="pandas-basics.html#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 22          22  East North Central  ...         3142.0    9984072</span></span>
<span id="cb118-6"><a href="pandas-basics.html#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 49          49  East North Central  ...         2167.0    5807406</span></span>
<span id="cb118-7"><a href="pandas-basics.html#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          14  East North Central  ...         1482.0    6695497</span></span>
<span id="cb118-8"><a href="pandas-basics.html#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb118-9"><a href="pandas-basics.html#cb118-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 6 columns]</span></span></code></pre></div>
</div>
<div id="mutate-and-rename-1" class="section level3" number="7.3.4">
<h3>
<span class="header-section-number">7.3.4</span> mutate and rename<a class="anchor" aria-label="anchor" href="#mutate-and-rename-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想新增一個total的欄位，定義為individuals + family_members</li>
</ul>
<div class="sourceCode" id="cb119"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb119-1"><a href="pandas-basics.html#cb119-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> homelessness.assign(total <span class="op">=</span> homelessness[<span class="st">"individuals"</span>]<span class="op">+</span>homelessness[<span class="st">"family_members"</span>])</span>
<span id="cb119-2"><a href="pandas-basics.html#cb119-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-3"><a href="pandas-basics.html#cb119-3" aria-hidden="true" tabindex="-1"></a>new[[<span class="st">"individuals"</span>, <span class="st">"family_members"</span>, <span class="st">"total"</span>]].head()</span>
<span id="cb119-4"><a href="pandas-basics.html#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    individuals  family_members     total</span></span>
<span id="cb119-5"><a href="pandas-basics.html#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0       2570.0           864.0    3434.0</span></span>
<span id="cb119-6"><a href="pandas-basics.html#cb119-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1434.0           582.0    2016.0</span></span>
<span id="cb119-7"><a href="pandas-basics.html#cb119-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7259.0          2606.0    9865.0</span></span>
<span id="cb119-8"><a href="pandas-basics.html#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       2280.0           432.0    2712.0</span></span>
<span id="cb119-9"><a href="pandas-basics.html#cb119-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     109008.0         20964.0  129972.0</span></span></code></pre></div>
<ul>
<li>我想把new這個table的”region”改名為region2就好</li>
</ul>
<div class="sourceCode" id="cb120"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb120-1"><a href="pandas-basics.html#cb120-1" aria-hidden="true" tabindex="-1"></a>new.rename(columns <span class="op">=</span> {<span class="st">"region"</span>: <span class="st">"region2"</span>}).head()</span>
<span id="cb120-2"><a href="pandas-basics.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0             region2  ... state_pop     total</span></span>
<span id="cb120-3"><a href="pandas-basics.html#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0  East South Central  ...   4887681    3434.0</span></span>
<span id="cb120-4"><a href="pandas-basics.html#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1             Pacific  ...    735139    2016.0</span></span>
<span id="cb120-5"><a href="pandas-basics.html#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2            Mountain  ...   7158024    9865.0</span></span>
<span id="cb120-6"><a href="pandas-basics.html#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3  West South Central  ...   3009733    2712.0</span></span>
<span id="cb120-7"><a href="pandas-basics.html#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4             Pacific  ...  39461588  129972.0</span></span>
<span id="cb120-8"><a href="pandas-basics.html#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb120-9"><a href="pandas-basics.html#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 7 columns]</span></span></code></pre></div>
</div>
<div id="summarise" class="section level3" number="7.3.5">
<h3>
<span class="header-section-number">7.3.5</span> summarise<a class="anchor" aria-label="anchor" href="#summarise"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>接下來，先讀一個新的資料集</li>
</ul>
<div class="sourceCode" id="cb121"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb121-1"><a href="pandas-basics.html#cb121-1" aria-hidden="true" tabindex="-1"></a>sales <span class="op">=</span> pd.read_csv(<span class="st">"data/sales_subset.csv"</span>)</span>
<span id="cb121-2"><a href="pandas-basics.html#cb121-2" aria-hidden="true" tabindex="-1"></a>sales.shape</span>
<span id="cb121-3"><a href="pandas-basics.html#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (10774, 10)</span></span></code></pre></div>
<ul>
<li>看一下內容：</li>
</ul>
<div class="sourceCode" id="cb122"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb122-1"><a href="pandas-basics.html#cb122-1" aria-hidden="true" tabindex="-1"></a>sales.head()</span>
<span id="cb122-2"><a href="pandas-basics.html#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0  store type  ...  temperature_c fuel_price_usd_per_l  unemployment</span></span>
<span id="cb122-3"><a href="pandas-basics.html#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0      1    A  ...       5.727778             0.679451         8.106</span></span>
<span id="cb122-4"><a href="pandas-basics.html#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1      1    A  ...       8.055556             0.693452         8.106</span></span>
<span id="cb122-5"><a href="pandas-basics.html#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2      1    A  ...      16.816667             0.718284         7.808</span></span>
<span id="cb122-6"><a href="pandas-basics.html#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3      1    A  ...      22.527778             0.748928         7.808</span></span>
<span id="cb122-7"><a href="pandas-basics.html#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4      1    A  ...      27.050000             0.714586         7.808</span></span>
<span id="cb122-8"><a href="pandas-basics.html#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb122-9"><a href="pandas-basics.html#cb122-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 10 columns]</span></span></code></pre></div>
<ul>
<li>看一下overall:</li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb123-1"><a href="pandas-basics.html#cb123-1" aria-hidden="true" tabindex="-1"></a>sales.info()</span>
<span id="cb123-2"><a href="pandas-basics.html#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb123-3"><a href="pandas-basics.html#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 10774 entries, 0 to 10773</span></span>
<span id="cb123-4"><a href="pandas-basics.html#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 10 columns):</span></span>
<span id="cb123-5"><a href="pandas-basics.html#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column                Non-Null Count  Dtype  </span></span>
<span id="cb123-6"><a href="pandas-basics.html#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------                --------------  -----  </span></span>
<span id="cb123-7"><a href="pandas-basics.html#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   Unnamed: 0            10774 non-null  int64  </span></span>
<span id="cb123-8"><a href="pandas-basics.html#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   store                 10774 non-null  int64  </span></span>
<span id="cb123-9"><a href="pandas-basics.html#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   type                  10774 non-null  object </span></span>
<span id="cb123-10"><a href="pandas-basics.html#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   department            10774 non-null  int64  </span></span>
<span id="cb123-11"><a href="pandas-basics.html#cb123-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4   date                  10774 non-null  object </span></span>
<span id="cb123-12"><a href="pandas-basics.html#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5   weekly_sales          10774 non-null  float64</span></span>
<span id="cb123-13"><a href="pandas-basics.html#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6   is_holiday            10774 non-null  bool   </span></span>
<span id="cb123-14"><a href="pandas-basics.html#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7   temperature_c         10774 non-null  float64</span></span>
<span id="cb123-15"><a href="pandas-basics.html#cb123-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8   fuel_price_usd_per_l  10774 non-null  float64</span></span>
<span id="cb123-16"><a href="pandas-basics.html#cb123-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9   unemployment          10774 non-null  float64</span></span>
<span id="cb123-17"><a href="pandas-basics.html#cb123-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: bool(1), float64(4), int64(3), object(2)</span></span>
<span id="cb123-18"><a href="pandas-basics.html#cb123-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 768.2+ KB</span></span></code></pre></div>
<ul>
<li>算出”weekly_sales”的mean</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb124-1"><a href="pandas-basics.html#cb124-1" aria-hidden="true" tabindex="-1"></a>sales[<span class="st">"weekly_sales"</span>].mean()</span>
<span id="cb124-2"><a href="pandas-basics.html#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23843.95014850566</span></span></code></pre></div>
<ul>
<li>先定義四分位差，然後去計算temperature_c, fuel_price_usd_per_l, unemployment的四分位差</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb125-1"><a href="pandas-basics.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb125-2"><a href="pandas-basics.html#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iqr(x):</span>
<span id="cb125-3"><a href="pandas-basics.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x.quantile(<span class="fl">0.75</span>) <span class="op">-</span> x.quantile(<span class="fl">0.25</span>)</span>
<span id="cb125-4"><a href="pandas-basics.html#cb125-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-5"><a href="pandas-basics.html#cb125-5" aria-hidden="true" tabindex="-1"></a>sales[[<span class="st">"temperature_c"</span>, <span class="st">"fuel_price_usd_per_l"</span>, <span class="st">"unemployment"</span>]].agg([iqr, np.mean, np.<span class="bu">min</span>, np.<span class="bu">max</span>])</span>
<span id="cb125-6"><a href="pandas-basics.html#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       temperature_c  fuel_price_usd_per_l  unemployment</span></span>
<span id="cb125-7"><a href="pandas-basics.html#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; iqr       16.583333              0.073176      0.565000</span></span>
<span id="cb125-8"><a href="pandas-basics.html#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean      15.731978              0.749746      8.082009</span></span>
<span id="cb125-9"><a href="pandas-basics.html#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; amin      -8.366667              0.664129      3.879000</span></span>
<span id="cb125-10"><a href="pandas-basics.html#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; amax      33.827778              1.107674      9.765000</span></span></code></pre></div>
</div>
<div id="group_by-summarise-2" class="section level3" number="7.3.6">
<h3>
<span class="header-section-number">7.3.6</span> group_by + summarise<a class="anchor" aria-label="anchor" href="#group_by-summarise-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想先group_by “type(A, B, C)”，再計算weekly_sales的sum</li>
</ul>
<div class="sourceCode" id="cb126"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb126-1"><a href="pandas-basics.html#cb126-1" aria-hidden="true" tabindex="-1"></a>tt_series <span class="op">=</span> sales.groupby(<span class="st">"type"</span>)[<span class="st">"weekly_sales"</span>].<span class="bu">sum</span>()</span>
<span id="cb126-2"><a href="pandas-basics.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tt_series)</span>
<span id="cb126-3"><a href="pandas-basics.html#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type</span></span>
<span id="cb126-4"><a href="pandas-basics.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A    2.337163e+08</span></span>
<span id="cb126-5"><a href="pandas-basics.html#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B    2.317840e+07</span></span>
<span id="cb126-6"><a href="pandas-basics.html#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: weekly_sales, dtype: float64</span></span>
<span id="cb126-7"><a href="pandas-basics.html#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(tt_series))</span>
<span id="cb126-8"><a href="pandas-basics.html#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb127"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb127-1"><a href="pandas-basics.html#cb127-1" aria-hidden="true" tabindex="-1"></a>tt_df <span class="op">=</span> sales.groupby(<span class="st">"type"</span>)[[<span class="st">"weekly_sales"</span>]].<span class="bu">sum</span>()</span>
<span id="cb127-2"><a href="pandas-basics.html#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tt_df)</span>
<span id="cb127-3"><a href="pandas-basics.html#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       weekly_sales</span></span>
<span id="cb127-4"><a href="pandas-basics.html#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type              </span></span>
<span id="cb127-5"><a href="pandas-basics.html#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A     2.337163e+08</span></span>
<span id="cb127-6"><a href="pandas-basics.html#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B     2.317840e+07</span></span>
<span id="cb127-7"><a href="pandas-basics.html#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(tt_df))</span>
<span id="cb127-8"><a href="pandas-basics.html#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span></code></pre></div>
<ul>
<li>我想by “type”+“is_holiday”，去算出weekly_sales的sum, min, max</li>
</ul>
<div class="sourceCode" id="cb128"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb128-1"><a href="pandas-basics.html#cb128-1" aria-hidden="true" tabindex="-1"></a>tt_group <span class="op">=</span> sales.groupby([<span class="st">"type"</span>, <span class="st">"is_holiday"</span>])[<span class="st">"weekly_sales"</span>].agg([np.<span class="bu">min</span>, np.<span class="bu">max</span>])</span>
<span id="cb128-2"><a href="pandas-basics.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tt_group)</span>
<span id="cb128-3"><a href="pandas-basics.html#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                     amin       amax</span></span>
<span id="cb128-4"><a href="pandas-basics.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type is_holiday                    </span></span>
<span id="cb128-5"><a href="pandas-basics.html#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A    False      -1098.00  293966.05</span></span>
<span id="cb128-6"><a href="pandas-basics.html#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      True        -598.00    5350.00</span></span>
<span id="cb128-7"><a href="pandas-basics.html#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B    False       -798.00  232558.51</span></span>
<span id="cb128-8"><a href="pandas-basics.html#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      True          31.41    1590.00</span></span>
<span id="cb128-9"><a href="pandas-basics.html#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(tt_group))</span>
<span id="cb128-10"><a href="pandas-basics.html#cb128-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span></code></pre></div>
</div>
</div>
<div id="slice-by-.loc列名-行名-and-.iloc列數-行數" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> slice by .loc[列名, 行名] and .iloc[列數, 行數]<a class="anchor" aria-label="anchor" href="#slice-by-.loc%E5%88%97%E5%90%8D-%E8%A1%8C%E5%90%8D-and-.iloc%E5%88%97%E6%95%B8-%E8%A1%8C%E6%95%B8"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>loc and iloc是pandas的method，所以是用<code>data.loc[列名,行名]</code>, <code>data.iloc[列index,行index]</code>來運作</li>
</ul>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="57%">
<col width="42%">
</colgroup>
<thead><tr class="header">
<th>說明</th>
<th>pandas</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>取[某列,某行]，得value (此時不再是df type)</td>
<td>df.loc[“列名1”,“行名2”]</td>
</tr>
<tr class="even">
<td>若要維持df type，要加中括號</td>
<td>df.loc[[“列名1”],[“行名2”]]</td>
</tr>
<tr class="odd">
<td>取多個列，多個行</td>
<td>df.loc[[“列名1”,“列名2”],[“行名2”,“行名2”]]</td>
</tr>
<tr class="even">
<td>若要取多個列就好，行我全要</td>
<td>
<p>錯誤: df.loc[[列名1, 列名2], :]</p>
<p>正確: df.loc[[列名1, 列名2]]</p>
</td>
</tr>
<tr class="odd">
<td>若要取多個行就好，列我全要</td>
<td>df.loc[:, [行名1, 行名2]]</td>
</tr>
<tr class="even">
<td>.iloc就是把列名全改成列數(0開始), 行名全改成行數(0開始)就好</td>
<td>
<p>df.iloc[0,2] # 返回value</p>
<p>df.iloc[[0],[2]] # 返回df type</p>
<p>df.iloc[[0,2], [0,1]] #多列多行</p>
<p>df.iloc[[0,2]] # 多列</p>
<p>df.iloc[:, [0,1]] # 多行</p>
</td>
</tr>
</tbody>
</table></div>
<ul>
<li>這邊先讀個檔，複習這兩種用法：</li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb129-1"><a href="pandas-basics.html#cb129-1" aria-hidden="true" tabindex="-1"></a>cars <span class="op">=</span> pd.read_csv(<span class="st">"data/cars.csv"</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb129-2"><a href="pandas-basics.html#cb129-2" aria-hidden="true" tabindex="-1"></a>cars</span>
<span id="cb129-3"><a href="pandas-basics.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cars_per_cap        country  drives_right</span></span>
<span id="cb129-4"><a href="pandas-basics.html#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; US            809  United States          True</span></span>
<span id="cb129-5"><a href="pandas-basics.html#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; AUS           731      Australia         False</span></span>
<span id="cb129-6"><a href="pandas-basics.html#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP           588          Japan         False</span></span>
<span id="cb129-7"><a href="pandas-basics.html#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; IN             18          India         False</span></span>
<span id="cb129-8"><a href="pandas-basics.html#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU            200         Russia          True</span></span>
<span id="cb129-9"><a href="pandas-basics.html#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR            70        Morocco          True</span></span>
<span id="cb129-10"><a href="pandas-basics.html#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; EG             45          Egypt          True</span></span></code></pre></div>
<ul>
<li>可以看到最左邊有rownames, 每個column有colnames</li>
</ul>
<div id="取某列某行得到value-非df-type" class="section level3" number="7.4.1">
<h3>
<span class="header-section-number">7.4.1</span> 取某列某行(得到value, 非df type)<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0value-%E9%9D%9Edf-type"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>抓出列名是JAP, 行名是drives_right的資料</li>
</ul>
<div class="sourceCode" id="cb130"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb130-1"><a href="pandas-basics.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.loc[<span class="st">"JAP"</span>,<span class="st">"drives_right"</span>])</span>
<span id="cb130-2"><a href="pandas-basics.html#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; False</span></span></code></pre></div>
<div class="sourceCode" id="cb131"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb131-1"><a href="pandas-basics.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.iloc[<span class="dv">2</span>,<span class="dv">2</span>])</span>
<span id="cb131-2"><a href="pandas-basics.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; False</span></span></code></pre></div>
<ul>
<li>此時的結果，都會幫你reduce到最小的資料結構，這邊是boolean。如果我想保留dataframe的格式，那我就都要加中括號</li>
</ul>
</div>
<div id="取某列某行得到df-type" class="section level3" number="7.4.2">
<h3>
<span class="header-section-number">7.4.2</span> 取某列某行(得到df type)<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0df-type"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb132-1"><a href="pandas-basics.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.loc[[<span class="st">"JAP"</span>],[<span class="st">"drives_right"</span>]])</span>
<span id="cb132-2"><a href="pandas-basics.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb132-3"><a href="pandas-basics.html#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP         False</span></span></code></pre></div>
<div class="sourceCode" id="cb133"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb133-1"><a href="pandas-basics.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.iloc[[<span class="dv">2</span>],[<span class="dv">2</span>]])</span>
<span id="cb133-2"><a href="pandas-basics.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb133-3"><a href="pandas-basics.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP         False</span></span></code></pre></div>
</div>
<div id="取多列多行" class="section level3" number="7.4.3">
<h3>
<span class="header-section-number">7.4.3</span> 取多列多行<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E5%A4%9A%E5%88%97%E5%A4%9A%E8%A1%8C"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>抓出列名是RU, MOR，行名是drives_right的資料</li>
</ul>
<div class="sourceCode" id="cb134"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb134-1"><a href="pandas-basics.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.loc[[<span class="st">"RU"</span>, <span class="st">"MOR"</span>],[<span class="st">"drives_right"</span>]])</span>
<span id="cb134-2"><a href="pandas-basics.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb134-3"><a href="pandas-basics.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU           True</span></span>
<span id="cb134-4"><a href="pandas-basics.html#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR          True</span></span></code></pre></div>
<div class="sourceCode" id="cb135"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb135-1"><a href="pandas-basics.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.iloc[[<span class="dv">4</span>, <span class="dv">5</span>],[<span class="dv">2</span>]])</span>
<span id="cb135-2"><a href="pandas-basics.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb135-3"><a href="pandas-basics.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU           True</span></span>
<span id="cb135-4"><a href="pandas-basics.html#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR          True</span></span></code></pre></div>
</div>
<div id="取多個列就好行我全要" class="section level3" number="7.4.4">
<h3>
<span class="header-section-number">7.4.4</span> 取多個列就好，行我全要<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E5%88%97%E5%B0%B1%E5%A5%BD%E8%A1%8C%E6%88%91%E5%85%A8%E8%A6%81"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>取US, JAP, RU這三個列</li>
</ul>
<div class="sourceCode" id="cb136"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb136-1"><a href="pandas-basics.html#cb136-1" aria-hidden="true" tabindex="-1"></a>cars.loc[[<span class="st">"US"</span>, <span class="st">"JAP"</span>, <span class="st">"RU"</span>]]</span>
<span id="cb136-2"><a href="pandas-basics.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cars_per_cap        country  drives_right</span></span>
<span id="cb136-3"><a href="pandas-basics.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; US            809  United States          True</span></span>
<span id="cb136-4"><a href="pandas-basics.html#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP           588          Japan         False</span></span>
<span id="cb136-5"><a href="pandas-basics.html#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU            200         Russia          True</span></span></code></pre></div>
<ul>
<li>要注意，不要寫成<code>cars.loc[["US", "JAP", "RU"], :]</code>
</li>
</ul>
</div>
<div id="取多個行就好列我全要" class="section level3" number="7.4.5">
<h3>
<span class="header-section-number">7.4.5</span> 取多個行就好，列我全要<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E8%A1%8C%E5%B0%B1%E5%A5%BD%E5%88%97%E6%88%91%E5%85%A8%E8%A6%81"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>取cars_per_cap和drives_right</li>
</ul>
<div class="sourceCode" id="cb137"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb137-1"><a href="pandas-basics.html#cb137-1" aria-hidden="true" tabindex="-1"></a>cars.loc[:,[<span class="st">"cars_per_cap"</span>,<span class="st">"drives_right"</span>]]</span>
<span id="cb137-2"><a href="pandas-basics.html#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cars_per_cap  drives_right</span></span>
<span id="cb137-3"><a href="pandas-basics.html#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; US            809          True</span></span>
<span id="cb137-4"><a href="pandas-basics.html#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; AUS           731         False</span></span>
<span id="cb137-5"><a href="pandas-basics.html#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP           588         False</span></span>
<span id="cb137-6"><a href="pandas-basics.html#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; IN             18         False</span></span>
<span id="cb137-7"><a href="pandas-basics.html#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU            200          True</span></span>
<span id="cb137-8"><a href="pandas-basics.html#cb137-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR            70          True</span></span>
<span id="cb137-9"><a href="pandas-basics.html#cb137-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; EG             45          True</span></span></code></pre></div>
<ul>
<li>要注意，不要寫成<code>cars.loc[["cars_per_cap","drives_right"]]</code>
</li>
</ul>
</div>
</div>
<div id="indexing" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Indexing<a class="anchor" aria-label="anchor" href="#indexing"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>簡單講，就是把某個column，設成row index，那接下來就可以用.loc[[列名1, 列名2]]來進行filter</li>
<li>更特別的是，row index可以接受multi-column，所以當我們想篩選出類似實驗設計的多種treatment時(例如”A=1且B=2” 或 “A=2且B=3”)，特別適合用這種方式來篩選。</li>
</ul>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="74%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>說明</th>
<th>pandas indexing</th>
</tr></thead>
<tbody>
<tr class="odd">
<td></td>
<td><pre><code># set a column as index
df_ind = df.set_index("grade")
# remove an index
df_orig = df_ind.reset_index()</code></pre></td>
</tr>
<tr class="even">
<td>filter(df, grade == “1”)</td>
<td><pre><code>df_ind = df.set_index("grade")
df_ind.loc["1"]</code></pre></td>
</tr>
<tr class="odd">
<td>filter(df, grade %in% c(“1”, “3”))</td>
<td><pre><code>df_ind = df.set_index("grade")
df_ind.loc[["1", "3"]]</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><pre><code>df_ind = df.set_index("grade","type")
# subset inner level with tuple
df_ind.loc[("1", "A"), ("3","C")]
# subset only outer level with list
df_ind.loc[["1","3"]]</code></pre></td>
</tr>
<tr class="odd">
<td>arrange(df, col1)</td>
<td><pre><code>df_ind = df.set_index("col1")
df_ind.sort_index()</code></pre></td>
</tr>
<tr class="even">
<td>arrange(df, desc(col1))</td>
<td><pre><code>df_ind = df.set_index("col1")
df_ind.sort_index(ascending = False)</code></pre></td>
</tr>
<tr class="odd">
<td>arrange(df, col1, desc(col2))</td>
<td><pre><code>df_ind = df.set_index("col1", "col2")
df_ind.sort_index(
  level = ["col1","col2"],
  ascending = [True, False]
)</code></pre></td>
</tr>
<tr class="even">
<td>排序後，取連續的列</td>
<td>
<p>錯誤: df.loc[[“列名2”:“列名7”]]</p>
<p>正確: df.loc[“列名2”:“列名7”]</p>
</td>
</tr>
<tr class="odd">
<td>排序後，取連續的行</td>
<td>
<p>錯誤: df.loc[:, [“行名2”:“行名7”]]</p>
<p>正確: df.loc[:, “行名2”:“行名7”]</p>
</td>
</tr>
<tr class="even">
<td>如果列名有兩個column(第一層叫outer, 第二層叫inner)，我想取連續的inner列，e.g. inner2~inner3，那我就要先照outer排序，再照inner排序，然後照右邊的寫法來取</td>
<td>df.loc[(“outer1”, “inner2”):(“outer3”, “inner3”)]</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table></div>
<ul>
<li>讀個新的檔(“temperatures.csv”)來玩玩看:</li>
</ul>
<div class="sourceCode" id="cb145"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb145-1"><a href="pandas-basics.html#cb145-1" aria-hidden="true" tabindex="-1"></a>temperatures <span class="op">=</span> pd.read_csv(<span class="st">"data/temperatures.csv"</span>)</span>
<span id="cb145-2"><a href="pandas-basics.html#cb145-2" aria-hidden="true" tabindex="-1"></a>temperatures.head()</span>
<span id="cb145-3"><a href="pandas-basics.html#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0        date     city        country  avg_temp_c</span></span>
<span id="cb145-4"><a href="pandas-basics.html#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0  2000-01-01  Abidjan  Côte D'Ivoire      27.293</span></span>
<span id="cb145-5"><a href="pandas-basics.html#cb145-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1  2000-02-01  Abidjan  Côte D'Ivoire      27.685</span></span>
<span id="cb145-6"><a href="pandas-basics.html#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2  2000-03-01  Abidjan  Côte D'Ivoire      29.061</span></span>
<span id="cb145-7"><a href="pandas-basics.html#cb145-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3  2000-04-01  Abidjan  Côte D'Ivoire      28.162</span></span>
<span id="cb145-8"><a href="pandas-basics.html#cb145-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4  2000-05-01  Abidjan  Côte D'Ivoire      27.547</span></span></code></pre></div>
<ul>
<li>看起來就是該country的city，在此date下的avg_temp_c<br>
</li>
<li>至於第一行的Unnamed: 0，就是index而已，原本在csv中應該就是colname為空白</li>
</ul>
<div class="sourceCode" id="cb146"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb146-1"><a href="pandas-basics.html#cb146-1" aria-hidden="true" tabindex="-1"></a>temperatures <span class="op">=</span> temperatures.drop(columns<span class="op">=</span>[<span class="st">'Unnamed: 0'</span>])</span>
<span id="cb146-2"><a href="pandas-basics.html#cb146-2" aria-hidden="true" tabindex="-1"></a>temperatures.head()</span>
<span id="cb146-3"><a href="pandas-basics.html#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date     city        country  avg_temp_c</span></span>
<span id="cb146-4"><a href="pandas-basics.html#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2000-01-01  Abidjan  Côte D'Ivoire      27.293</span></span>
<span id="cb146-5"><a href="pandas-basics.html#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2000-02-01  Abidjan  Côte D'Ivoire      27.685</span></span>
<span id="cb146-6"><a href="pandas-basics.html#cb146-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2000-03-01  Abidjan  Côte D'Ivoire      29.061</span></span>
<span id="cb146-7"><a href="pandas-basics.html#cb146-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2000-04-01  Abidjan  Côte D'Ivoire      28.162</span></span>
<span id="cb146-8"><a href="pandas-basics.html#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2000-05-01  Abidjan  Côte D'Ivoire      27.547</span></span></code></pre></div>
<ul>
<li>看一下info:</li>
</ul>
<div class="sourceCode" id="cb147"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb147-1"><a href="pandas-basics.html#cb147-1" aria-hidden="true" tabindex="-1"></a>temperatures.info()</span>
<span id="cb147-2"><a href="pandas-basics.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb147-3"><a href="pandas-basics.html#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 16500 entries, 0 to 16499</span></span>
<span id="cb147-4"><a href="pandas-basics.html#cb147-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 4 columns):</span></span>
<span id="cb147-5"><a href="pandas-basics.html#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column      Non-Null Count  Dtype  </span></span>
<span id="cb147-6"><a href="pandas-basics.html#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------      --------------  -----  </span></span>
<span id="cb147-7"><a href="pandas-basics.html#cb147-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   date        16500 non-null  object </span></span>
<span id="cb147-8"><a href="pandas-basics.html#cb147-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   city        16500 non-null  object </span></span>
<span id="cb147-9"><a href="pandas-basics.html#cb147-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   country     16500 non-null  object </span></span>
<span id="cb147-10"><a href="pandas-basics.html#cb147-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   avg_temp_c  16407 non-null  float64</span></span>
<span id="cb147-11"><a href="pandas-basics.html#cb147-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: float64(1), object(3)</span></span>
<span id="cb147-12"><a href="pandas-basics.html#cb147-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 515.8+ KB</span></span></code></pre></div>
<ul>
<li>ok，不意外，date又是字串而已，簡單幫他轉一下：</li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb148-1"><a href="pandas-basics.html#cb148-1" aria-hidden="true" tabindex="-1"></a>temperatures[<span class="st">"date"</span>] <span class="op">=</span> pd.to_datetime(temperatures[<span class="st">"date"</span>], <span class="bu">format</span> <span class="op">=</span> <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span>
<span id="cb148-2"><a href="pandas-basics.html#cb148-2" aria-hidden="true" tabindex="-1"></a>temperatures.info()</span>
<span id="cb148-3"><a href="pandas-basics.html#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb148-4"><a href="pandas-basics.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 16500 entries, 0 to 16499</span></span>
<span id="cb148-5"><a href="pandas-basics.html#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 4 columns):</span></span>
<span id="cb148-6"><a href="pandas-basics.html#cb148-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column      Non-Null Count  Dtype         </span></span>
<span id="cb148-7"><a href="pandas-basics.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------      --------------  -----         </span></span>
<span id="cb148-8"><a href="pandas-basics.html#cb148-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   date        16500 non-null  datetime64[ns]</span></span>
<span id="cb148-9"><a href="pandas-basics.html#cb148-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   city        16500 non-null  object        </span></span>
<span id="cb148-10"><a href="pandas-basics.html#cb148-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   country     16500 non-null  object        </span></span>
<span id="cb148-11"><a href="pandas-basics.html#cb148-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   avg_temp_c  16407 non-null  float64       </span></span>
<span id="cb148-12"><a href="pandas-basics.html#cb148-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: datetime64[ns](1), float64(1), object(2)</span></span>
<span id="cb148-13"><a href="pandas-basics.html#cb148-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 515.8+ KB</span></span></code></pre></div>
<div id="將city欄位設為index" class="section level3" number="7.5.1">
<h3>
<span class="header-section-number">7.5.1</span> 將city欄位設為index<a class="anchor" aria-label="anchor" href="#%E5%B0%87city%E6%AC%84%E4%BD%8D%E8%A8%AD%E7%82%BAindex"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb149"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb149-1"><a href="pandas-basics.html#cb149-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind <span class="op">=</span> temperatures.set_index(<span class="st">"city"</span>)</span>
<span id="cb149-2"><a href="pandas-basics.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.head())</span>
<span id="cb149-3"><a href="pandas-basics.html#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               date        country  avg_temp_c</span></span>
<span id="cb149-4"><a href="pandas-basics.html#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; city                                         </span></span>
<span id="cb149-5"><a href="pandas-basics.html#cb149-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-01-01  Côte D'Ivoire      27.293</span></span>
<span id="cb149-6"><a href="pandas-basics.html#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-02-01  Côte D'Ivoire      27.685</span></span>
<span id="cb149-7"><a href="pandas-basics.html#cb149-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-03-01  Côte D'Ivoire      29.061</span></span>
<span id="cb149-8"><a href="pandas-basics.html#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-04-01  Côte D'Ivoire      28.162</span></span>
<span id="cb149-9"><a href="pandas-basics.html#cb149-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-05-01  Côte D'Ivoire      27.547</span></span></code></pre></div>
<ul>
<li>nice，可以看到city被移到index的位子(也就是row_name)<br>
</li>
<li>如果想回復原狀，就用<code>.reset_index()</code>
</li>
</ul>
<div class="sourceCode" id="cb150"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb150-1"><a href="pandas-basics.html#cb150-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind.reset_index().head()</span>
<span id="cb150-2"><a href="pandas-basics.html#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       city       date        country  avg_temp_c</span></span>
<span id="cb150-3"><a href="pandas-basics.html#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  Abidjan 2000-01-01  Côte D'Ivoire      27.293</span></span>
<span id="cb150-4"><a href="pandas-basics.html#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  Abidjan 2000-02-01  Côte D'Ivoire      27.685</span></span>
<span id="cb150-5"><a href="pandas-basics.html#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  Abidjan 2000-03-01  Côte D'Ivoire      29.061</span></span>
<span id="cb150-6"><a href="pandas-basics.html#cb150-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  Abidjan 2000-04-01  Côte D'Ivoire      28.162</span></span>
<span id="cb150-7"><a href="pandas-basics.html#cb150-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  Abidjan 2000-05-01  Côte D'Ivoire      27.547</span></span></code></pre></div>
</div>
<div id="filter出citymoscow或saint-petersburg" class="section level3" number="7.5.2">
<h3>
<span class="header-section-number">7.5.2</span> filter出city=“Moscow”或”Saint Petersburg”<a class="anchor" aria-label="anchor" href="#filter%E5%87%BAcitymoscow%E6%88%96saint-petersburg"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb151"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb151-1"><a href="pandas-basics.html#cb151-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind.loc[[<span class="st">"Moscow"</span>, <span class="st">"Saint Petersburg"</span>]].head()</span>
<span id="cb151-2"><a href="pandas-basics.html#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              date country  avg_temp_c</span></span>
<span id="cb151-3"><a href="pandas-basics.html#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; city                                 </span></span>
<span id="cb151-4"><a href="pandas-basics.html#cb151-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-01-01  Russia      -7.313</span></span>
<span id="cb151-5"><a href="pandas-basics.html#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-02-01  Russia      -3.551</span></span>
<span id="cb151-6"><a href="pandas-basics.html#cb151-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-03-01  Russia      -1.661</span></span>
<span id="cb151-7"><a href="pandas-basics.html#cb151-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-04-01  Russia      10.096</span></span>
<span id="cb151-8"><a href="pandas-basics.html#cb151-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-05-01  Russia      10.357</span></span></code></pre></div>
<ul>
<li>對比於之前的寫法：</li>
</ul>
<div class="sourceCode" id="cb152"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb152-1"><a href="pandas-basics.html#cb152-1" aria-hidden="true" tabindex="-1"></a>temperatures[temperatures[<span class="st">"city"</span>].isin([<span class="st">"Moscow"</span>, <span class="st">"Saint Petersburg"</span>])].head()</span>
<span id="cb152-2"><a href="pandas-basics.html#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             date    city country  avg_temp_c</span></span>
<span id="cb152-3"><a href="pandas-basics.html#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10725 2000-01-01  Moscow  Russia      -7.313</span></span>
<span id="cb152-4"><a href="pandas-basics.html#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10726 2000-02-01  Moscow  Russia      -3.551</span></span>
<span id="cb152-5"><a href="pandas-basics.html#cb152-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10727 2000-03-01  Moscow  Russia      -1.661</span></span>
<span id="cb152-6"><a href="pandas-basics.html#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10728 2000-04-01  Moscow  Russia      10.096</span></span>
<span id="cb152-7"><a href="pandas-basics.html#cb152-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10729 2000-05-01  Moscow  Russia      10.357</span></span></code></pre></div>
<ul>
<li><p>可以很明顯的看到，他的優點就是比原本pandas的filter法簡潔<br></p></li>
<li><p>但缺點是：index現在變成是data了，而且會duplicate，所以違反了”tidy data” principles，看你介不介意拉。<br>
### filter出treatment型的資料</p></li>
<li><p>接著進階一點，我想filter出country-city pair的資料(就像實驗設計時，我想filter出一種treatment的資料一樣)<br></p></li>
<li><p>舉例來說，我想filter出country = “Brazil”且city = “Rio De Janeiro”的資料，或country = “Pakistan”且city = “Lahore”的資料</p></li>
</ul>
<div class="sourceCode" id="cb153"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb153-1"><a href="pandas-basics.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 先把這兩個column都設為index</span></span>
<span id="cb153-2"><a href="pandas-basics.html#cb153-2" aria-hidden="true" tabindex="-1"></a>temperatures_ind <span class="op">=</span> temperatures.set_index([<span class="st">"country"</span>, <span class="st">"city"</span>])</span>
<span id="cb153-3"><a href="pandas-basics.html#cb153-3" aria-hidden="true" tabindex="-1"></a>temperatures_ind.head()</span>
<span id="cb153-4"><a href="pandas-basics.html#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                             date  avg_temp_c</span></span>
<span id="cb153-5"><a href="pandas-basics.html#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country       city                          </span></span>
<span id="cb153-6"><a href="pandas-basics.html#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Côte D'Ivoire Abidjan 2000-01-01      27.293</span></span>
<span id="cb153-7"><a href="pandas-basics.html#cb153-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-02-01      27.685</span></span>
<span id="cb153-8"><a href="pandas-basics.html#cb153-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-03-01      29.061</span></span>
<span id="cb153-9"><a href="pandas-basics.html#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-04-01      28.162</span></span>
<span id="cb153-10"><a href="pandas-basics.html#cb153-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-05-01      27.547</span></span></code></pre></div>
<ul>
<li>接著用.loc[]加上tuple來篩選</li>
</ul>
<div class="sourceCode" id="cb154"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb154-1"><a href="pandas-basics.html#cb154-1" aria-hidden="true" tabindex="-1"></a>rows_to_keep <span class="op">=</span> [(<span class="st">"Brazil"</span>, <span class="st">"Rio De Janeiro"</span>), (<span class="st">"Pakistan"</span>,<span class="st">"Lahore"</span>)]</span>
<span id="cb154-2"><a href="pandas-basics.html#cb154-2" aria-hidden="true" tabindex="-1"></a>temperatures_ind.loc[rows_to_keep].head()</span>
<span id="cb154-3"><a href="pandas-basics.html#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                              date  avg_temp_c</span></span>
<span id="cb154-4"><a href="pandas-basics.html#cb154-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country city                                 </span></span>
<span id="cb154-5"><a href="pandas-basics.html#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Brazil  Rio De Janeiro 2000-01-01      25.974</span></span>
<span id="cb154-6"><a href="pandas-basics.html#cb154-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-02-01      26.699</span></span>
<span id="cb154-7"><a href="pandas-basics.html#cb154-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-03-01      26.270</span></span>
<span id="cb154-8"><a href="pandas-basics.html#cb154-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-04-01      25.750</span></span>
<span id="cb154-9"><a href="pandas-basics.html#cb154-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-05-01      24.356</span></span></code></pre></div>
</div>
<div id="用.sort_index做排序" class="section level3" number="7.5.3">
<h3>
<span class="header-section-number">7.5.3</span> 用.sort_index()做排序<a class="anchor" aria-label="anchor" href="#%E7%94%A8.sort_index%E5%81%9A%E6%8E%92%E5%BA%8F"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>接下來，做一下arrange</li>
<li>我想直接照index做排序(所以照預設，就是先ascending country，平手時，再ascending city)</li>
</ul>
<div class="sourceCode" id="cb155"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb155-1"><a href="pandas-basics.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.sort_index())</span>
<span id="cb155-2"><a href="pandas-basics.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          date  avg_temp_c</span></span>
<span id="cb155-3"><a href="pandas-basics.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country     city                         </span></span>
<span id="cb155-4"><a href="pandas-basics.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Afghanistan Kabul  2000-01-01       3.326</span></span>
<span id="cb155-5"><a href="pandas-basics.html#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-02-01       3.454</span></span>
<span id="cb155-6"><a href="pandas-basics.html#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-03-01       9.612</span></span>
<span id="cb155-7"><a href="pandas-basics.html#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-04-01      17.925</span></span>
<span id="cb155-8"><a href="pandas-basics.html#cb155-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-05-01      24.658</span></span>
<span id="cb155-9"><a href="pandas-basics.html#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                       ...         ...</span></span>
<span id="cb155-10"><a href="pandas-basics.html#cb155-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Zimbabwe    Harare 2013-05-01      18.298</span></span>
<span id="cb155-11"><a href="pandas-basics.html#cb155-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-06-01      17.020</span></span>
<span id="cb155-12"><a href="pandas-basics.html#cb155-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-07-01      16.299</span></span>
<span id="cb155-13"><a href="pandas-basics.html#cb155-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-08-01      19.232</span></span>
<span id="cb155-14"><a href="pandas-basics.html#cb155-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-09-01         NaN</span></span>
<span id="cb155-15"><a href="pandas-basics.html#cb155-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb155-16"><a href="pandas-basics.html#cb155-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16500 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>我也可以先照city做descending排序，平手時，再照country做ascending排序</li>
</ul>
<div class="sourceCode" id="cb156"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb156-1"><a href="pandas-basics.html#cb156-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind.sort_index(level <span class="op">=</span> [<span class="st">"city"</span>, <span class="st">"country"</span>], ascending <span class="op">=</span> [<span class="va">False</span>, <span class="va">True</span>])</span>
<span id="cb156-2"><a href="pandas-basics.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                             date  avg_temp_c</span></span>
<span id="cb156-3"><a href="pandas-basics.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country       city                          </span></span>
<span id="cb156-4"><a href="pandas-basics.html#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; China         Xian    2000-01-01      -2.819</span></span>
<span id="cb156-5"><a href="pandas-basics.html#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-02-01       0.943</span></span>
<span id="cb156-6"><a href="pandas-basics.html#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-03-01       8.997</span></span>
<span id="cb156-7"><a href="pandas-basics.html#cb156-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-04-01      13.714</span></span>
<span id="cb156-8"><a href="pandas-basics.html#cb156-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-05-01      20.568</span></span>
<span id="cb156-9"><a href="pandas-basics.html#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                          ...         ...</span></span>
<span id="cb156-10"><a href="pandas-basics.html#cb156-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Côte D'Ivoire Abidjan 2013-05-01      27.652</span></span>
<span id="cb156-11"><a href="pandas-basics.html#cb156-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-06-01      26.157</span></span>
<span id="cb156-12"><a href="pandas-basics.html#cb156-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-07-01      24.951</span></span>
<span id="cb156-13"><a href="pandas-basics.html#cb156-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-08-01      24.541</span></span>
<span id="cb156-14"><a href="pandas-basics.html#cb156-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-09-01         NaN</span></span>
<span id="cb156-15"><a href="pandas-basics.html#cb156-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb156-16"><a href="pandas-basics.html#cb156-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16500 rows x 2 columns]</span></span></code></pre></div>
</div>
<div id="排序後取連續的列outer列" class="section level3" number="7.5.4">
<h3>
<span class="header-section-number">7.5.4</span> 排序後，取連續的列(outer列)<a class="anchor" aria-label="anchor" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97outer%E5%88%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb157"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb157-1"><a href="pandas-basics.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the index of temperatures_ind</span></span>
<span id="cb157-2"><a href="pandas-basics.html#cb157-2" aria-hidden="true" tabindex="-1"></a>temperatures_srt <span class="op">=</span> temperatures_ind.sort_index()</span>
<span id="cb157-3"><a href="pandas-basics.html#cb157-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-4"><a href="pandas-basics.html#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset rows from Pakistan to Russia</span></span>
<span id="cb157-5"><a href="pandas-basics.html#cb157-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_srt.loc[<span class="st">"Pakistan"</span>:<span class="st">"Russia"</span>])</span>
<span id="cb157-6"><a href="pandas-basics.html#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                 date  avg_temp_c</span></span>
<span id="cb157-7"><a href="pandas-basics.html#cb157-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                                   </span></span>
<span id="cb157-8"><a href="pandas-basics.html#cb157-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Pakistan Faisalabad       2000-01-01      12.792</span></span>
<span id="cb157-9"><a href="pandas-basics.html#cb157-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-02-01      14.339</span></span>
<span id="cb157-10"><a href="pandas-basics.html#cb157-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-03-01      20.309</span></span>
<span id="cb157-11"><a href="pandas-basics.html#cb157-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-04-01      29.072</span></span>
<span id="cb157-12"><a href="pandas-basics.html#cb157-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-05-01      34.845</span></span>
<span id="cb157-13"><a href="pandas-basics.html#cb157-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                              ...         ...</span></span>
<span id="cb157-14"><a href="pandas-basics.html#cb157-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Russia   Saint Petersburg 2013-05-01      12.355</span></span>
<span id="cb157-15"><a href="pandas-basics.html#cb157-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-06-01      17.185</span></span>
<span id="cb157-16"><a href="pandas-basics.html#cb157-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-07-01      17.234</span></span>
<span id="cb157-17"><a href="pandas-basics.html#cb157-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-08-01      17.153</span></span>
<span id="cb157-18"><a href="pandas-basics.html#cb157-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-09-01         NaN</span></span>
<span id="cb157-19"><a href="pandas-basics.html#cb157-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb157-20"><a href="pandas-basics.html#cb157-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1155 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>注意，不要寫成<code>temperatures_srt.loc[["Pakistan":"Russia"]]</code>
</li>
</ul>
</div>
<div id="排序後取連續的列inner列" class="section level3" number="7.5.5">
<h3>
<span class="header-section-number">7.5.5</span> 排序後，取連續的列(inner列)<a class="anchor" aria-label="anchor" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97inner%E5%88%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb158"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb158-1"><a href="pandas-basics.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Try to subset rows from Lahore to Moscow</span></span>
<span id="cb158-2"><a href="pandas-basics.html#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_srt.loc[<span class="st">"Lahore"</span>:<span class="st">"Moscow"</span>])</span>
<span id="cb158-3"><a href="pandas-basics.html#cb158-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-4"><a href="pandas-basics.html#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset rows from Pakistan, Lahore to Russia, Moscow</span></span>
<span id="cb158-5"><a href="pandas-basics.html#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          date  avg_temp_c</span></span>
<span id="cb158-6"><a href="pandas-basics.html#cb158-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country city                             </span></span>
<span id="cb158-7"><a href="pandas-basics.html#cb158-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Mexico  Mexico     2000-01-01      12.694</span></span>
<span id="cb158-8"><a href="pandas-basics.html#cb158-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-02-01      14.677</span></span>
<span id="cb158-9"><a href="pandas-basics.html#cb158-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-03-01      17.376</span></span>
<span id="cb158-10"><a href="pandas-basics.html#cb158-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-04-01      18.294</span></span>
<span id="cb158-11"><a href="pandas-basics.html#cb158-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-05-01      18.562</span></span>
<span id="cb158-12"><a href="pandas-basics.html#cb158-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                       ...         ...</span></span>
<span id="cb158-13"><a href="pandas-basics.html#cb158-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Morocco Casablanca 2013-05-01      19.217</span></span>
<span id="cb158-14"><a href="pandas-basics.html#cb158-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-06-01      23.649</span></span>
<span id="cb158-15"><a href="pandas-basics.html#cb158-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-07-01      27.488</span></span>
<span id="cb158-16"><a href="pandas-basics.html#cb158-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-08-01      27.952</span></span>
<span id="cb158-17"><a href="pandas-basics.html#cb158-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-09-01         NaN</span></span>
<span id="cb158-18"><a href="pandas-basics.html#cb158-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb158-19"><a href="pandas-basics.html#cb158-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [330 rows x 2 columns]</span></span>
<span id="cb158-20"><a href="pandas-basics.html#cb158-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_srt.loc[(<span class="st">"Pakistan"</span>, <span class="st">"Lahore"</span>):(<span class="st">"Russia"</span>, <span class="st">"Moscow"</span>)])</span>
<span id="cb158-21"><a href="pandas-basics.html#cb158-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                       date  avg_temp_c</span></span>
<span id="cb158-22"><a href="pandas-basics.html#cb158-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                         </span></span>
<span id="cb158-23"><a href="pandas-basics.html#cb158-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Pakistan Lahore 2000-01-01      12.792</span></span>
<span id="cb158-24"><a href="pandas-basics.html#cb158-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-02-01      14.339</span></span>
<span id="cb158-25"><a href="pandas-basics.html#cb158-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-03-01      20.309</span></span>
<span id="cb158-26"><a href="pandas-basics.html#cb158-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-04-01      29.072</span></span>
<span id="cb158-27"><a href="pandas-basics.html#cb158-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-05-01      34.845</span></span>
<span id="cb158-28"><a href="pandas-basics.html#cb158-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                    ...         ...</span></span>
<span id="cb158-29"><a href="pandas-basics.html#cb158-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Russia   Moscow 2013-05-01      16.152</span></span>
<span id="cb158-30"><a href="pandas-basics.html#cb158-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-06-01      18.718</span></span>
<span id="cb158-31"><a href="pandas-basics.html#cb158-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-07-01      18.136</span></span>
<span id="cb158-32"><a href="pandas-basics.html#cb158-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-08-01      17.485</span></span>
<span id="cb158-33"><a href="pandas-basics.html#cb158-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-09-01         NaN</span></span>
<span id="cb158-34"><a href="pandas-basics.html#cb158-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb158-35"><a href="pandas-basics.html#cb158-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [660 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>注意，如果只寫inner level，例如寫成這樣： <code>temperatures_srt.loc["Lahore":"Moscow"]</code>，那會回給你一個空白的df</li>
</ul>
</div>
<div id="排序後取時間性資料" class="section level3" number="7.5.6">
<h3>
<span class="header-section-number">7.5.6</span> 排序後，取時間性資料<a class="anchor" aria-label="anchor" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E6%99%82%E9%96%93%E6%80%A7%E8%B3%87%E6%96%99"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>如果今天想subset出date的資料，例如我想找出2010~2011的資料就好，我會怎麼做？<br>
</li>
<li>照之前的做法會這樣：</li>
</ul>
<div class="sourceCode" id="cb159"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb159-1"><a href="pandas-basics.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use Boolean conditions to subset temperatures for rows in 2010 and 2011</span></span>
<span id="cb159-2"><a href="pandas-basics.html#cb159-2" aria-hidden="true" tabindex="-1"></a>temperatures_bool <span class="op">=</span> temperatures[(temperatures[<span class="st">"date"</span>] <span class="op">&gt;=</span> <span class="st">"2010-01-01"</span>) <span class="op">&amp;</span> (temperatures[<span class="st">"date"</span>] <span class="op">&lt;=</span> <span class="st">"2011-12-31"</span>)]</span>
<span id="cb159-3"><a href="pandas-basics.html#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_bool)</span>
<span id="cb159-4"><a href="pandas-basics.html#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             date     city        country  avg_temp_c</span></span>
<span id="cb159-5"><a href="pandas-basics.html#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 120   2010-01-01  Abidjan  Côte D'Ivoire      28.270</span></span>
<span id="cb159-6"><a href="pandas-basics.html#cb159-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 121   2010-02-01  Abidjan  Côte D'Ivoire      29.262</span></span>
<span id="cb159-7"><a href="pandas-basics.html#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 122   2010-03-01  Abidjan  Côte D'Ivoire      29.596</span></span>
<span id="cb159-8"><a href="pandas-basics.html#cb159-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 123   2010-04-01  Abidjan  Côte D'Ivoire      29.068</span></span>
<span id="cb159-9"><a href="pandas-basics.html#cb159-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 124   2010-05-01  Abidjan  Côte D'Ivoire      28.258</span></span>
<span id="cb159-10"><a href="pandas-basics.html#cb159-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...          ...      ...            ...         ...</span></span>
<span id="cb159-11"><a href="pandas-basics.html#cb159-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16474 2011-08-01     Xian          China      23.069</span></span>
<span id="cb159-12"><a href="pandas-basics.html#cb159-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16475 2011-09-01     Xian          China      16.775</span></span>
<span id="cb159-13"><a href="pandas-basics.html#cb159-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16476 2011-10-01     Xian          China      12.587</span></span>
<span id="cb159-14"><a href="pandas-basics.html#cb159-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16477 2011-11-01     Xian          China       7.543</span></span>
<span id="cb159-15"><a href="pandas-basics.html#cb159-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16478 2011-12-01     Xian          China      -0.490</span></span>
<span id="cb159-16"><a href="pandas-basics.html#cb159-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb159-17"><a href="pandas-basics.html#cb159-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2400 rows x 4 columns]</span></span></code></pre></div>
<ul>
<li>那如果用現在的招，就把date移去當index，那就變成：</li>
</ul>
<div class="sourceCode" id="cb160"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb160-1"><a href="pandas-basics.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set date as an index and sort the index</span></span>
<span id="cb160-2"><a href="pandas-basics.html#cb160-2" aria-hidden="true" tabindex="-1"></a>temperatures_ind <span class="op">=</span> temperatures.set_index(<span class="st">"date"</span>).sort_index()</span>
<span id="cb160-3"><a href="pandas-basics.html#cb160-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-4"><a href="pandas-basics.html#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use .loc[] to subset temperatures_ind for rows in 2010 and 2011</span></span>
<span id="cb160-5"><a href="pandas-basics.html#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.loc[<span class="st">"2010"</span>:<span class="st">"2011"</span>])</span>
<span id="cb160-6"><a href="pandas-basics.html#cb160-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   city    country  avg_temp_c</span></span>
<span id="cb160-7"><a href="pandas-basics.html#cb160-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date                                         </span></span>
<span id="cb160-8"><a href="pandas-basics.html#cb160-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01  Faisalabad   Pakistan      11.810</span></span>
<span id="cb160-9"><a href="pandas-basics.html#cb160-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   Melbourne  Australia      20.016</span></span>
<span id="cb160-10"><a href="pandas-basics.html#cb160-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   Chongqing      China       7.921</span></span>
<span id="cb160-11"><a href="pandas-basics.html#cb160-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   São Paulo     Brazil      23.738</span></span>
<span id="cb160-12"><a href="pandas-basics.html#cb160-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   Guangzhou      China      14.136</span></span>
<span id="cb160-13"><a href="pandas-basics.html#cb160-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                ...        ...         ...</span></span>
<span id="cb160-14"><a href="pandas-basics.html#cb160-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01      Nagoya      Japan       6.476</span></span>
<span id="cb160-15"><a href="pandas-basics.html#cb160-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01   Hyderabad      India      23.613</span></span>
<span id="cb160-16"><a href="pandas-basics.html#cb160-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01        Cali   Colombia      21.559</span></span>
<span id="cb160-17"><a href="pandas-basics.html#cb160-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01        Lima       Peru      18.293</span></span>
<span id="cb160-18"><a href="pandas-basics.html#cb160-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01     Bangkok   Thailand      25.021</span></span>
<span id="cb160-19"><a href="pandas-basics.html#cb160-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb160-20"><a href="pandas-basics.html#cb160-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2400 rows x 3 columns]</span></span></code></pre></div>
<ul>
<li>good，多個練習，想看2010-08~2011-02的資料：</li>
</ul>
<div class="sourceCode" id="cb161"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb161-1"><a href="pandas-basics.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use .loc[] to subset temperatures_ind for rows from Aug 2010 to Feb 2011</span></span>
<span id="cb161-2"><a href="pandas-basics.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.loc[<span class="st">"2010-08"</span>:<span class="st">"2011-02"</span>])</span>
<span id="cb161-3"><a href="pandas-basics.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 city        country  avg_temp_c</span></span>
<span id="cb161-4"><a href="pandas-basics.html#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date                                           </span></span>
<span id="cb161-5"><a href="pandas-basics.html#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01  Calcutta          India      30.226</span></span>
<span id="cb161-6"><a href="pandas-basics.html#cb161-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01      Pune          India      24.941</span></span>
<span id="cb161-7"><a href="pandas-basics.html#cb161-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01     Izmir         Turkey      28.352</span></span>
<span id="cb161-8"><a href="pandas-basics.html#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01   Tianjin          China      25.543</span></span>
<span id="cb161-9"><a href="pandas-basics.html#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01    Manila    Philippines      27.101</span></span>
<span id="cb161-10"><a href="pandas-basics.html#cb161-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...              ...            ...         ...</span></span>
<span id="cb161-11"><a href="pandas-basics.html#cb161-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01     Kabul    Afghanistan       3.914</span></span>
<span id="cb161-12"><a href="pandas-basics.html#cb161-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01   Chicago  United States       0.276</span></span>
<span id="cb161-13"><a href="pandas-basics.html#cb161-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01    Aleppo          Syria       8.246</span></span>
<span id="cb161-14"><a href="pandas-basics.html#cb161-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01     Delhi          India      18.136</span></span>
<span id="cb161-15"><a href="pandas-basics.html#cb161-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01   Rangoon          Burma      26.631</span></span>
<span id="cb161-16"><a href="pandas-basics.html#cb161-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb161-17"><a href="pandas-basics.html#cb161-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [700 rows x 3 columns]</span></span></code></pre></div>
</div>
<div id="subsetting-by-rowcolumn-number" class="section level3" number="7.5.7">
<h3>
<span class="header-section-number">7.5.7</span> subsetting by row/column number<a class="anchor" aria-label="anchor" href="#subsetting-by-rowcolumn-number"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb162"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb162-1"><a href="pandas-basics.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the 23rd row, 2nd column (index positions 22 and 1).</span></span>
<span id="cb162-2"><a href="pandas-basics.html#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[<span class="dv">22</span>,<span class="dv">1</span>])</span>
<span id="cb162-3"><a href="pandas-basics.html#cb162-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-4"><a href="pandas-basics.html#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the first 5 rows (index positions 0 to 5).</span></span>
<span id="cb162-5"><a href="pandas-basics.html#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan</span></span>
<span id="cb162-6"><a href="pandas-basics.html#cb162-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[:<span class="dv">5</span>])</span>
<span id="cb162-7"><a href="pandas-basics.html#cb162-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-8"><a href="pandas-basics.html#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all rows, columns 3 and 4 (index positions 2 to 4).</span></span>
<span id="cb162-9"><a href="pandas-basics.html#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         date     city        country  avg_temp_c</span></span>
<span id="cb162-10"><a href="pandas-basics.html#cb162-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 2000-01-01  Abidjan  Côte D'Ivoire      27.293</span></span>
<span id="cb162-11"><a href="pandas-basics.html#cb162-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2000-02-01  Abidjan  Côte D'Ivoire      27.685</span></span>
<span id="cb162-12"><a href="pandas-basics.html#cb162-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2000-03-01  Abidjan  Côte D'Ivoire      29.061</span></span>
<span id="cb162-13"><a href="pandas-basics.html#cb162-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2000-04-01  Abidjan  Côte D'Ivoire      28.162</span></span>
<span id="cb162-14"><a href="pandas-basics.html#cb162-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 2000-05-01  Abidjan  Côte D'Ivoire      27.547</span></span>
<span id="cb162-15"><a href="pandas-basics.html#cb162-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[:,<span class="dv">2</span>:<span class="dv">4</span>])</span>
<span id="cb162-16"><a href="pandas-basics.html#cb162-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-17"><a href="pandas-basics.html#cb162-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the first 5 rows, columns 3 and 4.</span></span>
<span id="cb162-18"><a href="pandas-basics.html#cb162-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              country  avg_temp_c</span></span>
<span id="cb162-19"><a href="pandas-basics.html#cb162-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0      Côte D'Ivoire      27.293</span></span>
<span id="cb162-20"><a href="pandas-basics.html#cb162-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      Côte D'Ivoire      27.685</span></span>
<span id="cb162-21"><a href="pandas-basics.html#cb162-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      Côte D'Ivoire      29.061</span></span>
<span id="cb162-22"><a href="pandas-basics.html#cb162-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      Côte D'Ivoire      28.162</span></span>
<span id="cb162-23"><a href="pandas-basics.html#cb162-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      Côte D'Ivoire      27.547</span></span>
<span id="cb162-24"><a href="pandas-basics.html#cb162-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...              ...         ...</span></span>
<span id="cb162-25"><a href="pandas-basics.html#cb162-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16495          China      18.979</span></span>
<span id="cb162-26"><a href="pandas-basics.html#cb162-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16496          China      23.522</span></span>
<span id="cb162-27"><a href="pandas-basics.html#cb162-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16497          China      25.251</span></span>
<span id="cb162-28"><a href="pandas-basics.html#cb162-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16498          China      24.528</span></span>
<span id="cb162-29"><a href="pandas-basics.html#cb162-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16499          China         NaN</span></span>
<span id="cb162-30"><a href="pandas-basics.html#cb162-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb162-31"><a href="pandas-basics.html#cb162-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16500 rows x 2 columns]</span></span>
<span id="cb162-32"><a href="pandas-basics.html#cb162-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[:<span class="dv">5</span>, <span class="dv">2</span>:<span class="dv">4</span>])</span>
<span id="cb162-33"><a href="pandas-basics.html#cb162-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          country  avg_temp_c</span></span>
<span id="cb162-34"><a href="pandas-basics.html#cb162-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  Côte D'Ivoire      27.293</span></span>
<span id="cb162-35"><a href="pandas-basics.html#cb162-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  Côte D'Ivoire      27.685</span></span>
<span id="cb162-36"><a href="pandas-basics.html#cb162-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  Côte D'Ivoire      29.061</span></span>
<span id="cb162-37"><a href="pandas-basics.html#cb162-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  Côte D'Ivoire      28.162</span></span>
<span id="cb162-38"><a href="pandas-basics.html#cb162-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  Côte D'Ivoire      27.547</span></span></code></pre></div>
</div>
</div>
<div id="pivot-table-1" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> pivot table<a class="anchor" aria-label="anchor" href="#pivot-table-1"><i class="fas fa-link"></i></a>
</h2>
<div id="intro" class="section level3" number="7.6.1">
<h3>
<span class="header-section-number">7.6.1</span> Intro<a class="anchor" aria-label="anchor" href="#intro"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>pandas有個dplyr沒有的優點，就是他可以做excel的樞紐分析表<br>
</li>
<li>最簡單的例子，就是你可以指定table的row是性別，col是年級，然後cell是去算該性別該年級下的平均成績之類的</li>
</ul>
<div class="inline-table"><table style="width:96%;" class="table table-sm">
<colgroup>
<col width="29%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th>dplyr無, Excel樞紐</th>
<th>pandas</th>
</tr></thead>
<tbody><tr class="odd">
<td></td>
<td><pre><code>df.pivot_table(
  index = cat_col1, #row
  columns = cat_col2, #col
  values = con_col, #cell要by誰做計算
  aggfunc = np.mean, #計算用的function
  margins = True #是否要算overall row/col
)</code></pre></td>
</tr></tbody>
</table></div>
<ul>
<li>例如，我想by “type” + “is_holiday” 去算平均”weekly_sales”</li>
</ul>
<div class="sourceCode" id="cb164"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb164-1"><a href="pandas-basics.html#cb164-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb164-2"><a href="pandas-basics.html#cb164-2" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="st">"type"</span>, <span class="co"># pivot table的row要放啥</span></span>
<span id="cb164-3"><a href="pandas-basics.html#cb164-3" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="st">"is_holiday"</span>, <span class="co"># pivot table的column要放啥</span></span>
<span id="cb164-4"><a href="pandas-basics.html#cb164-4" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> <span class="st">"weekly_sales"</span>, <span class="co"># pivot table 的 cell ，要對哪個變數做計算</span></span>
<span id="cb164-5"><a href="pandas-basics.html#cb164-5" aria-hidden="true" tabindex="-1"></a>    aggfunc <span class="op">=</span> np.mean <span class="co"># 計算的function要用甚麼</span></span>
<span id="cb164-6"><a href="pandas-basics.html#cb164-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb164-7"><a href="pandas-basics.html#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; is_holiday         False       True</span></span>
<span id="cb164-8"><a href="pandas-basics.html#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                               </span></span>
<span id="cb164-9"><a href="pandas-basics.html#cb164-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A           23768.583523  590.04525</span></span>
<span id="cb164-10"><a href="pandas-basics.html#cb164-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B           25751.980533  810.70500</span></span></code></pre></div>
<ul>
<li>如果我想算marginal mean，那就：</li>
</ul>
<div class="sourceCode" id="cb165"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb165-1"><a href="pandas-basics.html#cb165-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb165-2"><a href="pandas-basics.html#cb165-2" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="st">"type"</span>, <span class="co"># pivot table的row要放啥</span></span>
<span id="cb165-3"><a href="pandas-basics.html#cb165-3" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="st">"is_holiday"</span>, <span class="co"># pivot table的column要放啥</span></span>
<span id="cb165-4"><a href="pandas-basics.html#cb165-4" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> <span class="st">"weekly_sales"</span>, <span class="co"># pivot table 的 cell ，要對哪個變數做計算</span></span>
<span id="cb165-5"><a href="pandas-basics.html#cb165-5" aria-hidden="true" tabindex="-1"></a>    aggfunc <span class="op">=</span> np.mean, <span class="co"># 計算的function要用甚麼</span></span>
<span id="cb165-6"><a href="pandas-basics.html#cb165-6" aria-hidden="true" tabindex="-1"></a>    margins<span class="op">=</span> <span class="va">True</span></span>
<span id="cb165-7"><a href="pandas-basics.html#cb165-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb165-8"><a href="pandas-basics.html#cb165-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; is_holiday         False        True           All</span></span>
<span id="cb165-9"><a href="pandas-basics.html#cb165-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                                              </span></span>
<span id="cb165-10"><a href="pandas-basics.html#cb165-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A           23768.583523  590.045250  23674.667242</span></span>
<span id="cb165-11"><a href="pandas-basics.html#cb165-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B           25751.980533  810.705000  25696.678370</span></span>
<span id="cb165-12"><a href="pandas-basics.html#cb165-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; All         23934.913873  600.552857  23843.950149</span></span></code></pre></div>
<ul>
<li>如果cross的地方，沒有數據，他的預設會是NA。例如：by “department”+“type”去計算平均”weekly_sales”</li>
</ul>
<div class="sourceCode" id="cb166"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb166-1"><a href="pandas-basics.html#cb166-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb166-2"><a href="pandas-basics.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  index <span class="op">=</span> <span class="st">"department"</span>,</span>
<span id="cb166-3"><a href="pandas-basics.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  columns <span class="op">=</span> <span class="st">"type"</span>,</span>
<span id="cb166-4"><a href="pandas-basics.html#cb166-4" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="st">"weekly_sales"</span>,</span>
<span id="cb166-5"><a href="pandas-basics.html#cb166-5" aria-hidden="true" tabindex="-1"></a>  aggfunc<span class="op">=</span> np.mean</span>
<span id="cb166-6"><a href="pandas-basics.html#cb166-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb166-7"><a href="pandas-basics.html#cb166-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                    A              B</span></span>
<span id="cb166-8"><a href="pandas-basics.html#cb166-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; department                              </span></span>
<span id="cb166-9"><a href="pandas-basics.html#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            30961.725379   44050.626667</span></span>
<span id="cb166-10"><a href="pandas-basics.html#cb166-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            67600.158788  112958.526667</span></span>
<span id="cb166-11"><a href="pandas-basics.html#cb166-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            17160.002955   30580.655000</span></span>
<span id="cb166-12"><a href="pandas-basics.html#cb166-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            44285.399091   51219.654167</span></span>
<span id="cb166-13"><a href="pandas-basics.html#cb166-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            34821.011364   63236.875000</span></span>
<span id="cb166-14"><a href="pandas-basics.html#cb166-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                   ...            ...</span></span>
<span id="cb166-15"><a href="pandas-basics.html#cb166-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 95          123933.787121   77082.102500</span></span>
<span id="cb166-16"><a href="pandas-basics.html#cb166-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 96           21367.042857    9528.538333</span></span>
<span id="cb166-17"><a href="pandas-basics.html#cb166-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97           28471.266970    5828.873333</span></span>
<span id="cb166-18"><a href="pandas-basics.html#cb166-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 98           12875.423182     217.428333</span></span>
<span id="cb166-19"><a href="pandas-basics.html#cb166-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 99             379.123659            NaN</span></span>
<span id="cb166-20"><a href="pandas-basics.html#cb166-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb166-21"><a href="pandas-basics.html#cb166-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [80 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>可以發現右下角出現NaN<br>
</li>
<li>如果你想用數值來fill這個NaN，可以用<code>fill_value =</code>這個指令</li>
</ul>
<div class="sourceCode" id="cb167"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb167-1"><a href="pandas-basics.html#cb167-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb167-2"><a href="pandas-basics.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  index <span class="op">=</span> <span class="st">"department"</span>,</span>
<span id="cb167-3"><a href="pandas-basics.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  columns <span class="op">=</span> <span class="st">"type"</span>,</span>
<span id="cb167-4"><a href="pandas-basics.html#cb167-4" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="st">"weekly_sales"</span>,</span>
<span id="cb167-5"><a href="pandas-basics.html#cb167-5" aria-hidden="true" tabindex="-1"></a>  aggfunc<span class="op">=</span> np.mean,</span>
<span id="cb167-6"><a href="pandas-basics.html#cb167-6" aria-hidden="true" tabindex="-1"></a>  fill_value <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb167-7"><a href="pandas-basics.html#cb167-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb167-8"><a href="pandas-basics.html#cb167-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                    A              B</span></span>
<span id="cb167-9"><a href="pandas-basics.html#cb167-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; department                              </span></span>
<span id="cb167-10"><a href="pandas-basics.html#cb167-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            30961.725379   44050.626667</span></span>
<span id="cb167-11"><a href="pandas-basics.html#cb167-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            67600.158788  112958.526667</span></span>
<span id="cb167-12"><a href="pandas-basics.html#cb167-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            17160.002955   30580.655000</span></span>
<span id="cb167-13"><a href="pandas-basics.html#cb167-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            44285.399091   51219.654167</span></span>
<span id="cb167-14"><a href="pandas-basics.html#cb167-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            34821.011364   63236.875000</span></span>
<span id="cb167-15"><a href="pandas-basics.html#cb167-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                   ...            ...</span></span>
<span id="cb167-16"><a href="pandas-basics.html#cb167-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 95          123933.787121   77082.102500</span></span>
<span id="cb167-17"><a href="pandas-basics.html#cb167-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 96           21367.042857    9528.538333</span></span>
<span id="cb167-18"><a href="pandas-basics.html#cb167-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97           28471.266970    5828.873333</span></span>
<span id="cb167-19"><a href="pandas-basics.html#cb167-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 98           12875.423182     217.428333</span></span>
<span id="cb167-20"><a href="pandas-basics.html#cb167-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 99             379.123659       0.000000</span></span>
<span id="cb167-21"><a href="pandas-basics.html#cb167-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb167-22"><a href="pandas-basics.html#cb167-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [80 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>再來練習下一個題目，用”temperatures.csv”的資料<br>
</li>
<li>我想看：各city/各年，的平均溫度<br>
</li>
<li>而原始資料中，沒有”年”這個column，只有”date”這個column(“yyyy-mm-dd”)，所以我要再擷取出year的資訊</li>
</ul>
<div class="sourceCode" id="cb168"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb168-1"><a href="pandas-basics.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a year column to temperatures</span></span>
<span id="cb168-2"><a href="pandas-basics.html#cb168-2" aria-hidden="true" tabindex="-1"></a>temperatures[<span class="st">"year"</span>] <span class="op">=</span> temperatures[<span class="st">"date"</span>].dt.year</span>
<span id="cb168-3"><a href="pandas-basics.html#cb168-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-4"><a href="pandas-basics.html#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot avg_temp_c by country and city vs year</span></span>
<span id="cb168-5"><a href="pandas-basics.html#cb168-5" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year <span class="op">=</span> temperatures.pivot_table(index <span class="op">=</span> [<span class="st">"country"</span>,<span class="st">"city"</span>], columns <span class="op">=</span> <span class="st">"year"</span>, values <span class="op">=</span> <span class="st">"avg_temp_c"</span>)</span>
<span id="cb168-6"><a href="pandas-basics.html#cb168-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-7"><a href="pandas-basics.html#cb168-7" aria-hidden="true" tabindex="-1"></a><span class="co"># See the result</span></span>
<span id="cb168-8"><a href="pandas-basics.html#cb168-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temp_by_country_city_vs_year)</span>
<span id="cb168-9"><a href="pandas-basics.html#cb168-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                                 2000       2001  ...       2012       2013</span></span>
<span id="cb168-10"><a href="pandas-basics.html#cb168-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country       city                                    ...                      </span></span>
<span id="cb168-11"><a href="pandas-basics.html#cb168-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Afghanistan   Kabul             15.822667  15.847917  ...  14.510333  16.206125</span></span>
<span id="cb168-12"><a href="pandas-basics.html#cb168-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Angola        Luanda            24.410333  24.427083  ...  24.240083  24.553875</span></span>
<span id="cb168-13"><a href="pandas-basics.html#cb168-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Australia     Melbourne         14.320083  14.180000  ...  14.268667  14.741500</span></span>
<span id="cb168-14"><a href="pandas-basics.html#cb168-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Sydney            17.567417  17.854500  ...  17.474333  18.089750</span></span>
<span id="cb168-15"><a href="pandas-basics.html#cb168-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bangladesh    Dhaka             25.905250  25.931250  ...  26.283583  26.587000</span></span>
<span id="cb168-16"><a href="pandas-basics.html#cb168-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                                   ...        ...  ...        ...        ...</span></span>
<span id="cb168-17"><a href="pandas-basics.html#cb168-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; United States Chicago           11.089667  11.703083  ...  12.821250  11.586889</span></span>
<span id="cb168-18"><a href="pandas-basics.html#cb168-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Los Angeles       16.643333  16.466250  ...  17.089583  18.120667</span></span>
<span id="cb168-19"><a href="pandas-basics.html#cb168-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               New York           9.969083  10.931000  ...  11.971500  12.163889</span></span>
<span id="cb168-20"><a href="pandas-basics.html#cb168-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Vietnam       Ho Chi Minh City  27.588917  27.831750  ...  28.248750  28.455000</span></span>
<span id="cb168-21"><a href="pandas-basics.html#cb168-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Zimbabwe      Harare            20.283667  20.861000  ...  20.523333  19.756500</span></span>
<span id="cb168-22"><a href="pandas-basics.html#cb168-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb168-23"><a href="pandas-basics.html#cb168-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [100 rows x 14 columns]</span></span></code></pre></div>
</div>
<div id="subsetting-pivot-table" class="section level3" number="7.6.2">
<h3>
<span class="header-section-number">7.6.2</span> subsetting pivot table<a class="anchor" aria-label="anchor" href="#subsetting-pivot-table"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>那因為pivot table他就是一個pandas dataframe，所以你也可以用.loc去subset他，</li>
<li>例如，我想subset出country從”Egypt”到”India”的資料</li>
</ul>
<div class="sourceCode" id="cb169"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb169-1"><a href="pandas-basics.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset for Egypt to India</span></span>
<span id="cb169-2"><a href="pandas-basics.html#cb169-2" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year.loc[<span class="st">"Egypt"</span>:<span class="st">"India"</span>]</span>
<span id="cb169-3"><a href="pandas-basics.html#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                       2000       2001  ...       2012       2013</span></span>
<span id="cb169-4"><a href="pandas-basics.html#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                               ...                      </span></span>
<span id="cb169-5"><a href="pandas-basics.html#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Egypt    Alexandria   20.744500  21.454583  ...  21.552583  21.438500</span></span>
<span id="cb169-6"><a href="pandas-basics.html#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Cairo        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb169-7"><a href="pandas-basics.html#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Gizeh        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb169-8"><a href="pandas-basics.html#cb169-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ethiopia Addis Abeba  18.241250  18.296417  ...  18.448583  19.539000</span></span>
<span id="cb169-9"><a href="pandas-basics.html#cb169-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; France   Paris        11.739667  11.371250  ...  11.219917  11.011625</span></span>
<span id="cb169-10"><a href="pandas-basics.html#cb169-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Germany  Berlin       10.963667   9.690250  ...   9.964333  10.121500</span></span>
<span id="cb169-11"><a href="pandas-basics.html#cb169-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; India    Ahmadabad    27.436000  27.198083  ...  27.027250  27.608625</span></span>
<span id="cb169-12"><a href="pandas-basics.html#cb169-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bangalore    25.337917  25.528167  ...  26.042333  26.610500</span></span>
<span id="cb169-13"><a href="pandas-basics.html#cb169-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bombay       27.203667  27.243667  ...  27.192500  26.713000</span></span>
<span id="cb169-14"><a href="pandas-basics.html#cb169-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Calcutta     26.491333  26.515167  ...  26.935083  27.369250</span></span>
<span id="cb169-15"><a href="pandas-basics.html#cb169-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Delhi        26.048333  25.862917  ...  25.889417  26.709250</span></span>
<span id="cb169-16"><a href="pandas-basics.html#cb169-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Hyderabad    27.231833  27.555167  ...  28.018583  28.851250</span></span>
<span id="cb169-17"><a href="pandas-basics.html#cb169-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Jaipur       26.430250  26.023000  ...  25.884500  26.844125</span></span>
<span id="cb169-18"><a href="pandas-basics.html#cb169-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Kanpur       25.353917  25.326500  ...  25.445417  26.121250</span></span>
<span id="cb169-19"><a href="pandas-basics.html#cb169-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lakhnau      25.353917  25.326500  ...  25.445417  26.121250</span></span>
<span id="cb169-20"><a href="pandas-basics.html#cb169-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Madras       28.811667  29.162917  ...  29.778417  30.411750</span></span>
<span id="cb169-21"><a href="pandas-basics.html#cb169-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Nagpur       26.181417  26.321667  ...  26.327917  27.112375</span></span>
<span id="cb169-22"><a href="pandas-basics.html#cb169-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          New Delhi    26.048333  25.862917  ...  25.889417  26.709250</span></span>
<span id="cb169-23"><a href="pandas-basics.html#cb169-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Pune         25.110917  25.337833  ...  25.296833  25.847625</span></span>
<span id="cb169-24"><a href="pandas-basics.html#cb169-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Surat        27.029000  26.897250  ...  26.889250  27.437750</span></span>
<span id="cb169-25"><a href="pandas-basics.html#cb169-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-26"><a href="pandas-basics.html#cb169-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20 rows x 14 columns]</span></span></code></pre></div>
<ul>
<li>我想subset出country-city從”Egypt-Cairo” 到 “India-Delhi”</li>
</ul>
<div class="sourceCode" id="cb170"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb170-1"><a href="pandas-basics.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset for Egypt, Cairo to India, Delhi</span></span>
<span id="cb170-2"><a href="pandas-basics.html#cb170-2" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year.loc[(<span class="st">"Egypt"</span>,<span class="st">"Cairo"</span>):(<span class="st">"India"</span>,<span class="st">"Delhi"</span>)]</span>
<span id="cb170-3"><a href="pandas-basics.html#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                       2000       2001  ...       2012       2013</span></span>
<span id="cb170-4"><a href="pandas-basics.html#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                               ...                      </span></span>
<span id="cb170-5"><a href="pandas-basics.html#cb170-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Egypt    Cairo        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb170-6"><a href="pandas-basics.html#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Gizeh        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb170-7"><a href="pandas-basics.html#cb170-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ethiopia Addis Abeba  18.241250  18.296417  ...  18.448583  19.539000</span></span>
<span id="cb170-8"><a href="pandas-basics.html#cb170-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; France   Paris        11.739667  11.371250  ...  11.219917  11.011625</span></span>
<span id="cb170-9"><a href="pandas-basics.html#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Germany  Berlin       10.963667   9.690250  ...   9.964333  10.121500</span></span>
<span id="cb170-10"><a href="pandas-basics.html#cb170-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; India    Ahmadabad    27.436000  27.198083  ...  27.027250  27.608625</span></span>
<span id="cb170-11"><a href="pandas-basics.html#cb170-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bangalore    25.337917  25.528167  ...  26.042333  26.610500</span></span>
<span id="cb170-12"><a href="pandas-basics.html#cb170-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bombay       27.203667  27.243667  ...  27.192500  26.713000</span></span>
<span id="cb170-13"><a href="pandas-basics.html#cb170-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Calcutta     26.491333  26.515167  ...  26.935083  27.369250</span></span>
<span id="cb170-14"><a href="pandas-basics.html#cb170-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Delhi        26.048333  25.862917  ...  25.889417  26.709250</span></span>
<span id="cb170-15"><a href="pandas-basics.html#cb170-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb170-16"><a href="pandas-basics.html#cb170-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10 rows x 14 columns]</span></span></code></pre></div>
<ul>
<li>綜合行和列，subset出country-city從”Egypt-Cairo” 到 “India-Delhi”，以及年份從2005~2010的資料：</li>
</ul>
<div class="sourceCode" id="cb171"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb171-1"><a href="pandas-basics.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># From Egypt, Cairo to India, Delhi, and 2005 to 2010.</span></span>
<span id="cb171-2"><a href="pandas-basics.html#cb171-2" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year.loc[(<span class="st">"Egypt"</span>,<span class="st">"Cairo"</span>):(<span class="st">"India"</span>,<span class="st">"Delhi"</span>),<span class="st">"2005"</span>:<span class="st">"2010"</span>]</span>
<span id="cb171-3"><a href="pandas-basics.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                       2005       2006  ...       2009       2010</span></span>
<span id="cb171-4"><a href="pandas-basics.html#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                               ...                      </span></span>
<span id="cb171-5"><a href="pandas-basics.html#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Egypt    Cairo        22.006500  22.050000  ...  22.625000  23.718250</span></span>
<span id="cb171-6"><a href="pandas-basics.html#cb171-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Gizeh        22.006500  22.050000  ...  22.625000  23.718250</span></span>
<span id="cb171-7"><a href="pandas-basics.html#cb171-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ethiopia Addis Abeba  18.312833  18.427083  ...  18.765333  18.298250</span></span>
<span id="cb171-8"><a href="pandas-basics.html#cb171-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; France   Paris        11.552917  11.788500  ...  11.464083  10.409833</span></span>
<span id="cb171-9"><a href="pandas-basics.html#cb171-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Germany  Berlin        9.919083  10.545333  ...  10.062500   8.606833</span></span>
<span id="cb171-10"><a href="pandas-basics.html#cb171-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; India    Ahmadabad    26.828083  27.282833  ...  28.095833  28.017833</span></span>
<span id="cb171-11"><a href="pandas-basics.html#cb171-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bangalore    25.476500  25.418250  ...  25.725750  25.705250</span></span>
<span id="cb171-12"><a href="pandas-basics.html#cb171-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bombay       27.035750  27.381500  ...  27.844500  27.765417</span></span>
<span id="cb171-13"><a href="pandas-basics.html#cb171-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Calcutta     26.729167  26.986250  ...  27.153250  27.288833</span></span>
<span id="cb171-14"><a href="pandas-basics.html#cb171-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Delhi        25.716083  26.365917  ...  26.554250  26.520250</span></span>
<span id="cb171-15"><a href="pandas-basics.html#cb171-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb171-16"><a href="pandas-basics.html#cb171-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10 rows x 6 columns]</span></span></code></pre></div>
</div>
<div id="calculating-on-a-pivot-table" class="section level3" number="7.6.3">
<h3>
<span class="header-section-number">7.6.3</span> Calculating on a pivot table<a class="anchor" aria-label="anchor" href="#calculating-on-a-pivot-table"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>因為pivot table還是pandas dataframe，所以你也可以對他做運算<br>
</li>
<li>例如：這邊想做colmean和rowmean<br>
</li>
<li>先看column mean，用的語法是 <code>df.mean(axis = 0)</code><br>
</li>
<li>例如，我們看看各年的溫度：</li>
</ul>
<div class="sourceCode" id="cb172"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb172-1"><a href="pandas-basics.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the worldwide mean temp by year</span></span>
<span id="cb172-2"><a href="pandas-basics.html#cb172-2" aria-hidden="true" tabindex="-1"></a>mean_temp_by_year <span class="op">=</span> temp_by_country_city_vs_year.mean(axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb172-3"><a href="pandas-basics.html#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_year)</span>
<span id="cb172-4"><a href="pandas-basics.html#cb172-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year</span></span>
<span id="cb172-5"><a href="pandas-basics.html#cb172-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2000    19.506243</span></span>
<span id="cb172-6"><a href="pandas-basics.html#cb172-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2001    19.679352</span></span>
<span id="cb172-7"><a href="pandas-basics.html#cb172-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2002    19.855685</span></span>
<span id="cb172-8"><a href="pandas-basics.html#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2003    19.630197</span></span>
<span id="cb172-9"><a href="pandas-basics.html#cb172-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2004    19.672204</span></span>
<span id="cb172-10"><a href="pandas-basics.html#cb172-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2005    19.607239</span></span>
<span id="cb172-11"><a href="pandas-basics.html#cb172-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2006    19.793993</span></span>
<span id="cb172-12"><a href="pandas-basics.html#cb172-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2007    19.854270</span></span>
<span id="cb172-13"><a href="pandas-basics.html#cb172-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2008    19.608778</span></span>
<span id="cb172-14"><a href="pandas-basics.html#cb172-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2009    19.833752</span></span>
<span id="cb172-15"><a href="pandas-basics.html#cb172-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010    19.911734</span></span>
<span id="cb172-16"><a href="pandas-basics.html#cb172-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011    19.549197</span></span>
<span id="cb172-17"><a href="pandas-basics.html#cb172-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2012    19.668239</span></span>
<span id="cb172-18"><a href="pandas-basics.html#cb172-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2013    20.312285</span></span>
<span id="cb172-19"><a href="pandas-basics.html#cb172-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: float64</span></span></code></pre></div>
<ul>
<li>挑出最大值的那年</li>
</ul>
<div class="sourceCode" id="cb173"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb173-1"><a href="pandas-basics.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the year that had the highest mean temp</span></span>
<span id="cb173-2"><a href="pandas-basics.html#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_year[mean_temp_by_year <span class="op">==</span> mean_temp_by_year.<span class="bu">max</span>()])</span>
<span id="cb173-3"><a href="pandas-basics.html#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year</span></span>
<span id="cb173-4"><a href="pandas-basics.html#cb173-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2013    20.312285</span></span>
<span id="cb173-5"><a href="pandas-basics.html#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: float64</span></span></code></pre></div>
<ul>
<li>接著，看各city的溫度：</li>
</ul>
<div class="sourceCode" id="cb174"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb174-1"><a href="pandas-basics.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the mean temp by city</span></span>
<span id="cb174-2"><a href="pandas-basics.html#cb174-2" aria-hidden="true" tabindex="-1"></a>mean_temp_by_city <span class="op">=</span> temp_by_country_city_vs_year.mean(axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb174-3"><a href="pandas-basics.html#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_city)</span>
<span id="cb174-4"><a href="pandas-basics.html#cb174-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country        city            </span></span>
<span id="cb174-5"><a href="pandas-basics.html#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Afghanistan    Kabul               15.541955</span></span>
<span id="cb174-6"><a href="pandas-basics.html#cb174-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Angola         Luanda              24.391616</span></span>
<span id="cb174-7"><a href="pandas-basics.html#cb174-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Australia      Melbourne           14.275411</span></span>
<span id="cb174-8"><a href="pandas-basics.html#cb174-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                Sydney              17.799250</span></span>
<span id="cb174-9"><a href="pandas-basics.html#cb174-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bangladesh     Dhaka               26.174440</span></span>
<span id="cb174-10"><a href="pandas-basics.html#cb174-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                      ...    </span></span>
<span id="cb174-11"><a href="pandas-basics.html#cb174-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; United States  Chicago             11.330825</span></span>
<span id="cb174-12"><a href="pandas-basics.html#cb174-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                Los Angeles         16.675399</span></span>
<span id="cb174-13"><a href="pandas-basics.html#cb174-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                New York            10.911034</span></span>
<span id="cb174-14"><a href="pandas-basics.html#cb174-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Vietnam        Ho Chi Minh City    27.922857</span></span>
<span id="cb174-15"><a href="pandas-basics.html#cb174-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Zimbabwe       Harare              20.699000</span></span>
<span id="cb174-16"><a href="pandas-basics.html#cb174-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Length: 100, dtype: float64</span></span></code></pre></div>
<ul>
<li>找最低溫的city</li>
</ul>
<div class="sourceCode" id="cb175"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb175-1"><a href="pandas-basics.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the city that had the lowest mean temp</span></span>
<span id="cb175-2"><a href="pandas-basics.html#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_city[mean_temp_by_city<span class="op">==</span>mean_temp_by_city.<span class="bu">min</span>()])</span>
<span id="cb175-3"><a href="pandas-basics.html#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city  </span></span>
<span id="cb175-4"><a href="pandas-basics.html#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; China    Harbin    4.876551</span></span>
<span id="cb175-5"><a href="pandas-basics.html#cb175-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: float64</span></span></code></pre></div>
</div>
</div>
<div id="visualizing-dataframe" class="section level2" number="7.7">
<h2>
<span class="header-section-number">7.7</span> Visualizing DataFrame<a class="anchor" aria-label="anchor" href="#visualizing-dataframe"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb176"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb176-1"><a href="pandas-basics.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb176-2"><a href="pandas-basics.html#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre></div>
<ul>
<li>先讀一個資料集進來”avoplotto.pkl”</li>
</ul>
<div class="sourceCode" id="cb177"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb177-1"><a href="pandas-basics.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"data/avoplotto.pkl"</span>, <span class="st">"rb"</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb177-2"><a href="pandas-basics.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  avocados <span class="op">=</span> pickle.load(<span class="bu">file</span>)</span></code></pre></div>
<div class="sourceCode" id="cb178"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb178-1"><a href="pandas-basics.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(avocados))</span>
<span id="cb178-2"><a href="pandas-basics.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb178-3"><a href="pandas-basics.html#cb178-3" aria-hidden="true" tabindex="-1"></a>avocados.head()</span>
<span id="cb178-4"><a href="pandas-basics.html#cb178-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type  year  avg_price   size     nb_sold</span></span>
<span id="cb178-5"><a href="pandas-basics.html#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2015-12-27  conventional  2015       0.95  small  9626901.09</span></span>
<span id="cb178-6"><a href="pandas-basics.html#cb178-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2015-12-20  conventional  2015       0.98  small  8710021.76</span></span>
<span id="cb178-7"><a href="pandas-basics.html#cb178-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2015-12-13  conventional  2015       0.93  small  9855053.66</span></span>
<span id="cb178-8"><a href="pandas-basics.html#cb178-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015       0.89  small  9405464.36</span></span>
<span id="cb178-9"><a href="pandas-basics.html#cb178-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2015-11-29  conventional  2015       0.99  small  8094803.56</span></span></code></pre></div>
<ul>
<li>avocado是酪梨，這筆資料是想了解酪梨在USA的供需狀況<br>
</li>
<li>size是指酪梨的大小，分成三類(small, large, extra_large)<br>
</li>
<li>type有兩種(organic, conventional)<br>
</li>
<li>所以這筆資料，等於是看該類型該size的酪梨，在那個date下的賣價(avg_price)，以及賣出多少個(nb_sold = number sold)</li>
</ul>
<div id="bar" class="section level3" number="7.7.1">
<h3>
<span class="header-section-number">7.7.1</span> Bar<a class="anchor" aria-label="anchor" href="#bar"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想了解，不同size，總計賣出多少個？</li>
</ul>
<div class="sourceCode" id="cb179"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb179-1"><a href="pandas-basics.html#cb179-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_size <span class="op">=</span> avocados.groupby(<span class="st">"size"</span>)[<span class="st">"nb_sold"</span>].<span class="bu">sum</span>()</span>
<span id="cb179-2"><a href="pandas-basics.html#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nb_sold_by_size)</span>
<span id="cb179-3"><a href="pandas-basics.html#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; size</span></span>
<span id="cb179-4"><a href="pandas-basics.html#cb179-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extra_large    1.561752e+08</span></span>
<span id="cb179-5"><a href="pandas-basics.html#cb179-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; large          2.015012e+09</span></span>
<span id="cb179-6"><a href="pandas-basics.html#cb179-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; small          2.054936e+09</span></span>
<span id="cb179-7"><a href="pandas-basics.html#cb179-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: nb_sold, dtype: float64</span></span></code></pre></div>
<ul>
<li>別忘了，你summarise的方式是是對某個column做sum method，所以結果是series，不是dataframe!!</li>
</ul>
<div class="sourceCode" id="cb180"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb180-1"><a href="pandas-basics.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(nb_sold_by_size))</span>
<span id="cb180-2"><a href="pandas-basics.html#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<ul>
<li>畫成bar plot</li>
</ul>
<div class="sourceCode" id="cb181"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb181-1"><a href="pandas-basics.html#cb181-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_size.plot(kind <span class="op">=</span> <span class="st">"bar"</span>, <span class="co">#不需要指定x軸是啥，y軸是啥，因為你現在只是個series</span></span>
<span id="cb181-2"><a href="pandas-basics.html#cb181-2" aria-hidden="true" tabindex="-1"></a>                     title <span class="op">=</span> <span class="st">"hahaha"</span>, </span>
<span id="cb181-3"><a href="pandas-basics.html#cb181-3" aria-hidden="true" tabindex="-1"></a>                     rot <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb181-4"><a href="pandas-basics.html#cb181-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-77-1.png" width="672"></div>
<ul>
<li>看起來，small是賣最好的，但和large沒有差太多，而extra_large則少非常多</li>
</ul>
</div>
<div id="line-plot" class="section level3" number="7.7.2">
<h3>
<span class="header-section-number">7.7.2</span> Line plot<a class="anchor" aria-label="anchor" href="#line-plot"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想看一下，售出數量隨時間的變化</li>
</ul>
<div class="sourceCode" id="cb182"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb182-1"><a href="pandas-basics.html#cb182-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_date <span class="op">=</span> avocados.groupby(<span class="st">"date"</span>)[<span class="st">"nb_sold"</span>].<span class="bu">sum</span>()</span>
<span id="cb182-2"><a href="pandas-basics.html#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nb_sold_by_date.head())</span>
<span id="cb182-3"><a href="pandas-basics.html#cb182-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date</span></span>
<span id="cb182-4"><a href="pandas-basics.html#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-04    27279606.03</span></span>
<span id="cb182-5"><a href="pandas-basics.html#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-11    25081927.33</span></span>
<span id="cb182-6"><a href="pandas-basics.html#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-18    24961540.48</span></span>
<span id="cb182-7"><a href="pandas-basics.html#cb182-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-25    24094678.66</span></span>
<span id="cb182-8"><a href="pandas-basics.html#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-02-01    39838734.08</span></span>
<span id="cb182-9"><a href="pandas-basics.html#cb182-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: nb_sold, dtype: float64</span></span></code></pre></div>
<ul>
<li>別忘了，現在是series，不是dataframe</li>
</ul>
<div class="sourceCode" id="cb183"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb183-1"><a href="pandas-basics.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(nb_sold_by_date))</span>
<span id="cb183-2"><a href="pandas-basics.html#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<ul>
<li>畫趨勢圖吧：</li>
</ul>
<div class="sourceCode" id="cb184"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb184-1"><a href="pandas-basics.html#cb184-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_date.plot(kind <span class="op">=</span> <span class="st">"line"</span>, rot <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb184-2"><a href="pandas-basics.html#cb184-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-80-3.png" width="672"></div>
</div>
<div id="scatter-plot" class="section level3" number="7.7.3">
<h3>
<span class="header-section-number">7.7.3</span> scatter plot<a class="anchor" aria-label="anchor" href="#scatter-plot"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想看看供需之間的關係，所以我想看賣出的數量(nb_sold)，與賣出的價錢(avg_price)的關係：</li>
</ul>
<div class="sourceCode" id="cb185"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb185-1"><a href="pandas-basics.html#cb185-1" aria-hidden="true" tabindex="-1"></a>avocados.plot(x <span class="op">=</span> <span class="st">"nb_sold"</span>,</span>
<span id="cb185-2"><a href="pandas-basics.html#cb185-2" aria-hidden="true" tabindex="-1"></a>              y <span class="op">=</span> <span class="st">"avg_price"</span>,</span>
<span id="cb185-3"><a href="pandas-basics.html#cb185-3" aria-hidden="true" tabindex="-1"></a>              kind <span class="op">=</span> <span class="st">"scatter"</span>,</span>
<span id="cb185-4"><a href="pandas-basics.html#cb185-4" aria-hidden="true" tabindex="-1"></a>              title <span class="op">=</span> <span class="st">"Number of avocados sold vs. average price"</span>)</span>
<span id="cb185-5"><a href="pandas-basics.html#cb185-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-81-5.png" width="672"></div>
<ul>
<li>看起來賣越多的時候，價格就降下來了</li>
</ul>
</div>
<div id="histogram" class="section level3" number="7.7.4">
<h3>
<span class="header-section-number">7.7.4</span> Histogram<a class="anchor" aria-label="anchor" href="#histogram"><i class="fas fa-link"></i></a>
</h3>
<div id="single-histogram" class="section level4" number="7.7.4.1">
<h4>
<span class="header-section-number">7.7.4.1</span> single histogram<a class="anchor" aria-label="anchor" href="#single-histogram"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>我如果想看賣出價格的分布，我可以這樣做：</li>
</ul>
<div class="sourceCode" id="cb186"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb186-1"><a href="pandas-basics.html#cb186-1" aria-hidden="true" tabindex="-1"></a>avocados[<span class="st">"avg_price"</span>].hist(bins <span class="op">=</span> <span class="dv">20</span>)</span>
<span id="cb186-2"><a href="pandas-basics.html#cb186-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-82-7.png" width="672"></div>
</div>
<div id="multiple-histogram" class="section level4" number="7.7.4.2">
<h4>
<span class="header-section-number">7.7.4.2</span> multiple histogram<a class="anchor" aria-label="anchor" href="#multiple-histogram"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>如果我想比較兩個分布，例如，我想看conventional酪梨的價格分布，和organic酪梨的價格分布有啥不同：</li>
</ul>
<div class="sourceCode" id="cb187"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb187-1"><a href="pandas-basics.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram of conventional avg_price </span></span>
<span id="cb187-2"><a href="pandas-basics.html#cb187-2" aria-hidden="true" tabindex="-1"></a>avocados[avocados[<span class="st">"type"</span>] <span class="op">==</span> <span class="st">"conventional"</span>][<span class="st">"avg_price"</span>].hist(bins <span class="op">=</span> <span class="dv">20</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb187-3"><a href="pandas-basics.html#cb187-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-4"><a href="pandas-basics.html#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram of organic avg_price</span></span>
<span id="cb187-5"><a href="pandas-basics.html#cb187-5" aria-hidden="true" tabindex="-1"></a>avocados[avocados[<span class="st">"type"</span>] <span class="op">==</span> <span class="st">"organic"</span>][<span class="st">"avg_price"</span>].hist(bins <span class="op">=</span> <span class="dv">20</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb187-6"><a href="pandas-basics.html#cb187-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-7"><a href="pandas-basics.html#cb187-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a legend</span></span>
<span id="cb187-8"><a href="pandas-basics.html#cb187-8" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">"conventional"</span>, <span class="st">"organic"</span>])</span>
<span id="cb187-9"><a href="pandas-basics.html#cb187-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-10"><a href="pandas-basics.html#cb187-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb187-11"><a href="pandas-basics.html#cb187-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-83-9.png" width="672"></div>
</div>
</div>
</div>
<div id="missing-values" class="section level2" number="7.8">
<h2>
<span class="header-section-number">7.8</span> Missing values<a class="anchor" aria-label="anchor" href="#missing-values"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>先來做個假資料：</li>
</ul>
<div class="sourceCode" id="cb188"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb188-1"><a href="pandas-basics.html#cb188-1" aria-hidden="true" tabindex="-1"></a>sub_avocados <span class="op">=</span> avocados.iloc[:<span class="dv">4</span>]</span>
<span id="cb188-2"><a href="pandas-basics.html#cb188-2" aria-hidden="true" tabindex="-1"></a>sub_avocados.iloc[<span class="dv">1</span>,[<span class="dv">3</span>,<span class="dv">5</span>]] <span class="op">=</span> <span class="bu">float</span>(<span class="st">"NaN"</span>)</span>
<span id="cb188-3"><a href="pandas-basics.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; /Volumes/GoogleDrive/我的雲端硬碟/0. codepool_python/ds_tutorial/renv/python/virtualenvs/renv-python-3.8.0/lib/python3.8/site-packages/pandas/core/indexing.py:1817: SettingWithCopyWarning: </span></span>
<span id="cb188-4"><a href="pandas-basics.html#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A value is trying to be set on a copy of a slice from a DataFrame.</span></span>
<span id="cb188-5"><a href="pandas-basics.html#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Try using .loc[row_indexer,col_indexer] = value instead</span></span>
<span id="cb188-6"><a href="pandas-basics.html#cb188-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb188-7"><a href="pandas-basics.html#cb188-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy</span></span>
<span id="cb188-8"><a href="pandas-basics.html#cb188-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   self._setitem_single_column(loc, value, pi)</span></span>
<span id="cb188-9"><a href="pandas-basics.html#cb188-9" aria-hidden="true" tabindex="-1"></a>sub_avocados.iloc[[<span class="dv">0</span>,<span class="dv">2</span>],<span class="dv">2</span>] <span class="op">=</span> <span class="bu">float</span>(<span class="st">"NaN"</span>)</span>
<span id="cb188-10"><a href="pandas-basics.html#cb188-10" aria-hidden="true" tabindex="-1"></a>sub_avocados</span>
<span id="cb188-11"><a href="pandas-basics.html#cb188-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type    year  avg_price   size     nb_sold</span></span>
<span id="cb188-12"><a href="pandas-basics.html#cb188-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2015-12-27  conventional     NaN       0.95  small  9626901.09</span></span>
<span id="cb188-13"><a href="pandas-basics.html#cb188-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2015-12-20  conventional  2015.0        NaN  small         NaN</span></span>
<span id="cb188-14"><a href="pandas-basics.html#cb188-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2015-12-13  conventional     NaN       0.93  small  9855053.66</span></span>
<span id="cb188-15"><a href="pandas-basics.html#cb188-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015.0       0.89  small  9405464.36</span></span></code></pre></div>
<ul>
<li>可以看到有NA在裡面了</li>
</ul>
<div id="finding-missing-values" class="section level3" number="7.8.1">
<h3>
<span class="header-section-number">7.8.1</span> Finding missing values<a class="anchor" aria-label="anchor" href="#finding-missing-values"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>看dataframe哪個cell有NA</li>
</ul>
<div class="sourceCode" id="cb189"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb189-1"><a href="pandas-basics.html#cb189-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna()</span>
<span id="cb189-2"><a href="pandas-basics.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     date   type   year  avg_price   size  nb_sold</span></span>
<span id="cb189-3"><a href="pandas-basics.html#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  False  False   True      False  False    False</span></span>
<span id="cb189-4"><a href="pandas-basics.html#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  False  False  False       True  False     True</span></span>
<span id="cb189-5"><a href="pandas-basics.html#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  False  False   True      False  False    False</span></span>
<span id="cb189-6"><a href="pandas-basics.html#cb189-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  False  False  False      False  False    False</span></span></code></pre></div>
<ul>
<li>看df各個column有沒有NA</li>
</ul>
<div class="sourceCode" id="cb190"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb190-1"><a href="pandas-basics.html#cb190-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna().<span class="bu">any</span>()</span>
<span id="cb190-2"><a href="pandas-basics.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date         False</span></span>
<span id="cb190-3"><a href="pandas-basics.html#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type         False</span></span>
<span id="cb190-4"><a href="pandas-basics.html#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year          True</span></span>
<span id="cb190-5"><a href="pandas-basics.html#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; avg_price     True</span></span>
<span id="cb190-6"><a href="pandas-basics.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; size         False</span></span>
<span id="cb190-7"><a href="pandas-basics.html#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nb_sold       True</span></span>
<span id="cb190-8"><a href="pandas-basics.html#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: bool</span></span></code></pre></div>
<ul>
<li>看df各個column的NA總數</li>
</ul>
<div class="sourceCode" id="cb191"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb191-1"><a href="pandas-basics.html#cb191-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna().<span class="bu">sum</span>()</span>
<span id="cb191-2"><a href="pandas-basics.html#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date         0</span></span>
<span id="cb191-3"><a href="pandas-basics.html#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type         0</span></span>
<span id="cb191-4"><a href="pandas-basics.html#cb191-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year         2</span></span>
<span id="cb191-5"><a href="pandas-basics.html#cb191-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; avg_price    1</span></span>
<span id="cb191-6"><a href="pandas-basics.html#cb191-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; size         0</span></span>
<span id="cb191-7"><a href="pandas-basics.html#cb191-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nb_sold      1</span></span>
<span id="cb191-8"><a href="pandas-basics.html#cb191-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: int64</span></span></code></pre></div>
<ul>
<li>畫個bar chart看一下：</li>
</ul>
<div class="sourceCode" id="cb192"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb192-1"><a href="pandas-basics.html#cb192-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna().<span class="bu">sum</span>().plot(kind <span class="op">=</span> <span class="st">"bar"</span>)</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-88-11.png" width="672"></div>
</div>
<div id="remove-na" class="section level3" number="7.8.2">
<h3>
<span class="header-section-number">7.8.2</span> Remove NA<a class="anchor" aria-label="anchor" href="#remove-na"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>如果要留下complete cases，可用pandas的<code>.dropna()</code>指令</li>
</ul>
<div class="sourceCode" id="cb193"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb193-1"><a href="pandas-basics.html#cb193-1" aria-hidden="true" tabindex="-1"></a>avocados_complete <span class="op">=</span> sub_avocados.dropna()</span>
<span id="cb193-2"><a href="pandas-basics.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(avocados_complete)</span>
<span id="cb193-3"><a href="pandas-basics.html#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type    year  avg_price   size     nb_sold</span></span>
<span id="cb193-4"><a href="pandas-basics.html#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015.0       0.89  small  9405464.36</span></span></code></pre></div>
<ul>
<li>只剩這一個case了</li>
</ul>
</div>
<div id="replacing-na" class="section level3" number="7.8.3">
<h3>
<span class="header-section-number">7.8.3</span> Replacing NA<a class="anchor" aria-label="anchor" href="#replacing-na"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>這邊只教了最簡單的，遺漏值全補0</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb194-1"><a href="pandas-basics.html#cb194-1" aria-hidden="true" tabindex="-1"></a>avocados_fill_zero <span class="op">=</span> sub_avocados.fillna(<span class="dv">0</span>)</span>
<span id="cb194-2"><a href="pandas-basics.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(avocados_fill_zero)</span>
<span id="cb194-3"><a href="pandas-basics.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type    year  avg_price   size     nb_sold</span></span>
<span id="cb194-4"><a href="pandas-basics.html#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2015-12-27  conventional     0.0       0.95  small  9626901.09</span></span>
<span id="cb194-5"><a href="pandas-basics.html#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2015-12-20  conventional  2015.0       0.00  small        0.00</span></span>
<span id="cb194-6"><a href="pandas-basics.html#cb194-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2015-12-13  conventional     0.0       0.93  small  9855053.66</span></span>
<span id="cb194-7"><a href="pandas-basics.html#cb194-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015.0       0.89  small  9405464.36</span></span></code></pre></div>
<ul>
<li>呵呵，很怪吧! 這只適用在，補0有意義的地方，例如，nb_sold如果是因為沒有賣出任何酪梨時，會寫NA，那這時補0就是對的<br>
</li>
<li>詳細的處理missing value的方法，留待data cleaning的章節再來好好講</li>
</ul>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="pandas_cheatsheet.html"><span class="header-section-number">6</span> pandas_cheatsheet</a></div>
<div class="next"><a href="join-data.html"><span class="header-section-number">8</span> Join data</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#pandas-basics"><span class="header-section-number">7</span> Pandas basics</a></li>
<li><a class="nav-link" href="#inspecting-dataframe"><span class="header-section-number">7.1</span> Inspecting DataFrame</a></li>
<li><a class="nav-link" href="#parts-of-a-dataframe"><span class="header-section-number">7.2</span> Parts of a DataFrame</a></li>
<li>
<a class="nav-link" href="#select-filter-arrange-mutate"><span class="header-section-number">7.3</span> select, filter, arrange, &amp; mutate</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#select-1"><span class="header-section-number">7.3.1</span> select</a></li>
<li><a class="nav-link" href="#filter-1"><span class="header-section-number">7.3.2</span> filter</a></li>
<li><a class="nav-link" href="#arrange-1"><span class="header-section-number">7.3.3</span> arrange</a></li>
<li><a class="nav-link" href="#mutate-and-rename-1"><span class="header-section-number">7.3.4</span> mutate and rename</a></li>
<li><a class="nav-link" href="#summarise"><span class="header-section-number">7.3.5</span> summarise</a></li>
<li><a class="nav-link" href="#group_by-summarise-2"><span class="header-section-number">7.3.6</span> group_by + summarise</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#slice-by-.loc%E5%88%97%E5%90%8D-%E8%A1%8C%E5%90%8D-and-.iloc%E5%88%97%E6%95%B8-%E8%A1%8C%E6%95%B8"><span class="header-section-number">7.4</span> slice by .loc[列名, 行名] and .iloc[列數, 行數]</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0value-%E9%9D%9Edf-type"><span class="header-section-number">7.4.1</span> 取某列某行(得到value, 非df type)</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0df-type"><span class="header-section-number">7.4.2</span> 取某列某行(得到df type)</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E5%A4%9A%E5%88%97%E5%A4%9A%E8%A1%8C"><span class="header-section-number">7.4.3</span> 取多列多行</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E5%88%97%E5%B0%B1%E5%A5%BD%E8%A1%8C%E6%88%91%E5%85%A8%E8%A6%81"><span class="header-section-number">7.4.4</span> 取多個列就好，行我全要</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E8%A1%8C%E5%B0%B1%E5%A5%BD%E5%88%97%E6%88%91%E5%85%A8%E8%A6%81"><span class="header-section-number">7.4.5</span> 取多個行就好，列我全要</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#indexing"><span class="header-section-number">7.5</span> Indexing</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%B0%87city%E6%AC%84%E4%BD%8D%E8%A8%AD%E7%82%BAindex"><span class="header-section-number">7.5.1</span> 將city欄位設為index</a></li>
<li><a class="nav-link" href="#filter%E5%87%BAcitymoscow%E6%88%96saint-petersburg"><span class="header-section-number">7.5.2</span> filter出city=“Moscow”或”Saint Petersburg”</a></li>
<li><a class="nav-link" href="#%E7%94%A8.sort_index%E5%81%9A%E6%8E%92%E5%BA%8F"><span class="header-section-number">7.5.3</span> 用.sort_index()做排序</a></li>
<li><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97outer%E5%88%97"><span class="header-section-number">7.5.4</span> 排序後，取連續的列(outer列)</a></li>
<li><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97inner%E5%88%97"><span class="header-section-number">7.5.5</span> 排序後，取連續的列(inner列)</a></li>
<li><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E6%99%82%E9%96%93%E6%80%A7%E8%B3%87%E6%96%99"><span class="header-section-number">7.5.6</span> 排序後，取時間性資料</a></li>
<li><a class="nav-link" href="#subsetting-by-rowcolumn-number"><span class="header-section-number">7.5.7</span> subsetting by row/column number</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#pivot-table-1"><span class="header-section-number">7.6</span> pivot table</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#intro"><span class="header-section-number">7.6.1</span> Intro</a></li>
<li><a class="nav-link" href="#subsetting-pivot-table"><span class="header-section-number">7.6.2</span> subsetting pivot table</a></li>
<li><a class="nav-link" href="#calculating-on-a-pivot-table"><span class="header-section-number">7.6.3</span> Calculating on a pivot table</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#visualizing-dataframe"><span class="header-section-number">7.7</span> Visualizing DataFrame</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#bar"><span class="header-section-number">7.7.1</span> Bar</a></li>
<li><a class="nav-link" href="#line-plot"><span class="header-section-number">7.7.2</span> Line plot</a></li>
<li><a class="nav-link" href="#scatter-plot"><span class="header-section-number">7.7.3</span> scatter plot</a></li>
<li><a class="nav-link" href="#histogram"><span class="header-section-number">7.7.4</span> Histogram</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#missing-values"><span class="header-section-number">7.8</span> Missing values</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#finding-missing-values"><span class="header-section-number">7.8.1</span> Finding missing values</a></li>
<li><a class="nav-link" href="#remove-na"><span class="header-section-number">7.8.2</span> Remove NA</a></li>
<li><a class="nav-link" href="#replacing-na"><span class="header-section-number">7.8.3</span> Replacing NA</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/LeeHank/ds_tutorial/blob/master/pandas_basics.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/LeeHank/ds_tutorial/edit/master/pandas_basics.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Science Tutorial</strong>" was written by Hank Lee. It was last built on 2022-01-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 Pandas basics | Data Science Tutorial</title>
<meta name="author" content="Hank Lee">
<meta name="description" content="import pandas as pd  7.1 Inspecting DataFrame 拿到資料的第一步，就是去看看這份資料裡有甚麼東西 在R裡面，最常用的就是 head()來先看前幾筆，dim()來看一下列數和行數，str()來看各欄位的type，用summary來看各欄位的描述統計量...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 7 Pandas basics | Data Science Tutorial">
<meta property="og:type" content="book">
<meta property="og:description" content="import pandas as pd  7.1 Inspecting DataFrame 拿到資料的第一步，就是去看看這份資料裡有甚麼東西 在R裡面，最常用的就是 head()來先看前幾筆，dim()來看一下列數和行數，str()來看各欄位的type，用summary來看各欄位的描述統計量...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 Pandas basics | Data Science Tutorial">
<meta name="twitter:description" content="import pandas as pd  7.1 Inspecting DataFrame 拿到資料的第一步，就是去看看這份資料裡有甚麼東西 在R裡面，最常用的就是 head()來先看前幾筆，dim()來看一下列數和行數，str()來看各欄位的type，用summary來看各欄位的描述統計量...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Science Tutorial</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li class="book-part">Import Data</li>
<li><a class="" href="write-and-read-files.html"><span class="header-section-number">1</span> Write and read files</a></li>
<li><a class="" href="flat-files.html"><span class="header-section-number">2</span> Flat Files</a></li>
<li><a class="" href="database.html"><span class="header-section-number">3</span> Database</a></li>
<li><a class="" href="json-apis.html"><span class="header-section-number">4</span> JSON &amp; APIs</a></li>
<li class="book-part">Numpy</li>
<li><a class="" href="numpy-basics.html"><span class="header-section-number">5</span> numpy basics</a></li>
<li class="book-part">Pandas</li>
<li><a class="" href="pandas_cheatsheet.html"><span class="header-section-number">6</span> pandas_cheatsheet</a></li>
<li><a class="active" href="pandas-basics.html"><span class="header-section-number">7</span> Pandas basics</a></li>
<li><a class="" href="join-data.html"><span class="header-section-number">8</span> Join data</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/LeeHank/ds_tutorial">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="pandas-basics" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Pandas basics<a class="anchor" aria-label="anchor" href="#pandas-basics"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb186"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb186-1"><a href="pandas-basics.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre></div>
<div id="inspecting-dataframe" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Inspecting DataFrame<a class="anchor" aria-label="anchor" href="#inspecting-dataframe"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>拿到資料的第一步，就是去看看這份資料裡有甚麼東西<br></p></li>
<li><p>在R裡面，最常用的就是 <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>來先看前幾筆，<code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code>來看一下列數和行數，<code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>來看各欄位的type，用<code>summary</code>來看各欄位的描述統計量</p></li>
<li>
<p>在Python也是一樣，只是R都是用function，但python是物件導向，所以是用methods</p>
<table class="table table-sm">
<thead><tr class="header">
<th>R</th>
<th>Python</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>head(df, n)</td>
<td>df.head(n)</td>
</tr>
<tr class="even">
<td>dim(df)</td>
<td>df.shape</td>
</tr>
<tr class="odd">
<td>str(df)</td>
<td>df.info()</td>
</tr>
<tr class="even">
<td>summary(df)</td>
<td>df.describe()</td>
</tr>
</tbody>
</table>
</li>
<li><p>接下來我們就來讀一筆資料，然後看看這些結果</p></li>
</ul>
<div class="sourceCode" id="cb187"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb187-1"><a href="pandas-basics.html#cb187-1" aria-hidden="true" tabindex="-1"></a>homelessness <span class="op">=</span> pd.read_csv(<span class="st">"data/homelessness.csv"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb188"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb188-1"><a href="pandas-basics.html#cb188-1" aria-hidden="true" tabindex="-1"></a>homelessness.head()</span>
<span id="cb188-2"><a href="pandas-basics.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb188-3"><a href="pandas-basics.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0  East South Central  ...          864.0    4887681</span></span>
<span id="cb188-4"><a href="pandas-basics.html#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1             Pacific  ...          582.0     735139</span></span>
<span id="cb188-5"><a href="pandas-basics.html#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2            Mountain  ...         2606.0    7158024</span></span>
<span id="cb188-6"><a href="pandas-basics.html#cb188-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3  West South Central  ...          432.0    3009733</span></span>
<span id="cb188-7"><a href="pandas-basics.html#cb188-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4             Pacific  ...        20964.0   39461588</span></span>
<span id="cb188-8"><a href="pandas-basics.html#cb188-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb188-9"><a href="pandas-basics.html#cb188-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 6 columns]</span></span></code></pre></div>
<ul>
<li>這筆資料是在描述美國各州無家可歸的人數有多少<br>
</li>
<li>第二個欄位和第一個欄位，就在講是哪個州的哪個地區<br>
</li>
<li>第三個欄位的individuals在講the number of homeless individuals not part of a family with children<br>
</li>
<li>第四個欄位的family_members在講the number of homeless individuals part of a family with children<br>
</li>
<li>第五個欄位是這個州的人口有多少</li>
</ul>
<div class="sourceCode" id="cb189"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb189-1"><a href="pandas-basics.html#cb189-1" aria-hidden="true" tabindex="-1"></a>homelessness.shape</span>
<span id="cb189-2"><a href="pandas-basics.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (51, 6)</span></span></code></pre></div>
<ul>
<li>這筆資料有51的rows，5個column</li>
</ul>
<div class="sourceCode" id="cb190"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb190-1"><a href="pandas-basics.html#cb190-1" aria-hidden="true" tabindex="-1"></a>homelessness.info()</span>
<span id="cb190-2"><a href="pandas-basics.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb190-3"><a href="pandas-basics.html#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 51 entries, 0 to 50</span></span>
<span id="cb190-4"><a href="pandas-basics.html#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 6 columns):</span></span>
<span id="cb190-5"><a href="pandas-basics.html#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column          Non-Null Count  Dtype  </span></span>
<span id="cb190-6"><a href="pandas-basics.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------          --------------  -----  </span></span>
<span id="cb190-7"><a href="pandas-basics.html#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   Unnamed: 0      51 non-null     int64  </span></span>
<span id="cb190-8"><a href="pandas-basics.html#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   region          51 non-null     object </span></span>
<span id="cb190-9"><a href="pandas-basics.html#cb190-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   state           51 non-null     object </span></span>
<span id="cb190-10"><a href="pandas-basics.html#cb190-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   individuals     51 non-null     float64</span></span>
<span id="cb190-11"><a href="pandas-basics.html#cb190-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4   family_members  51 non-null     float64</span></span>
<span id="cb190-12"><a href="pandas-basics.html#cb190-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5   state_pop       51 non-null     int64  </span></span>
<span id="cb190-13"><a href="pandas-basics.html#cb190-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: float64(2), int64(2), object(2)</span></span>
<span id="cb190-14"><a href="pandas-basics.html#cb190-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 2.5+ KB</span></span></code></pre></div>
<div class="sourceCode" id="cb191"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb191-1"><a href="pandas-basics.html#cb191-1" aria-hidden="true" tabindex="-1"></a>homelessness.describe()</span>
<span id="cb191-2"><a href="pandas-basics.html#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        Unnamed: 0    individuals  family_members     state_pop</span></span>
<span id="cb191-3"><a href="pandas-basics.html#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; count   51.000000      51.000000       51.000000  5.100000e+01</span></span>
<span id="cb191-4"><a href="pandas-basics.html#cb191-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean    25.000000    7225.784314     3504.882353  6.405637e+06</span></span>
<span id="cb191-5"><a href="pandas-basics.html#cb191-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; std     14.866069   15991.025083     7805.411811  7.327258e+06</span></span>
<span id="cb191-6"><a href="pandas-basics.html#cb191-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min      0.000000     434.000000       75.000000  5.776010e+05</span></span>
<span id="cb191-7"><a href="pandas-basics.html#cb191-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 25%     12.500000    1446.500000      592.000000  1.777414e+06</span></span>
<span id="cb191-8"><a href="pandas-basics.html#cb191-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 50%     25.000000    3082.000000     1482.000000  4.461153e+06</span></span>
<span id="cb191-9"><a href="pandas-basics.html#cb191-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 75%     37.500000    6781.500000     3196.000000  7.340946e+06</span></span>
<span id="cb191-10"><a href="pandas-basics.html#cb191-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max     50.000000  109008.000000    52070.000000  3.946159e+07</span></span></code></pre></div>
</div>
<div id="parts-of-a-dataframe" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Parts of a DataFrame<a class="anchor" aria-label="anchor" href="#parts-of-a-dataframe"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>對data有初步認識後，我們常常就會想來擷取這份data的部分資訊<br></p></li>
<li><p>除了擷取某些column，某些row外，在R我們也常常用<code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code>和<code><a href="https://rdrr.io/r/base/colnames.html">rownames()</a></code>，來擷取dataframe的column names &amp; row names<br></p></li>
<li>
<p>在Python，一樣，又是因為物件導向，所以他是用attribute(因為是這份df的特性，而不是methods，所以使用時，也不用加括號)來得到這些資訊</p>
<table class="table table-sm">
<thead><tr class="header">
<th>R</th>
<th>Python</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>colnames(data)</td>
<td>data.columns</td>
</tr>
<tr class="even">
<td>rownames(data)</td>
<td>data.index</td>
</tr>
<tr class="odd">
<td></td>
<td>data.values</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="sourceCode" id="cb192"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb192-1"><a href="pandas-basics.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(homelessness.columns)</span>
<span id="cb192-2"><a href="pandas-basics.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Index(['Unnamed: 0', 'region', 'state', 'individuals', 'family_members',</span></span>
<span id="cb192-3"><a href="pandas-basics.html#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        'state_pop'],</span></span>
<span id="cb192-4"><a href="pandas-basics.html#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       dtype='object')</span></span></code></pre></div>
<div class="sourceCode" id="cb193"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb193-1"><a href="pandas-basics.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(homelessness.index)</span>
<span id="cb193-2"><a href="pandas-basics.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex(start=0, stop=51, step=1)</span></span></code></pre></div>
<ul>
<li>最後，python比R多出來的東西，是value，他可以只取出DataFrame裡面的值。那此時的data type，就會是二維list:</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb194-1"><a href="pandas-basics.html#cb194-1" aria-hidden="true" tabindex="-1"></a>homelessness.values</span>
<span id="cb194-2"><a href="pandas-basics.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; array([[0, 'East South Central', 'Alabama', 2570.0, 864.0, 4887681],</span></span>
<span id="cb194-3"><a href="pandas-basics.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [1, 'Pacific', 'Alaska', 1434.0, 582.0, 735139],</span></span>
<span id="cb194-4"><a href="pandas-basics.html#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [2, 'Mountain', 'Arizona', 7259.0, 2606.0, 7158024],</span></span>
<span id="cb194-5"><a href="pandas-basics.html#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [3, 'West South Central', 'Arkansas', 2280.0, 432.0, 3009733],</span></span>
<span id="cb194-6"><a href="pandas-basics.html#cb194-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [4, 'Pacific', 'California', 109008.0, 20964.0, 39461588],</span></span>
<span id="cb194-7"><a href="pandas-basics.html#cb194-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [5, 'Mountain', 'Colorado', 7607.0, 3250.0, 5691287],</span></span>
<span id="cb194-8"><a href="pandas-basics.html#cb194-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [6, 'New England', 'Connecticut', 2280.0, 1696.0, 3571520],</span></span>
<span id="cb194-9"><a href="pandas-basics.html#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [7, 'South Atlantic', 'Delaware', 708.0, 374.0, 965479],</span></span>
<span id="cb194-10"><a href="pandas-basics.html#cb194-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [8, 'South Atlantic', 'District of Columbia', 3770.0, 3134.0,</span></span>
<span id="cb194-11"><a href="pandas-basics.html#cb194-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         701547],</span></span>
<span id="cb194-12"><a href="pandas-basics.html#cb194-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [9, 'South Atlantic', 'Florida', 21443.0, 9587.0, 21244317],</span></span>
<span id="cb194-13"><a href="pandas-basics.html#cb194-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [10, 'South Atlantic', 'Georgia', 6943.0, 2556.0, 10511131],</span></span>
<span id="cb194-14"><a href="pandas-basics.html#cb194-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [11, 'Pacific', 'Hawaii', 4131.0, 2399.0, 1420593],</span></span>
<span id="cb194-15"><a href="pandas-basics.html#cb194-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [12, 'Mountain', 'Idaho', 1297.0, 715.0, 1750536],</span></span>
<span id="cb194-16"><a href="pandas-basics.html#cb194-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [13, 'East North Central', 'Illinois', 6752.0, 3891.0, 12723071],</span></span>
<span id="cb194-17"><a href="pandas-basics.html#cb194-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [14, 'East North Central', 'Indiana', 3776.0, 1482.0, 6695497],</span></span>
<span id="cb194-18"><a href="pandas-basics.html#cb194-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [15, 'West North Central', 'Iowa', 1711.0, 1038.0, 3148618],</span></span>
<span id="cb194-19"><a href="pandas-basics.html#cb194-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [16, 'West North Central', 'Kansas', 1443.0, 773.0, 2911359],</span></span>
<span id="cb194-20"><a href="pandas-basics.html#cb194-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [17, 'East South Central', 'Kentucky', 2735.0, 953.0, 4461153],</span></span>
<span id="cb194-21"><a href="pandas-basics.html#cb194-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [18, 'West South Central', 'Louisiana', 2540.0, 519.0, 4659690],</span></span>
<span id="cb194-22"><a href="pandas-basics.html#cb194-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [19, 'New England', 'Maine', 1450.0, 1066.0, 1339057],</span></span>
<span id="cb194-23"><a href="pandas-basics.html#cb194-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [20, 'South Atlantic', 'Maryland', 4914.0, 2230.0, 6035802],</span></span>
<span id="cb194-24"><a href="pandas-basics.html#cb194-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [21, 'New England', 'Massachusetts', 6811.0, 13257.0, 6882635],</span></span>
<span id="cb194-25"><a href="pandas-basics.html#cb194-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [22, 'East North Central', 'Michigan', 5209.0, 3142.0, 9984072],</span></span>
<span id="cb194-26"><a href="pandas-basics.html#cb194-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [23, 'West North Central', 'Minnesota', 3993.0, 3250.0, 5606249],</span></span>
<span id="cb194-27"><a href="pandas-basics.html#cb194-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [24, 'East South Central', 'Mississippi', 1024.0, 328.0, 2981020],</span></span>
<span id="cb194-28"><a href="pandas-basics.html#cb194-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [25, 'West North Central', 'Missouri', 3776.0, 2107.0, 6121623],</span></span>
<span id="cb194-29"><a href="pandas-basics.html#cb194-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [26, 'Mountain', 'Montana', 983.0, 422.0, 1060665],</span></span>
<span id="cb194-30"><a href="pandas-basics.html#cb194-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [27, 'West North Central', 'Nebraska', 1745.0, 676.0, 1925614],</span></span>
<span id="cb194-31"><a href="pandas-basics.html#cb194-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [28, 'Mountain', 'Nevada', 7058.0, 486.0, 3027341],</span></span>
<span id="cb194-32"><a href="pandas-basics.html#cb194-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [29, 'New England', 'New Hampshire', 835.0, 615.0, 1353465],</span></span>
<span id="cb194-33"><a href="pandas-basics.html#cb194-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [30, 'Mid-Atlantic', 'New Jersey', 6048.0, 3350.0, 8886025],</span></span>
<span id="cb194-34"><a href="pandas-basics.html#cb194-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [31, 'Mountain', 'New Mexico', 1949.0, 602.0, 2092741],</span></span>
<span id="cb194-35"><a href="pandas-basics.html#cb194-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [32, 'Mid-Atlantic', 'New York', 39827.0, 52070.0, 19530351],</span></span>
<span id="cb194-36"><a href="pandas-basics.html#cb194-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [33, 'South Atlantic', 'North Carolina', 6451.0, 2817.0, 10381615],</span></span>
<span id="cb194-37"><a href="pandas-basics.html#cb194-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [34, 'West North Central', 'North Dakota', 467.0, 75.0, 758080],</span></span>
<span id="cb194-38"><a href="pandas-basics.html#cb194-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [35, 'East North Central', 'Ohio', 6929.0, 3320.0, 11676341],</span></span>
<span id="cb194-39"><a href="pandas-basics.html#cb194-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [36, 'West South Central', 'Oklahoma', 2823.0, 1048.0, 3940235],</span></span>
<span id="cb194-40"><a href="pandas-basics.html#cb194-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [37, 'Pacific', 'Oregon', 11139.0, 3337.0, 4181886],</span></span>
<span id="cb194-41"><a href="pandas-basics.html#cb194-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [38, 'Mid-Atlantic', 'Pennsylvania', 8163.0, 5349.0, 12800922],</span></span>
<span id="cb194-42"><a href="pandas-basics.html#cb194-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [39, 'New England', 'Rhode Island', 747.0, 354.0, 1058287],</span></span>
<span id="cb194-43"><a href="pandas-basics.html#cb194-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [40, 'South Atlantic', 'South Carolina', 3082.0, 851.0, 5084156],</span></span>
<span id="cb194-44"><a href="pandas-basics.html#cb194-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [41, 'West North Central', 'South Dakota', 836.0, 323.0, 878698],</span></span>
<span id="cb194-45"><a href="pandas-basics.html#cb194-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [42, 'East South Central', 'Tennessee', 6139.0, 1744.0, 6771631],</span></span>
<span id="cb194-46"><a href="pandas-basics.html#cb194-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [43, 'West South Central', 'Texas', 19199.0, 6111.0, 28628666],</span></span>
<span id="cb194-47"><a href="pandas-basics.html#cb194-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [44, 'Mountain', 'Utah', 1904.0, 972.0, 3153550],</span></span>
<span id="cb194-48"><a href="pandas-basics.html#cb194-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [45, 'New England', 'Vermont', 780.0, 511.0, 624358],</span></span>
<span id="cb194-49"><a href="pandas-basics.html#cb194-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [46, 'South Atlantic', 'Virginia', 3928.0, 2047.0, 8501286],</span></span>
<span id="cb194-50"><a href="pandas-basics.html#cb194-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [47, 'Pacific', 'Washington', 16424.0, 5880.0, 7523869],</span></span>
<span id="cb194-51"><a href="pandas-basics.html#cb194-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [48, 'South Atlantic', 'West Virginia', 1021.0, 222.0, 1804291],</span></span>
<span id="cb194-52"><a href="pandas-basics.html#cb194-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [49, 'East North Central', 'Wisconsin', 2740.0, 2167.0, 5807406],</span></span>
<span id="cb194-53"><a href="pandas-basics.html#cb194-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        [50, 'Mountain', 'Wyoming', 434.0, 205.0, 577601]], dtype=object)</span></span></code></pre></div>
<div class="sourceCode" id="cb195"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb195-1"><a href="pandas-basics.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(homelessness.values)</span>
<span id="cb195-2"><a href="pandas-basics.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'numpy.ndarray'&gt;</span></span></code></pre></div>
</div>
<div id="select-filter-arrange-mutate" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> select, filter, arrange, &amp; mutate<a class="anchor" aria-label="anchor" href="#select-filter-arrange-mutate"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>在R裡面，我最常用到的四個函數，在pandas裡面都有對應的method可以用</li>
</ul>
<div id="select-1" class="section level3" number="7.3.1">
<h3>
<span class="header-section-number">7.3.1</span> select<a class="anchor" aria-label="anchor" href="#select-1"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>dplyr</th>
<th>Pandas</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>select(df, col1)</td>
<td>df[“col1”]是series, df[[“col1”]]是df</td>
</tr>
<tr class="even">
<td>select(df, col1, col2)</td>
<td>df[[“col1”, “col2”]</td>
</tr>
<tr class="odd">
<td>select(df, col1:col3)</td>
<td>df.loc[:, “col1”:“col3”]</td>
</tr>
</tbody>
</table></div>
<ul>
<li>來練習吧：我想先select “individual”這個欄位</li>
</ul>
<div class="sourceCode" id="cb196"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb196-1"><a href="pandas-basics.html#cb196-1" aria-hidden="true" tabindex="-1"></a>ind_series <span class="op">=</span> homelessness[<span class="st">"individuals"</span>]</span>
<span id="cb196-2"><a href="pandas-basics.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(ind_series))</span>
<span id="cb196-3"><a href="pandas-basics.html#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb197"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb197-1"><a href="pandas-basics.html#cb197-1" aria-hidden="true" tabindex="-1"></a>ind_series.head()</span>
<span id="cb197-2"><a href="pandas-basics.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0      2570.0</span></span>
<span id="cb197-3"><a href="pandas-basics.html#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      1434.0</span></span>
<span id="cb197-4"><a href="pandas-basics.html#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      7259.0</span></span>
<span id="cb197-5"><a href="pandas-basics.html#cb197-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      2280.0</span></span>
<span id="cb197-6"><a href="pandas-basics.html#cb197-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    109008.0</span></span>
<span id="cb197-7"><a href="pandas-basics.html#cb197-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: individuals, dtype: float64</span></span></code></pre></div>
<div class="sourceCode" id="cb198"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb198-1"><a href="pandas-basics.html#cb198-1" aria-hidden="true" tabindex="-1"></a>ind_df <span class="op">=</span> homelessness[[<span class="st">"individuals"</span>]]</span>
<span id="cb198-2"><a href="pandas-basics.html#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(ind_df))</span>
<span id="cb198-3"><a href="pandas-basics.html#cb198-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb199"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb199-1"><a href="pandas-basics.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ind_df.head())</span>
<span id="cb199-2"><a href="pandas-basics.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    individuals</span></span>
<span id="cb199-3"><a href="pandas-basics.html#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0       2570.0</span></span>
<span id="cb199-4"><a href="pandas-basics.html#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1434.0</span></span>
<span id="cb199-5"><a href="pandas-basics.html#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7259.0</span></span>
<span id="cb199-6"><a href="pandas-basics.html#cb199-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       2280.0</span></span>
<span id="cb199-7"><a href="pandas-basics.html#cb199-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     109008.0</span></span></code></pre></div>
<ul>
<li>再來，我想select “state”和”family_members”這兩個column</li>
</ul>
<div class="sourceCode" id="cb200"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb200-1"><a href="pandas-basics.html#cb200-1" aria-hidden="true" tabindex="-1"></a>state_fam <span class="op">=</span> homelessness[[<span class="st">"state"</span>, <span class="st">"family_members"</span>]]</span>
<span id="cb200-2"><a href="pandas-basics.html#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(state_fam.head())</span>
<span id="cb200-3"><a href="pandas-basics.html#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         state  family_members</span></span>
<span id="cb200-4"><a href="pandas-basics.html#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0     Alabama           864.0</span></span>
<span id="cb200-5"><a href="pandas-basics.html#cb200-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      Alaska           582.0</span></span>
<span id="cb200-6"><a href="pandas-basics.html#cb200-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     Arizona          2606.0</span></span>
<span id="cb200-7"><a href="pandas-basics.html#cb200-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    Arkansas           432.0</span></span>
<span id="cb200-8"><a href="pandas-basics.html#cb200-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  California         20964.0</span></span></code></pre></div>
<ul>
<li>再來，我想select從individuals到family_members</li>
</ul>
<div class="sourceCode" id="cb201"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb201-1"><a href="pandas-basics.html#cb201-1" aria-hidden="true" tabindex="-1"></a>ind_to_fam <span class="op">=</span> homelessness.loc[:, <span class="st">"individuals"</span>:<span class="st">"family_members"</span>]</span>
<span id="cb201-2"><a href="pandas-basics.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ind_to_fam.head())</span>
<span id="cb201-3"><a href="pandas-basics.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    individuals  family_members</span></span>
<span id="cb201-4"><a href="pandas-basics.html#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0       2570.0           864.0</span></span>
<span id="cb201-5"><a href="pandas-basics.html#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1434.0           582.0</span></span>
<span id="cb201-6"><a href="pandas-basics.html#cb201-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7259.0          2606.0</span></span>
<span id="cb201-7"><a href="pandas-basics.html#cb201-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       2280.0           432.0</span></span>
<span id="cb201-8"><a href="pandas-basics.html#cb201-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     109008.0         20964.0</span></span></code></pre></div>
</div>
<div id="filter-1" class="section level3" number="7.3.2">
<h3>
<span class="header-section-number">7.3.2</span> filter<a class="anchor" aria-label="anchor" href="#filter-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>篩選出individuals &gt; 10000的資料</li>
</ul>
<div class="sourceCode" id="cb202"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb202-1"><a href="pandas-basics.html#cb202-1" aria-hidden="true" tabindex="-1"></a>homelessness.query(<span class="st">"individuals &gt; 10000"</span>)</span>
<span id="cb202-2"><a href="pandas-basics.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb202-3"><a href="pandas-basics.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            4             Pacific  ...        20964.0   39461588</span></span>
<span id="cb202-4"><a href="pandas-basics.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            9      South Atlantic  ...         9587.0   21244317</span></span>
<span id="cb202-5"><a href="pandas-basics.html#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32          32        Mid-Atlantic  ...        52070.0   19530351</span></span>
<span id="cb202-6"><a href="pandas-basics.html#cb202-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 37          37             Pacific  ...         3337.0    4181886</span></span>
<span id="cb202-7"><a href="pandas-basics.html#cb202-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43          43  West South Central  ...         6111.0   28628666</span></span>
<span id="cb202-8"><a href="pandas-basics.html#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47          47             Pacific  ...         5880.0    7523869</span></span>
<span id="cb202-9"><a href="pandas-basics.html#cb202-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb202-10"><a href="pandas-basics.html#cb202-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6 rows x 6 columns]</span></span></code></pre></div>
<ul>
<li>篩選出region = “Mountain”的資料</li>
</ul>
<div class="sourceCode" id="cb203"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb203-1"><a href="pandas-basics.html#cb203-1" aria-hidden="true" tabindex="-1"></a>homelessness.query(<span class="st">"region == 'Mountain'"</span>).head()</span>
<span id="cb203-2"><a href="pandas-basics.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0    region     state  individuals  family_members  state_pop</span></span>
<span id="cb203-3"><a href="pandas-basics.html#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            2  Mountain   Arizona       7259.0          2606.0    7158024</span></span>
<span id="cb203-4"><a href="pandas-basics.html#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            5  Mountain  Colorado       7607.0          3250.0    5691287</span></span>
<span id="cb203-5"><a href="pandas-basics.html#cb203-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          12  Mountain     Idaho       1297.0           715.0    1750536</span></span>
<span id="cb203-6"><a href="pandas-basics.html#cb203-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 26          26  Mountain   Montana        983.0           422.0    1060665</span></span>
<span id="cb203-7"><a href="pandas-basics.html#cb203-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 28          28  Mountain    Nevada       7058.0           486.0    3027341</span></span></code></pre></div>
<ul>
<li>篩選出family members &lt; 1000 &amp; region = “Pacific”</li>
</ul>
<div class="sourceCode" id="cb204"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb204-1"><a href="pandas-basics.html#cb204-1" aria-hidden="true" tabindex="-1"></a>homelessness.query(<span class="st">"family_members &lt; 1000 &amp; region == 'Pacific'"</span>)</span>
<span id="cb204-2"><a href="pandas-basics.html#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0   region   state  individuals  family_members  state_pop</span></span>
<span id="cb204-3"><a href="pandas-basics.html#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1  Pacific  Alaska       1434.0           582.0     735139</span></span></code></pre></div>
<ul>
<li>篩選出region是”South Atlantic”或是”Mid_atlantic”</li>
</ul>
<div class="sourceCode" id="cb205"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb205-1"><a href="pandas-basics.html#cb205-1" aria-hidden="true" tabindex="-1"></a>homelessness[homelessness[<span class="st">"region"</span>].isin([<span class="st">"South Atlantic"</span>, <span class="st">"Mid_atlantic"</span>])]</span>
<span id="cb205-2"><a href="pandas-basics.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0          region  ... family_members  state_pop</span></span>
<span id="cb205-3"><a href="pandas-basics.html#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7            7  South Atlantic  ...          374.0     965479</span></span>
<span id="cb205-4"><a href="pandas-basics.html#cb205-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8            8  South Atlantic  ...         3134.0     701547</span></span>
<span id="cb205-5"><a href="pandas-basics.html#cb205-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            9  South Atlantic  ...         9587.0   21244317</span></span>
<span id="cb205-6"><a href="pandas-basics.html#cb205-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          10  South Atlantic  ...         2556.0   10511131</span></span>
<span id="cb205-7"><a href="pandas-basics.html#cb205-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          20  South Atlantic  ...         2230.0    6035802</span></span>
<span id="cb205-8"><a href="pandas-basics.html#cb205-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 33          33  South Atlantic  ...         2817.0   10381615</span></span>
<span id="cb205-9"><a href="pandas-basics.html#cb205-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 40          40  South Atlantic  ...          851.0    5084156</span></span>
<span id="cb205-10"><a href="pandas-basics.html#cb205-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 46          46  South Atlantic  ...         2047.0    8501286</span></span>
<span id="cb205-11"><a href="pandas-basics.html#cb205-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 48          48  South Atlantic  ...          222.0    1804291</span></span>
<span id="cb205-12"><a href="pandas-basics.html#cb205-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb205-13"><a href="pandas-basics.html#cb205-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [9 rows x 6 columns]</span></span></code></pre></div>
</div>
<div id="arrange-1" class="section level3" number="7.3.3">
<h3>
<span class="header-section-number">7.3.3</span> arrange<a class="anchor" aria-label="anchor" href="#arrange-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想看individuals的top5</li>
</ul>
<div class="sourceCode" id="cb206"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb206-1"><a href="pandas-basics.html#cb206-1" aria-hidden="true" tabindex="-1"></a>homelessness.sort_values(<span class="st">"individuals"</span>, ascending <span class="op">=</span> <span class="va">False</span>).head()</span>
<span id="cb206-2"><a href="pandas-basics.html#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb206-3"><a href="pandas-basics.html#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            4             Pacific  ...        20964.0   39461588</span></span>
<span id="cb206-4"><a href="pandas-basics.html#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32          32        Mid-Atlantic  ...        52070.0   19530351</span></span>
<span id="cb206-5"><a href="pandas-basics.html#cb206-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            9      South Atlantic  ...         9587.0   21244317</span></span>
<span id="cb206-6"><a href="pandas-basics.html#cb206-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43          43  West South Central  ...         6111.0   28628666</span></span>
<span id="cb206-7"><a href="pandas-basics.html#cb206-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47          47             Pacific  ...         5880.0    7523869</span></span>
<span id="cb206-8"><a href="pandas-basics.html#cb206-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb206-9"><a href="pandas-basics.html#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 6 columns]</span></span></code></pre></div>
<ul>
<li>我想先依照region由小到大排，然後，region平手的，再依照family_members由大到小排，最後print出前五個</li>
</ul>
<div class="sourceCode" id="cb207"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb207-1"><a href="pandas-basics.html#cb207-1" aria-hidden="true" tabindex="-1"></a>homelessness.sort_values([<span class="st">"region"</span>, <span class="st">"family_members"</span>], ascending <span class="op">=</span> [<span class="va">True</span>, <span class="va">False</span>]).head()</span>
<span id="cb207-2"><a href="pandas-basics.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Unnamed: 0              region  ... family_members  state_pop</span></span>
<span id="cb207-3"><a href="pandas-basics.html#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          13  East North Central  ...         3891.0   12723071</span></span>
<span id="cb207-4"><a href="pandas-basics.html#cb207-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35          35  East North Central  ...         3320.0   11676341</span></span>
<span id="cb207-5"><a href="pandas-basics.html#cb207-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 22          22  East North Central  ...         3142.0    9984072</span></span>
<span id="cb207-6"><a href="pandas-basics.html#cb207-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 49          49  East North Central  ...         2167.0    5807406</span></span>
<span id="cb207-7"><a href="pandas-basics.html#cb207-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          14  East North Central  ...         1482.0    6695497</span></span>
<span id="cb207-8"><a href="pandas-basics.html#cb207-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb207-9"><a href="pandas-basics.html#cb207-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 6 columns]</span></span></code></pre></div>
</div>
<div id="mutate-and-rename-1" class="section level3" number="7.3.4">
<h3>
<span class="header-section-number">7.3.4</span> mutate and rename<a class="anchor" aria-label="anchor" href="#mutate-and-rename-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想新增一個total的欄位，定義為individuals + family_members</li>
</ul>
<div class="sourceCode" id="cb208"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb208-1"><a href="pandas-basics.html#cb208-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> homelessness.assign(total <span class="op">=</span> homelessness[<span class="st">"individuals"</span>]<span class="op">+</span>homelessness[<span class="st">"family_members"</span>])</span>
<span id="cb208-2"><a href="pandas-basics.html#cb208-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-3"><a href="pandas-basics.html#cb208-3" aria-hidden="true" tabindex="-1"></a>new[[<span class="st">"individuals"</span>, <span class="st">"family_members"</span>, <span class="st">"total"</span>]].head()</span>
<span id="cb208-4"><a href="pandas-basics.html#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    individuals  family_members     total</span></span>
<span id="cb208-5"><a href="pandas-basics.html#cb208-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0       2570.0           864.0    3434.0</span></span>
<span id="cb208-6"><a href="pandas-basics.html#cb208-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1434.0           582.0    2016.0</span></span>
<span id="cb208-7"><a href="pandas-basics.html#cb208-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7259.0          2606.0    9865.0</span></span>
<span id="cb208-8"><a href="pandas-basics.html#cb208-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       2280.0           432.0    2712.0</span></span>
<span id="cb208-9"><a href="pandas-basics.html#cb208-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     109008.0         20964.0  129972.0</span></span></code></pre></div>
<ul>
<li>我想把new這個table的”region”改名為region2就好</li>
</ul>
<div class="sourceCode" id="cb209"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb209-1"><a href="pandas-basics.html#cb209-1" aria-hidden="true" tabindex="-1"></a>new.rename(columns <span class="op">=</span> {<span class="st">"region"</span>: <span class="st">"region2"</span>}).head()</span>
<span id="cb209-2"><a href="pandas-basics.html#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0             region2  ... state_pop     total</span></span>
<span id="cb209-3"><a href="pandas-basics.html#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0  East South Central  ...   4887681    3434.0</span></span>
<span id="cb209-4"><a href="pandas-basics.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1             Pacific  ...    735139    2016.0</span></span>
<span id="cb209-5"><a href="pandas-basics.html#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2            Mountain  ...   7158024    9865.0</span></span>
<span id="cb209-6"><a href="pandas-basics.html#cb209-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3  West South Central  ...   3009733    2712.0</span></span>
<span id="cb209-7"><a href="pandas-basics.html#cb209-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4             Pacific  ...  39461588  129972.0</span></span>
<span id="cb209-8"><a href="pandas-basics.html#cb209-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb209-9"><a href="pandas-basics.html#cb209-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 7 columns]</span></span></code></pre></div>
</div>
<div id="summarise" class="section level3" number="7.3.5">
<h3>
<span class="header-section-number">7.3.5</span> summarise<a class="anchor" aria-label="anchor" href="#summarise"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>接下來，先讀一個新的資料集</li>
</ul>
<div class="sourceCode" id="cb210"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb210-1"><a href="pandas-basics.html#cb210-1" aria-hidden="true" tabindex="-1"></a>sales <span class="op">=</span> pd.read_csv(<span class="st">"data/sales_subset.csv"</span>)</span>
<span id="cb210-2"><a href="pandas-basics.html#cb210-2" aria-hidden="true" tabindex="-1"></a>sales.shape</span>
<span id="cb210-3"><a href="pandas-basics.html#cb210-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (10774, 10)</span></span></code></pre></div>
<ul>
<li>看一下內容：</li>
</ul>
<div class="sourceCode" id="cb211"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb211-1"><a href="pandas-basics.html#cb211-1" aria-hidden="true" tabindex="-1"></a>sales.head()</span>
<span id="cb211-2"><a href="pandas-basics.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0  store type  ...  temperature_c fuel_price_usd_per_l  unemployment</span></span>
<span id="cb211-3"><a href="pandas-basics.html#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0      1    A  ...       5.727778             0.679451         8.106</span></span>
<span id="cb211-4"><a href="pandas-basics.html#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1      1    A  ...       8.055556             0.693452         8.106</span></span>
<span id="cb211-5"><a href="pandas-basics.html#cb211-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2      1    A  ...      16.816667             0.718284         7.808</span></span>
<span id="cb211-6"><a href="pandas-basics.html#cb211-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3      1    A  ...      22.527778             0.748928         7.808</span></span>
<span id="cb211-7"><a href="pandas-basics.html#cb211-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4      1    A  ...      27.050000             0.714586         7.808</span></span>
<span id="cb211-8"><a href="pandas-basics.html#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb211-9"><a href="pandas-basics.html#cb211-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5 rows x 10 columns]</span></span></code></pre></div>
<ul>
<li>看一下overall:</li>
</ul>
<div class="sourceCode" id="cb212"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb212-1"><a href="pandas-basics.html#cb212-1" aria-hidden="true" tabindex="-1"></a>sales.info()</span>
<span id="cb212-2"><a href="pandas-basics.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb212-3"><a href="pandas-basics.html#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 10774 entries, 0 to 10773</span></span>
<span id="cb212-4"><a href="pandas-basics.html#cb212-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 10 columns):</span></span>
<span id="cb212-5"><a href="pandas-basics.html#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column                Non-Null Count  Dtype  </span></span>
<span id="cb212-6"><a href="pandas-basics.html#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------                --------------  -----  </span></span>
<span id="cb212-7"><a href="pandas-basics.html#cb212-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   Unnamed: 0            10774 non-null  int64  </span></span>
<span id="cb212-8"><a href="pandas-basics.html#cb212-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   store                 10774 non-null  int64  </span></span>
<span id="cb212-9"><a href="pandas-basics.html#cb212-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   type                  10774 non-null  object </span></span>
<span id="cb212-10"><a href="pandas-basics.html#cb212-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   department            10774 non-null  int64  </span></span>
<span id="cb212-11"><a href="pandas-basics.html#cb212-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4   date                  10774 non-null  object </span></span>
<span id="cb212-12"><a href="pandas-basics.html#cb212-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5   weekly_sales          10774 non-null  float64</span></span>
<span id="cb212-13"><a href="pandas-basics.html#cb212-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6   is_holiday            10774 non-null  bool   </span></span>
<span id="cb212-14"><a href="pandas-basics.html#cb212-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7   temperature_c         10774 non-null  float64</span></span>
<span id="cb212-15"><a href="pandas-basics.html#cb212-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8   fuel_price_usd_per_l  10774 non-null  float64</span></span>
<span id="cb212-16"><a href="pandas-basics.html#cb212-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9   unemployment          10774 non-null  float64</span></span>
<span id="cb212-17"><a href="pandas-basics.html#cb212-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: bool(1), float64(4), int64(3), object(2)</span></span>
<span id="cb212-18"><a href="pandas-basics.html#cb212-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 768.2+ KB</span></span></code></pre></div>
<ul>
<li>算出”weekly_sales”的mean</li>
</ul>
<div class="sourceCode" id="cb213"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb213-1"><a href="pandas-basics.html#cb213-1" aria-hidden="true" tabindex="-1"></a>sales[<span class="st">"weekly_sales"</span>].mean()</span>
<span id="cb213-2"><a href="pandas-basics.html#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23843.95014850566</span></span></code></pre></div>
<ul>
<li>先定義四分位差，然後去計算temperature_c, fuel_price_usd_per_l, unemployment的四分位差</li>
</ul>
<div class="sourceCode" id="cb214"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb214-1"><a href="pandas-basics.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb214-2"><a href="pandas-basics.html#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iqr(x):</span>
<span id="cb214-3"><a href="pandas-basics.html#cb214-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x.quantile(<span class="fl">0.75</span>) <span class="op">-</span> x.quantile(<span class="fl">0.25</span>)</span>
<span id="cb214-4"><a href="pandas-basics.html#cb214-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-5"><a href="pandas-basics.html#cb214-5" aria-hidden="true" tabindex="-1"></a>sales[[<span class="st">"temperature_c"</span>, <span class="st">"fuel_price_usd_per_l"</span>, <span class="st">"unemployment"</span>]].agg([iqr, np.mean, np.<span class="bu">min</span>, np.<span class="bu">max</span>])</span>
<span id="cb214-6"><a href="pandas-basics.html#cb214-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       temperature_c  fuel_price_usd_per_l  unemployment</span></span>
<span id="cb214-7"><a href="pandas-basics.html#cb214-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; iqr       16.583333              0.073176      0.565000</span></span>
<span id="cb214-8"><a href="pandas-basics.html#cb214-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean      15.731978              0.749746      8.082009</span></span>
<span id="cb214-9"><a href="pandas-basics.html#cb214-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; amin      -8.366667              0.664129      3.879000</span></span>
<span id="cb214-10"><a href="pandas-basics.html#cb214-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; amax      33.827778              1.107674      9.765000</span></span></code></pre></div>
</div>
<div id="group_by-summarise-2" class="section level3" number="7.3.6">
<h3>
<span class="header-section-number">7.3.6</span> group_by + summarise<a class="anchor" aria-label="anchor" href="#group_by-summarise-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想先group_by “type(A, B, C)”，再計算weekly_sales的sum</li>
</ul>
<div class="sourceCode" id="cb215"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb215-1"><a href="pandas-basics.html#cb215-1" aria-hidden="true" tabindex="-1"></a>tt_series <span class="op">=</span> sales.groupby(<span class="st">"type"</span>)[<span class="st">"weekly_sales"</span>].<span class="bu">sum</span>()</span>
<span id="cb215-2"><a href="pandas-basics.html#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tt_series)</span>
<span id="cb215-3"><a href="pandas-basics.html#cb215-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type</span></span>
<span id="cb215-4"><a href="pandas-basics.html#cb215-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A    2.337163e+08</span></span>
<span id="cb215-5"><a href="pandas-basics.html#cb215-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B    2.317840e+07</span></span>
<span id="cb215-6"><a href="pandas-basics.html#cb215-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: weekly_sales, dtype: float64</span></span>
<span id="cb215-7"><a href="pandas-basics.html#cb215-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(tt_series))</span>
<span id="cb215-8"><a href="pandas-basics.html#cb215-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb216"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb216-1"><a href="pandas-basics.html#cb216-1" aria-hidden="true" tabindex="-1"></a>tt_df <span class="op">=</span> sales.groupby(<span class="st">"type"</span>)[[<span class="st">"weekly_sales"</span>]].<span class="bu">sum</span>()</span>
<span id="cb216-2"><a href="pandas-basics.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tt_df)</span>
<span id="cb216-3"><a href="pandas-basics.html#cb216-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       weekly_sales</span></span>
<span id="cb216-4"><a href="pandas-basics.html#cb216-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type              </span></span>
<span id="cb216-5"><a href="pandas-basics.html#cb216-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A     2.337163e+08</span></span>
<span id="cb216-6"><a href="pandas-basics.html#cb216-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B     2.317840e+07</span></span>
<span id="cb216-7"><a href="pandas-basics.html#cb216-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(tt_df))</span>
<span id="cb216-8"><a href="pandas-basics.html#cb216-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span></code></pre></div>
<ul>
<li>我想by “type”+“is_holiday”，去算出weekly_sales的sum, min, max</li>
</ul>
<div class="sourceCode" id="cb217"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb217-1"><a href="pandas-basics.html#cb217-1" aria-hidden="true" tabindex="-1"></a>tt_group <span class="op">=</span> sales.groupby([<span class="st">"type"</span>, <span class="st">"is_holiday"</span>])[<span class="st">"weekly_sales"</span>].agg([np.<span class="bu">min</span>, np.<span class="bu">max</span>])</span>
<span id="cb217-2"><a href="pandas-basics.html#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tt_group)</span>
<span id="cb217-3"><a href="pandas-basics.html#cb217-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                     amin       amax</span></span>
<span id="cb217-4"><a href="pandas-basics.html#cb217-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type is_holiday                    </span></span>
<span id="cb217-5"><a href="pandas-basics.html#cb217-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A    False      -1098.00  293966.05</span></span>
<span id="cb217-6"><a href="pandas-basics.html#cb217-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      True        -598.00    5350.00</span></span>
<span id="cb217-7"><a href="pandas-basics.html#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B    False       -798.00  232558.51</span></span>
<span id="cb217-8"><a href="pandas-basics.html#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      True          31.41    1590.00</span></span>
<span id="cb217-9"><a href="pandas-basics.html#cb217-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(tt_group))</span>
<span id="cb217-10"><a href="pandas-basics.html#cb217-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span></code></pre></div>
</div>
</div>
<div id="slice-by-.loc列名-行名-and-.iloc列數-行數" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> slice by .loc[列名, 行名] and .iloc[列數, 行數]<a class="anchor" aria-label="anchor" href="#slice-by-.loc%E5%88%97%E5%90%8D-%E8%A1%8C%E5%90%8D-and-.iloc%E5%88%97%E6%95%B8-%E8%A1%8C%E6%95%B8"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>loc and iloc是pandas的method，所以是用<code>data.loc[列名,行名]</code>, <code>data.iloc[列index,行index]</code>來運作</li>
</ul>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="57%">
<col width="42%">
</colgroup>
<thead><tr class="header">
<th>說明</th>
<th>pandas</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>取[某列,某行]，得value (此時不再是df type)</td>
<td>df.loc[“列名1”,“行名2”]</td>
</tr>
<tr class="even">
<td>若要維持df type，要加中括號</td>
<td>df.loc[[“列名1”],[“行名2”]]</td>
</tr>
<tr class="odd">
<td>取多個列，多個行</td>
<td>df.loc[[“列名1”,“列名2”],[“行名2”,“行名2”]]</td>
</tr>
<tr class="even">
<td>若要取多個列就好，行我全要</td>
<td>
<p>錯誤: df.loc[[列名1, 列名2], :]</p>
<p>正確: df.loc[[列名1, 列名2]]</p>
</td>
</tr>
<tr class="odd">
<td>若要取多個行就好，列我全要</td>
<td>df.loc[:, [行名1, 行名2]]</td>
</tr>
<tr class="even">
<td>.iloc就是把列名全改成列數(0開始), 行名全改成行數(0開始)就好</td>
<td>
<p>df.iloc[0,2] # 返回value</p>
<p>df.iloc[[0],[2]] # 返回df type</p>
<p>df.iloc[[0,2], [0,1]] #多列多行</p>
<p>df.iloc[[0,2]] # 多列</p>
<p>df.iloc[:, [0,1]] # 多行</p>
</td>
</tr>
</tbody>
</table></div>
<ul>
<li>這邊先讀個檔，複習這兩種用法：</li>
</ul>
<div class="sourceCode" id="cb218"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb218-1"><a href="pandas-basics.html#cb218-1" aria-hidden="true" tabindex="-1"></a>cars <span class="op">=</span> pd.read_csv(<span class="st">"data/cars.csv"</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb218-2"><a href="pandas-basics.html#cb218-2" aria-hidden="true" tabindex="-1"></a>cars</span>
<span id="cb218-3"><a href="pandas-basics.html#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cars_per_cap        country  drives_right</span></span>
<span id="cb218-4"><a href="pandas-basics.html#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; US            809  United States          True</span></span>
<span id="cb218-5"><a href="pandas-basics.html#cb218-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; AUS           731      Australia         False</span></span>
<span id="cb218-6"><a href="pandas-basics.html#cb218-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP           588          Japan         False</span></span>
<span id="cb218-7"><a href="pandas-basics.html#cb218-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; IN             18          India         False</span></span>
<span id="cb218-8"><a href="pandas-basics.html#cb218-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU            200         Russia          True</span></span>
<span id="cb218-9"><a href="pandas-basics.html#cb218-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR            70        Morocco          True</span></span>
<span id="cb218-10"><a href="pandas-basics.html#cb218-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; EG             45          Egypt          True</span></span></code></pre></div>
<ul>
<li>可以看到最左邊有rownames, 每個column有colnames</li>
</ul>
<div id="取某列某行得到value-非df-type" class="section level3" number="7.4.1">
<h3>
<span class="header-section-number">7.4.1</span> 取某列某行(得到value, 非df type)<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0value-%E9%9D%9Edf-type"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>抓出列名是JAP, 行名是drives_right的資料</li>
</ul>
<div class="sourceCode" id="cb219"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb219-1"><a href="pandas-basics.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.loc[<span class="st">"JAP"</span>,<span class="st">"drives_right"</span>])</span>
<span id="cb219-2"><a href="pandas-basics.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; False</span></span></code></pre></div>
<div class="sourceCode" id="cb220"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb220-1"><a href="pandas-basics.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.iloc[<span class="dv">2</span>,<span class="dv">2</span>])</span>
<span id="cb220-2"><a href="pandas-basics.html#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; False</span></span></code></pre></div>
<ul>
<li>此時的結果，都會幫你reduce到最小的資料結構，這邊是boolean。如果我想保留dataframe的格式，那我就都要加中括號</li>
</ul>
</div>
<div id="取某列某行得到df-type" class="section level3" number="7.4.2">
<h3>
<span class="header-section-number">7.4.2</span> 取某列某行(得到df type)<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0df-type"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb221"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb221-1"><a href="pandas-basics.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.loc[[<span class="st">"JAP"</span>],[<span class="st">"drives_right"</span>]])</span>
<span id="cb221-2"><a href="pandas-basics.html#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb221-3"><a href="pandas-basics.html#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP         False</span></span></code></pre></div>
<div class="sourceCode" id="cb222"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb222-1"><a href="pandas-basics.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.iloc[[<span class="dv">2</span>],[<span class="dv">2</span>]])</span>
<span id="cb222-2"><a href="pandas-basics.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb222-3"><a href="pandas-basics.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP         False</span></span></code></pre></div>
</div>
<div id="取多列多行" class="section level3" number="7.4.3">
<h3>
<span class="header-section-number">7.4.3</span> 取多列多行<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E5%A4%9A%E5%88%97%E5%A4%9A%E8%A1%8C"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>抓出列名是RU, MOR，行名是drives_right的資料</li>
</ul>
<div class="sourceCode" id="cb223"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb223-1"><a href="pandas-basics.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.loc[[<span class="st">"RU"</span>, <span class="st">"MOR"</span>],[<span class="st">"drives_right"</span>]])</span>
<span id="cb223-2"><a href="pandas-basics.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb223-3"><a href="pandas-basics.html#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU           True</span></span>
<span id="cb223-4"><a href="pandas-basics.html#cb223-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR          True</span></span></code></pre></div>
<div class="sourceCode" id="cb224"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb224-1"><a href="pandas-basics.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cars.iloc[[<span class="dv">4</span>, <span class="dv">5</span>],[<span class="dv">2</span>]])</span>
<span id="cb224-2"><a href="pandas-basics.html#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      drives_right</span></span>
<span id="cb224-3"><a href="pandas-basics.html#cb224-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU           True</span></span>
<span id="cb224-4"><a href="pandas-basics.html#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR          True</span></span></code></pre></div>
</div>
<div id="取多個列就好行我全要" class="section level3" number="7.4.4">
<h3>
<span class="header-section-number">7.4.4</span> 取多個列就好，行我全要<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E5%88%97%E5%B0%B1%E5%A5%BD%E8%A1%8C%E6%88%91%E5%85%A8%E8%A6%81"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>取US, JAP, RU這三個列</li>
</ul>
<div class="sourceCode" id="cb225"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb225-1"><a href="pandas-basics.html#cb225-1" aria-hidden="true" tabindex="-1"></a>cars.loc[[<span class="st">"US"</span>, <span class="st">"JAP"</span>, <span class="st">"RU"</span>]]</span>
<span id="cb225-2"><a href="pandas-basics.html#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cars_per_cap        country  drives_right</span></span>
<span id="cb225-3"><a href="pandas-basics.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; US            809  United States          True</span></span>
<span id="cb225-4"><a href="pandas-basics.html#cb225-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP           588          Japan         False</span></span>
<span id="cb225-5"><a href="pandas-basics.html#cb225-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU            200         Russia          True</span></span></code></pre></div>
<ul>
<li>要注意，不要寫成<code>cars.loc[["US", "JAP", "RU"], :]</code>
</li>
</ul>
</div>
<div id="取多個行就好列我全要" class="section level3" number="7.4.5">
<h3>
<span class="header-section-number">7.4.5</span> 取多個行就好，列我全要<a class="anchor" aria-label="anchor" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E8%A1%8C%E5%B0%B1%E5%A5%BD%E5%88%97%E6%88%91%E5%85%A8%E8%A6%81"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>取cars_per_cap和drives_right</li>
</ul>
<div class="sourceCode" id="cb226"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb226-1"><a href="pandas-basics.html#cb226-1" aria-hidden="true" tabindex="-1"></a>cars.loc[:,[<span class="st">"cars_per_cap"</span>,<span class="st">"drives_right"</span>]]</span>
<span id="cb226-2"><a href="pandas-basics.html#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cars_per_cap  drives_right</span></span>
<span id="cb226-3"><a href="pandas-basics.html#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; US            809          True</span></span>
<span id="cb226-4"><a href="pandas-basics.html#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; AUS           731         False</span></span>
<span id="cb226-5"><a href="pandas-basics.html#cb226-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; JAP           588         False</span></span>
<span id="cb226-6"><a href="pandas-basics.html#cb226-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; IN             18         False</span></span>
<span id="cb226-7"><a href="pandas-basics.html#cb226-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RU            200          True</span></span>
<span id="cb226-8"><a href="pandas-basics.html#cb226-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MOR            70          True</span></span>
<span id="cb226-9"><a href="pandas-basics.html#cb226-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; EG             45          True</span></span></code></pre></div>
<ul>
<li>要注意，不要寫成<code>cars.loc[["cars_per_cap","drives_right"]]</code>
</li>
</ul>
</div>
</div>
<div id="indexing" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Indexing<a class="anchor" aria-label="anchor" href="#indexing"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>簡單講，就是把某個column，設成row index，那接下來就可以用.loc[[列名1, 列名2]]來進行filter</li>
<li>更特別的是，row index可以接受multi-column，所以當我們想篩選出類似實驗設計的多種treatment時(例如”A=1且B=2” 或 “A=2且B=3”)，特別適合用這種方式來篩選。</li>
</ul>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="74%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>說明</th>
<th>pandas indexing</th>
</tr></thead>
<tbody>
<tr class="odd">
<td></td>
<td><pre><code># set a column as index
df_ind = df.set_index("grade")
# remove an index
df_orig = df_ind.reset_index()</code></pre></td>
</tr>
<tr class="even">
<td>filter(df, grade == “1”)</td>
<td><pre><code>df_ind = df.set_index("grade")
df_ind.loc["1"]</code></pre></td>
</tr>
<tr class="odd">
<td>filter(df, grade %in% c(“1”, “3”))</td>
<td><pre><code>df_ind = df.set_index("grade")
df_ind.loc[["1", "3"]]</code></pre></td>
</tr>
<tr class="even">
<td></td>
<td><pre><code>df_ind = df.set_index("grade","type")
# subset inner level with tuple
df_ind.loc[("1", "A"), ("3","C")]
# subset only outer level with list
df_ind.loc[["1","3"]]</code></pre></td>
</tr>
<tr class="odd">
<td>arrange(df, col1)</td>
<td><pre><code>df_ind = df.set_index("col1")
df_ind.sort_index()</code></pre></td>
</tr>
<tr class="even">
<td>arrange(df, desc(col1))</td>
<td><pre><code>df_ind = df.set_index("col1")
df_ind.sort_index(ascending = False)</code></pre></td>
</tr>
<tr class="odd">
<td>arrange(df, col1, desc(col2))</td>
<td><pre><code>df_ind = df.set_index("col1", "col2")
df_ind.sort_index(
  level = ["col1","col2"],
  ascending = [True, False]
)</code></pre></td>
</tr>
<tr class="even">
<td>排序後，取連續的列</td>
<td>
<p>錯誤: df.loc[[“列名2”:“列名7”]]</p>
<p>正確: df.loc[“列名2”:“列名7”]</p>
</td>
</tr>
<tr class="odd">
<td>排序後，取連續的行</td>
<td>
<p>錯誤: df.loc[:, [“行名2”:“行名7”]]</p>
<p>正確: df.loc[:, “行名2”:“行名7”]</p>
</td>
</tr>
<tr class="even">
<td>如果列名有兩個column(第一層叫outer, 第二層叫inner)，我想取連續的inner列，e.g. inner2~inner3，那我就要先照outer排序，再照inner排序，然後照右邊的寫法來取</td>
<td>df.loc[(“outer1”, “inner2”):(“outer3”, “inner3”)]</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table></div>
<ul>
<li>讀個新的檔(“temperatures.csv”)來玩玩看:</li>
</ul>
<div class="sourceCode" id="cb234"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb234-1"><a href="pandas-basics.html#cb234-1" aria-hidden="true" tabindex="-1"></a>temperatures <span class="op">=</span> pd.read_csv(<span class="st">"data/temperatures.csv"</span>)</span>
<span id="cb234-2"><a href="pandas-basics.html#cb234-2" aria-hidden="true" tabindex="-1"></a>temperatures.head()</span>
<span id="cb234-3"><a href="pandas-basics.html#cb234-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Unnamed: 0        date     city        country  avg_temp_c</span></span>
<span id="cb234-4"><a href="pandas-basics.html#cb234-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0           0  2000-01-01  Abidjan  Côte D'Ivoire      27.293</span></span>
<span id="cb234-5"><a href="pandas-basics.html#cb234-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           1  2000-02-01  Abidjan  Côte D'Ivoire      27.685</span></span>
<span id="cb234-6"><a href="pandas-basics.html#cb234-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           2  2000-03-01  Abidjan  Côte D'Ivoire      29.061</span></span>
<span id="cb234-7"><a href="pandas-basics.html#cb234-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           3  2000-04-01  Abidjan  Côte D'Ivoire      28.162</span></span>
<span id="cb234-8"><a href="pandas-basics.html#cb234-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4  2000-05-01  Abidjan  Côte D'Ivoire      27.547</span></span></code></pre></div>
<ul>
<li>看起來就是該country的city，在此date下的avg_temp_c<br>
</li>
<li>至於第一行的Unnamed: 0，就是index而已，原本在csv中應該就是colname為空白</li>
</ul>
<div class="sourceCode" id="cb235"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb235-1"><a href="pandas-basics.html#cb235-1" aria-hidden="true" tabindex="-1"></a>temperatures <span class="op">=</span> temperatures.drop(columns<span class="op">=</span>[<span class="st">'Unnamed: 0'</span>])</span>
<span id="cb235-2"><a href="pandas-basics.html#cb235-2" aria-hidden="true" tabindex="-1"></a>temperatures.head()</span>
<span id="cb235-3"><a href="pandas-basics.html#cb235-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date     city        country  avg_temp_c</span></span>
<span id="cb235-4"><a href="pandas-basics.html#cb235-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2000-01-01  Abidjan  Côte D'Ivoire      27.293</span></span>
<span id="cb235-5"><a href="pandas-basics.html#cb235-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2000-02-01  Abidjan  Côte D'Ivoire      27.685</span></span>
<span id="cb235-6"><a href="pandas-basics.html#cb235-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2000-03-01  Abidjan  Côte D'Ivoire      29.061</span></span>
<span id="cb235-7"><a href="pandas-basics.html#cb235-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2000-04-01  Abidjan  Côte D'Ivoire      28.162</span></span>
<span id="cb235-8"><a href="pandas-basics.html#cb235-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2000-05-01  Abidjan  Côte D'Ivoire      27.547</span></span></code></pre></div>
<ul>
<li>看一下info:</li>
</ul>
<div class="sourceCode" id="cb236"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb236-1"><a href="pandas-basics.html#cb236-1" aria-hidden="true" tabindex="-1"></a>temperatures.info()</span>
<span id="cb236-2"><a href="pandas-basics.html#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb236-3"><a href="pandas-basics.html#cb236-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 16500 entries, 0 to 16499</span></span>
<span id="cb236-4"><a href="pandas-basics.html#cb236-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 4 columns):</span></span>
<span id="cb236-5"><a href="pandas-basics.html#cb236-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column      Non-Null Count  Dtype  </span></span>
<span id="cb236-6"><a href="pandas-basics.html#cb236-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------      --------------  -----  </span></span>
<span id="cb236-7"><a href="pandas-basics.html#cb236-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   date        16500 non-null  object </span></span>
<span id="cb236-8"><a href="pandas-basics.html#cb236-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   city        16500 non-null  object </span></span>
<span id="cb236-9"><a href="pandas-basics.html#cb236-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   country     16500 non-null  object </span></span>
<span id="cb236-10"><a href="pandas-basics.html#cb236-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   avg_temp_c  16407 non-null  float64</span></span>
<span id="cb236-11"><a href="pandas-basics.html#cb236-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: float64(1), object(3)</span></span>
<span id="cb236-12"><a href="pandas-basics.html#cb236-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 515.8+ KB</span></span></code></pre></div>
<ul>
<li>ok，不意外，date又是字串而已，簡單幫他轉一下：</li>
</ul>
<div class="sourceCode" id="cb237"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb237-1"><a href="pandas-basics.html#cb237-1" aria-hidden="true" tabindex="-1"></a>temperatures[<span class="st">"date"</span>] <span class="op">=</span> pd.to_datetime(temperatures[<span class="st">"date"</span>], <span class="bu">format</span> <span class="op">=</span> <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span>
<span id="cb237-2"><a href="pandas-basics.html#cb237-2" aria-hidden="true" tabindex="-1"></a>temperatures.info()</span>
<span id="cb237-3"><a href="pandas-basics.html#cb237-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb237-4"><a href="pandas-basics.html#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RangeIndex: 16500 entries, 0 to 16499</span></span>
<span id="cb237-5"><a href="pandas-basics.html#cb237-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data columns (total 4 columns):</span></span>
<span id="cb237-6"><a href="pandas-basics.html#cb237-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  #   Column      Non-Null Count  Dtype         </span></span>
<span id="cb237-7"><a href="pandas-basics.html#cb237-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---  ------      --------------  -----         </span></span>
<span id="cb237-8"><a href="pandas-basics.html#cb237-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0   date        16500 non-null  datetime64[ns]</span></span>
<span id="cb237-9"><a href="pandas-basics.html#cb237-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   city        16500 non-null  object        </span></span>
<span id="cb237-10"><a href="pandas-basics.html#cb237-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   country     16500 non-null  object        </span></span>
<span id="cb237-11"><a href="pandas-basics.html#cb237-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   avg_temp_c  16407 non-null  float64       </span></span>
<span id="cb237-12"><a href="pandas-basics.html#cb237-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtypes: datetime64[ns](1), float64(1), object(2)</span></span>
<span id="cb237-13"><a href="pandas-basics.html#cb237-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; memory usage: 515.8+ KB</span></span></code></pre></div>
<div id="將city欄位設為index" class="section level3" number="7.5.1">
<h3>
<span class="header-section-number">7.5.1</span> 將city欄位設為index<a class="anchor" aria-label="anchor" href="#%E5%B0%87city%E6%AC%84%E4%BD%8D%E8%A8%AD%E7%82%BAindex"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb238"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb238-1"><a href="pandas-basics.html#cb238-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind <span class="op">=</span> temperatures.set_index(<span class="st">"city"</span>)</span>
<span id="cb238-2"><a href="pandas-basics.html#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.head())</span>
<span id="cb238-3"><a href="pandas-basics.html#cb238-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               date        country  avg_temp_c</span></span>
<span id="cb238-4"><a href="pandas-basics.html#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; city                                         </span></span>
<span id="cb238-5"><a href="pandas-basics.html#cb238-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-01-01  Côte D'Ivoire      27.293</span></span>
<span id="cb238-6"><a href="pandas-basics.html#cb238-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-02-01  Côte D'Ivoire      27.685</span></span>
<span id="cb238-7"><a href="pandas-basics.html#cb238-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-03-01  Côte D'Ivoire      29.061</span></span>
<span id="cb238-8"><a href="pandas-basics.html#cb238-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-04-01  Côte D'Ivoire      28.162</span></span>
<span id="cb238-9"><a href="pandas-basics.html#cb238-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan 2000-05-01  Côte D'Ivoire      27.547</span></span></code></pre></div>
<ul>
<li>nice，可以看到city被移到index的位子(也就是row_name)<br>
</li>
<li>如果想回復原狀，就用<code>.reset_index()</code>
</li>
</ul>
<div class="sourceCode" id="cb239"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb239-1"><a href="pandas-basics.html#cb239-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind.reset_index().head()</span>
<span id="cb239-2"><a href="pandas-basics.html#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       city       date        country  avg_temp_c</span></span>
<span id="cb239-3"><a href="pandas-basics.html#cb239-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  Abidjan 2000-01-01  Côte D'Ivoire      27.293</span></span>
<span id="cb239-4"><a href="pandas-basics.html#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  Abidjan 2000-02-01  Côte D'Ivoire      27.685</span></span>
<span id="cb239-5"><a href="pandas-basics.html#cb239-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  Abidjan 2000-03-01  Côte D'Ivoire      29.061</span></span>
<span id="cb239-6"><a href="pandas-basics.html#cb239-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  Abidjan 2000-04-01  Côte D'Ivoire      28.162</span></span>
<span id="cb239-7"><a href="pandas-basics.html#cb239-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  Abidjan 2000-05-01  Côte D'Ivoire      27.547</span></span></code></pre></div>
</div>
<div id="filter出citymoscow或saint-petersburg" class="section level3" number="7.5.2">
<h3>
<span class="header-section-number">7.5.2</span> filter出city=“Moscow”或”Saint Petersburg”<a class="anchor" aria-label="anchor" href="#filter%E5%87%BAcitymoscow%E6%88%96saint-petersburg"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb240"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb240-1"><a href="pandas-basics.html#cb240-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind.loc[[<span class="st">"Moscow"</span>, <span class="st">"Saint Petersburg"</span>]].head()</span>
<span id="cb240-2"><a href="pandas-basics.html#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              date country  avg_temp_c</span></span>
<span id="cb240-3"><a href="pandas-basics.html#cb240-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; city                                 </span></span>
<span id="cb240-4"><a href="pandas-basics.html#cb240-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-01-01  Russia      -7.313</span></span>
<span id="cb240-5"><a href="pandas-basics.html#cb240-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-02-01  Russia      -3.551</span></span>
<span id="cb240-6"><a href="pandas-basics.html#cb240-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-03-01  Russia      -1.661</span></span>
<span id="cb240-7"><a href="pandas-basics.html#cb240-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-04-01  Russia      10.096</span></span>
<span id="cb240-8"><a href="pandas-basics.html#cb240-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Moscow 2000-05-01  Russia      10.357</span></span></code></pre></div>
<ul>
<li>對比於之前的寫法：</li>
</ul>
<div class="sourceCode" id="cb241"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb241-1"><a href="pandas-basics.html#cb241-1" aria-hidden="true" tabindex="-1"></a>temperatures[temperatures[<span class="st">"city"</span>].isin([<span class="st">"Moscow"</span>, <span class="st">"Saint Petersburg"</span>])].head()</span>
<span id="cb241-2"><a href="pandas-basics.html#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             date    city country  avg_temp_c</span></span>
<span id="cb241-3"><a href="pandas-basics.html#cb241-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10725 2000-01-01  Moscow  Russia      -7.313</span></span>
<span id="cb241-4"><a href="pandas-basics.html#cb241-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10726 2000-02-01  Moscow  Russia      -3.551</span></span>
<span id="cb241-5"><a href="pandas-basics.html#cb241-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10727 2000-03-01  Moscow  Russia      -1.661</span></span>
<span id="cb241-6"><a href="pandas-basics.html#cb241-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10728 2000-04-01  Moscow  Russia      10.096</span></span>
<span id="cb241-7"><a href="pandas-basics.html#cb241-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10729 2000-05-01  Moscow  Russia      10.357</span></span></code></pre></div>
<ul>
<li><p>可以很明顯的看到，他的優點就是比原本pandas的filter法簡潔<br></p></li>
<li><p>但缺點是：index現在變成是data了，而且會duplicate，所以違反了”tidy data” principles，看你介不介意拉。<br>
### filter出treatment型的資料</p></li>
<li><p>接著進階一點，我想filter出country-city pair的資料(就像實驗設計時，我想filter出一種treatment的資料一樣)<br></p></li>
<li><p>舉例來說，我想filter出country = “Brazil”且city = “Rio De Janeiro”的資料，或country = “Pakistan”且city = “Lahore”的資料</p></li>
</ul>
<div class="sourceCode" id="cb242"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb242-1"><a href="pandas-basics.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 先把這兩個column都設為index</span></span>
<span id="cb242-2"><a href="pandas-basics.html#cb242-2" aria-hidden="true" tabindex="-1"></a>temperatures_ind <span class="op">=</span> temperatures.set_index([<span class="st">"country"</span>, <span class="st">"city"</span>])</span>
<span id="cb242-3"><a href="pandas-basics.html#cb242-3" aria-hidden="true" tabindex="-1"></a>temperatures_ind.head()</span>
<span id="cb242-4"><a href="pandas-basics.html#cb242-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                             date  avg_temp_c</span></span>
<span id="cb242-5"><a href="pandas-basics.html#cb242-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country       city                          </span></span>
<span id="cb242-6"><a href="pandas-basics.html#cb242-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Côte D'Ivoire Abidjan 2000-01-01      27.293</span></span>
<span id="cb242-7"><a href="pandas-basics.html#cb242-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-02-01      27.685</span></span>
<span id="cb242-8"><a href="pandas-basics.html#cb242-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-03-01      29.061</span></span>
<span id="cb242-9"><a href="pandas-basics.html#cb242-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-04-01      28.162</span></span>
<span id="cb242-10"><a href="pandas-basics.html#cb242-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2000-05-01      27.547</span></span></code></pre></div>
<ul>
<li>接著用.loc[]加上tuple來篩選</li>
</ul>
<div class="sourceCode" id="cb243"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb243-1"><a href="pandas-basics.html#cb243-1" aria-hidden="true" tabindex="-1"></a>rows_to_keep <span class="op">=</span> [(<span class="st">"Brazil"</span>, <span class="st">"Rio De Janeiro"</span>), (<span class="st">"Pakistan"</span>,<span class="st">"Lahore"</span>)]</span>
<span id="cb243-2"><a href="pandas-basics.html#cb243-2" aria-hidden="true" tabindex="-1"></a>temperatures_ind.loc[rows_to_keep].head()</span>
<span id="cb243-3"><a href="pandas-basics.html#cb243-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                              date  avg_temp_c</span></span>
<span id="cb243-4"><a href="pandas-basics.html#cb243-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country city                                 </span></span>
<span id="cb243-5"><a href="pandas-basics.html#cb243-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Brazil  Rio De Janeiro 2000-01-01      25.974</span></span>
<span id="cb243-6"><a href="pandas-basics.html#cb243-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-02-01      26.699</span></span>
<span id="cb243-7"><a href="pandas-basics.html#cb243-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-03-01      26.270</span></span>
<span id="cb243-8"><a href="pandas-basics.html#cb243-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-04-01      25.750</span></span>
<span id="cb243-9"><a href="pandas-basics.html#cb243-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Rio De Janeiro 2000-05-01      24.356</span></span></code></pre></div>
</div>
<div id="用.sort_index做排序" class="section level3" number="7.5.3">
<h3>
<span class="header-section-number">7.5.3</span> 用.sort_index()做排序<a class="anchor" aria-label="anchor" href="#%E7%94%A8.sort_index%E5%81%9A%E6%8E%92%E5%BA%8F"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>接下來，做一下arrange</li>
<li>我想直接照index做排序(所以照預設，就是先ascending country，平手時，再ascending city)</li>
</ul>
<div class="sourceCode" id="cb244"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb244-1"><a href="pandas-basics.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.sort_index())</span>
<span id="cb244-2"><a href="pandas-basics.html#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          date  avg_temp_c</span></span>
<span id="cb244-3"><a href="pandas-basics.html#cb244-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country     city                         </span></span>
<span id="cb244-4"><a href="pandas-basics.html#cb244-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Afghanistan Kabul  2000-01-01       3.326</span></span>
<span id="cb244-5"><a href="pandas-basics.html#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-02-01       3.454</span></span>
<span id="cb244-6"><a href="pandas-basics.html#cb244-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-03-01       9.612</span></span>
<span id="cb244-7"><a href="pandas-basics.html#cb244-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-04-01      17.925</span></span>
<span id="cb244-8"><a href="pandas-basics.html#cb244-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Kabul  2000-05-01      24.658</span></span>
<span id="cb244-9"><a href="pandas-basics.html#cb244-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                       ...         ...</span></span>
<span id="cb244-10"><a href="pandas-basics.html#cb244-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Zimbabwe    Harare 2013-05-01      18.298</span></span>
<span id="cb244-11"><a href="pandas-basics.html#cb244-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-06-01      17.020</span></span>
<span id="cb244-12"><a href="pandas-basics.html#cb244-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-07-01      16.299</span></span>
<span id="cb244-13"><a href="pandas-basics.html#cb244-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-08-01      19.232</span></span>
<span id="cb244-14"><a href="pandas-basics.html#cb244-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Harare 2013-09-01         NaN</span></span>
<span id="cb244-15"><a href="pandas-basics.html#cb244-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb244-16"><a href="pandas-basics.html#cb244-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16500 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>我也可以先照city做descending排序，平手時，再照country做ascending排序</li>
</ul>
<div class="sourceCode" id="cb245"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb245-1"><a href="pandas-basics.html#cb245-1" aria-hidden="true" tabindex="-1"></a>temperatures_ind.sort_index(level <span class="op">=</span> [<span class="st">"city"</span>, <span class="st">"country"</span>], ascending <span class="op">=</span> [<span class="va">False</span>, <span class="va">True</span>])</span>
<span id="cb245-2"><a href="pandas-basics.html#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                             date  avg_temp_c</span></span>
<span id="cb245-3"><a href="pandas-basics.html#cb245-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country       city                          </span></span>
<span id="cb245-4"><a href="pandas-basics.html#cb245-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; China         Xian    2000-01-01      -2.819</span></span>
<span id="cb245-5"><a href="pandas-basics.html#cb245-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-02-01       0.943</span></span>
<span id="cb245-6"><a href="pandas-basics.html#cb245-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-03-01       8.997</span></span>
<span id="cb245-7"><a href="pandas-basics.html#cb245-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-04-01      13.714</span></span>
<span id="cb245-8"><a href="pandas-basics.html#cb245-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Xian    2000-05-01      20.568</span></span>
<span id="cb245-9"><a href="pandas-basics.html#cb245-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                          ...         ...</span></span>
<span id="cb245-10"><a href="pandas-basics.html#cb245-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Côte D'Ivoire Abidjan 2013-05-01      27.652</span></span>
<span id="cb245-11"><a href="pandas-basics.html#cb245-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-06-01      26.157</span></span>
<span id="cb245-12"><a href="pandas-basics.html#cb245-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-07-01      24.951</span></span>
<span id="cb245-13"><a href="pandas-basics.html#cb245-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-08-01      24.541</span></span>
<span id="cb245-14"><a href="pandas-basics.html#cb245-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Abidjan 2013-09-01         NaN</span></span>
<span id="cb245-15"><a href="pandas-basics.html#cb245-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb245-16"><a href="pandas-basics.html#cb245-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16500 rows x 2 columns]</span></span></code></pre></div>
</div>
<div id="排序後取連續的列outer列" class="section level3" number="7.5.4">
<h3>
<span class="header-section-number">7.5.4</span> 排序後，取連續的列(outer列)<a class="anchor" aria-label="anchor" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97outer%E5%88%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb246"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb246-1"><a href="pandas-basics.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the index of temperatures_ind</span></span>
<span id="cb246-2"><a href="pandas-basics.html#cb246-2" aria-hidden="true" tabindex="-1"></a>temperatures_srt <span class="op">=</span> temperatures_ind.sort_index()</span>
<span id="cb246-3"><a href="pandas-basics.html#cb246-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-4"><a href="pandas-basics.html#cb246-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset rows from Pakistan to Russia</span></span>
<span id="cb246-5"><a href="pandas-basics.html#cb246-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_srt.loc[<span class="st">"Pakistan"</span>:<span class="st">"Russia"</span>])</span>
<span id="cb246-6"><a href="pandas-basics.html#cb246-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                 date  avg_temp_c</span></span>
<span id="cb246-7"><a href="pandas-basics.html#cb246-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                                   </span></span>
<span id="cb246-8"><a href="pandas-basics.html#cb246-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Pakistan Faisalabad       2000-01-01      12.792</span></span>
<span id="cb246-9"><a href="pandas-basics.html#cb246-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-02-01      14.339</span></span>
<span id="cb246-10"><a href="pandas-basics.html#cb246-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-03-01      20.309</span></span>
<span id="cb246-11"><a href="pandas-basics.html#cb246-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-04-01      29.072</span></span>
<span id="cb246-12"><a href="pandas-basics.html#cb246-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Faisalabad       2000-05-01      34.845</span></span>
<span id="cb246-13"><a href="pandas-basics.html#cb246-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                              ...         ...</span></span>
<span id="cb246-14"><a href="pandas-basics.html#cb246-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Russia   Saint Petersburg 2013-05-01      12.355</span></span>
<span id="cb246-15"><a href="pandas-basics.html#cb246-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-06-01      17.185</span></span>
<span id="cb246-16"><a href="pandas-basics.html#cb246-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-07-01      17.234</span></span>
<span id="cb246-17"><a href="pandas-basics.html#cb246-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-08-01      17.153</span></span>
<span id="cb246-18"><a href="pandas-basics.html#cb246-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Saint Petersburg 2013-09-01         NaN</span></span>
<span id="cb246-19"><a href="pandas-basics.html#cb246-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb246-20"><a href="pandas-basics.html#cb246-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1155 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>注意，不要寫成<code>temperatures_srt.loc[["Pakistan":"Russia"]]</code>
</li>
</ul>
</div>
<div id="排序後取連續的列inner列" class="section level3" number="7.5.5">
<h3>
<span class="header-section-number">7.5.5</span> 排序後，取連續的列(inner列)<a class="anchor" aria-label="anchor" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97inner%E5%88%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb247"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb247-1"><a href="pandas-basics.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Try to subset rows from Lahore to Moscow</span></span>
<span id="cb247-2"><a href="pandas-basics.html#cb247-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_srt.loc[<span class="st">"Lahore"</span>:<span class="st">"Moscow"</span>])</span>
<span id="cb247-3"><a href="pandas-basics.html#cb247-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-4"><a href="pandas-basics.html#cb247-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset rows from Pakistan, Lahore to Russia, Moscow</span></span>
<span id="cb247-5"><a href="pandas-basics.html#cb247-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          date  avg_temp_c</span></span>
<span id="cb247-6"><a href="pandas-basics.html#cb247-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country city                             </span></span>
<span id="cb247-7"><a href="pandas-basics.html#cb247-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Mexico  Mexico     2000-01-01      12.694</span></span>
<span id="cb247-8"><a href="pandas-basics.html#cb247-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-02-01      14.677</span></span>
<span id="cb247-9"><a href="pandas-basics.html#cb247-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-03-01      17.376</span></span>
<span id="cb247-10"><a href="pandas-basics.html#cb247-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-04-01      18.294</span></span>
<span id="cb247-11"><a href="pandas-basics.html#cb247-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Mexico     2000-05-01      18.562</span></span>
<span id="cb247-12"><a href="pandas-basics.html#cb247-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                       ...         ...</span></span>
<span id="cb247-13"><a href="pandas-basics.html#cb247-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Morocco Casablanca 2013-05-01      19.217</span></span>
<span id="cb247-14"><a href="pandas-basics.html#cb247-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-06-01      23.649</span></span>
<span id="cb247-15"><a href="pandas-basics.html#cb247-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-07-01      27.488</span></span>
<span id="cb247-16"><a href="pandas-basics.html#cb247-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-08-01      27.952</span></span>
<span id="cb247-17"><a href="pandas-basics.html#cb247-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Casablanca 2013-09-01         NaN</span></span>
<span id="cb247-18"><a href="pandas-basics.html#cb247-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb247-19"><a href="pandas-basics.html#cb247-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [330 rows x 2 columns]</span></span>
<span id="cb247-20"><a href="pandas-basics.html#cb247-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_srt.loc[(<span class="st">"Pakistan"</span>, <span class="st">"Lahore"</span>):(<span class="st">"Russia"</span>, <span class="st">"Moscow"</span>)])</span>
<span id="cb247-21"><a href="pandas-basics.html#cb247-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                       date  avg_temp_c</span></span>
<span id="cb247-22"><a href="pandas-basics.html#cb247-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                         </span></span>
<span id="cb247-23"><a href="pandas-basics.html#cb247-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Pakistan Lahore 2000-01-01      12.792</span></span>
<span id="cb247-24"><a href="pandas-basics.html#cb247-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-02-01      14.339</span></span>
<span id="cb247-25"><a href="pandas-basics.html#cb247-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-03-01      20.309</span></span>
<span id="cb247-26"><a href="pandas-basics.html#cb247-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-04-01      29.072</span></span>
<span id="cb247-27"><a href="pandas-basics.html#cb247-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lahore 2000-05-01      34.845</span></span>
<span id="cb247-28"><a href="pandas-basics.html#cb247-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                    ...         ...</span></span>
<span id="cb247-29"><a href="pandas-basics.html#cb247-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Russia   Moscow 2013-05-01      16.152</span></span>
<span id="cb247-30"><a href="pandas-basics.html#cb247-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-06-01      18.718</span></span>
<span id="cb247-31"><a href="pandas-basics.html#cb247-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-07-01      18.136</span></span>
<span id="cb247-32"><a href="pandas-basics.html#cb247-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-08-01      17.485</span></span>
<span id="cb247-33"><a href="pandas-basics.html#cb247-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Moscow 2013-09-01         NaN</span></span>
<span id="cb247-34"><a href="pandas-basics.html#cb247-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb247-35"><a href="pandas-basics.html#cb247-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [660 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>注意，如果只寫inner level，例如寫成這樣： <code>temperatures_srt.loc["Lahore":"Moscow"]</code>，那會回給你一個空白的df</li>
</ul>
</div>
<div id="排序後取時間性資料" class="section level3" number="7.5.6">
<h3>
<span class="header-section-number">7.5.6</span> 排序後，取時間性資料<a class="anchor" aria-label="anchor" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E6%99%82%E9%96%93%E6%80%A7%E8%B3%87%E6%96%99"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>如果今天想subset出date的資料，例如我想找出2010~2011的資料就好，我會怎麼做？<br>
</li>
<li>照之前的做法會這樣：</li>
</ul>
<div class="sourceCode" id="cb248"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb248-1"><a href="pandas-basics.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use Boolean conditions to subset temperatures for rows in 2010 and 2011</span></span>
<span id="cb248-2"><a href="pandas-basics.html#cb248-2" aria-hidden="true" tabindex="-1"></a>temperatures_bool <span class="op">=</span> temperatures[(temperatures[<span class="st">"date"</span>] <span class="op">&gt;=</span> <span class="st">"2010-01-01"</span>) <span class="op">&amp;</span> (temperatures[<span class="st">"date"</span>] <span class="op">&lt;=</span> <span class="st">"2011-12-31"</span>)]</span>
<span id="cb248-3"><a href="pandas-basics.html#cb248-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_bool)</span>
<span id="cb248-4"><a href="pandas-basics.html#cb248-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             date     city        country  avg_temp_c</span></span>
<span id="cb248-5"><a href="pandas-basics.html#cb248-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 120   2010-01-01  Abidjan  Côte D'Ivoire      28.270</span></span>
<span id="cb248-6"><a href="pandas-basics.html#cb248-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 121   2010-02-01  Abidjan  Côte D'Ivoire      29.262</span></span>
<span id="cb248-7"><a href="pandas-basics.html#cb248-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 122   2010-03-01  Abidjan  Côte D'Ivoire      29.596</span></span>
<span id="cb248-8"><a href="pandas-basics.html#cb248-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 123   2010-04-01  Abidjan  Côte D'Ivoire      29.068</span></span>
<span id="cb248-9"><a href="pandas-basics.html#cb248-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 124   2010-05-01  Abidjan  Côte D'Ivoire      28.258</span></span>
<span id="cb248-10"><a href="pandas-basics.html#cb248-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...          ...      ...            ...         ...</span></span>
<span id="cb248-11"><a href="pandas-basics.html#cb248-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16474 2011-08-01     Xian          China      23.069</span></span>
<span id="cb248-12"><a href="pandas-basics.html#cb248-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16475 2011-09-01     Xian          China      16.775</span></span>
<span id="cb248-13"><a href="pandas-basics.html#cb248-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16476 2011-10-01     Xian          China      12.587</span></span>
<span id="cb248-14"><a href="pandas-basics.html#cb248-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16477 2011-11-01     Xian          China       7.543</span></span>
<span id="cb248-15"><a href="pandas-basics.html#cb248-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16478 2011-12-01     Xian          China      -0.490</span></span>
<span id="cb248-16"><a href="pandas-basics.html#cb248-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb248-17"><a href="pandas-basics.html#cb248-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2400 rows x 4 columns]</span></span></code></pre></div>
<ul>
<li>那如果用現在的招，就把date移去當index，那就變成：</li>
</ul>
<div class="sourceCode" id="cb249"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb249-1"><a href="pandas-basics.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set date as an index and sort the index</span></span>
<span id="cb249-2"><a href="pandas-basics.html#cb249-2" aria-hidden="true" tabindex="-1"></a>temperatures_ind <span class="op">=</span> temperatures.set_index(<span class="st">"date"</span>).sort_index()</span>
<span id="cb249-3"><a href="pandas-basics.html#cb249-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-4"><a href="pandas-basics.html#cb249-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use .loc[] to subset temperatures_ind for rows in 2010 and 2011</span></span>
<span id="cb249-5"><a href="pandas-basics.html#cb249-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.loc[<span class="st">"2010"</span>:<span class="st">"2011"</span>])</span>
<span id="cb249-6"><a href="pandas-basics.html#cb249-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   city    country  avg_temp_c</span></span>
<span id="cb249-7"><a href="pandas-basics.html#cb249-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date                                         </span></span>
<span id="cb249-8"><a href="pandas-basics.html#cb249-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01  Faisalabad   Pakistan      11.810</span></span>
<span id="cb249-9"><a href="pandas-basics.html#cb249-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   Melbourne  Australia      20.016</span></span>
<span id="cb249-10"><a href="pandas-basics.html#cb249-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   Chongqing      China       7.921</span></span>
<span id="cb249-11"><a href="pandas-basics.html#cb249-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   São Paulo     Brazil      23.738</span></span>
<span id="cb249-12"><a href="pandas-basics.html#cb249-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-01-01   Guangzhou      China      14.136</span></span>
<span id="cb249-13"><a href="pandas-basics.html#cb249-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                ...        ...         ...</span></span>
<span id="cb249-14"><a href="pandas-basics.html#cb249-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01      Nagoya      Japan       6.476</span></span>
<span id="cb249-15"><a href="pandas-basics.html#cb249-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01   Hyderabad      India      23.613</span></span>
<span id="cb249-16"><a href="pandas-basics.html#cb249-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01        Cali   Colombia      21.559</span></span>
<span id="cb249-17"><a href="pandas-basics.html#cb249-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01        Lima       Peru      18.293</span></span>
<span id="cb249-18"><a href="pandas-basics.html#cb249-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-12-01     Bangkok   Thailand      25.021</span></span>
<span id="cb249-19"><a href="pandas-basics.html#cb249-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb249-20"><a href="pandas-basics.html#cb249-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2400 rows x 3 columns]</span></span></code></pre></div>
<ul>
<li>good，多個練習，想看2010-08~2011-02的資料：</li>
</ul>
<div class="sourceCode" id="cb250"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb250-1"><a href="pandas-basics.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use .loc[] to subset temperatures_ind for rows from Aug 2010 to Feb 2011</span></span>
<span id="cb250-2"><a href="pandas-basics.html#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures_ind.loc[<span class="st">"2010-08"</span>:<span class="st">"2011-02"</span>])</span>
<span id="cb250-3"><a href="pandas-basics.html#cb250-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 city        country  avg_temp_c</span></span>
<span id="cb250-4"><a href="pandas-basics.html#cb250-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date                                           </span></span>
<span id="cb250-5"><a href="pandas-basics.html#cb250-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01  Calcutta          India      30.226</span></span>
<span id="cb250-6"><a href="pandas-basics.html#cb250-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01      Pune          India      24.941</span></span>
<span id="cb250-7"><a href="pandas-basics.html#cb250-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01     Izmir         Turkey      28.352</span></span>
<span id="cb250-8"><a href="pandas-basics.html#cb250-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01   Tianjin          China      25.543</span></span>
<span id="cb250-9"><a href="pandas-basics.html#cb250-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010-08-01    Manila    Philippines      27.101</span></span>
<span id="cb250-10"><a href="pandas-basics.html#cb250-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...              ...            ...         ...</span></span>
<span id="cb250-11"><a href="pandas-basics.html#cb250-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01     Kabul    Afghanistan       3.914</span></span>
<span id="cb250-12"><a href="pandas-basics.html#cb250-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01   Chicago  United States       0.276</span></span>
<span id="cb250-13"><a href="pandas-basics.html#cb250-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01    Aleppo          Syria       8.246</span></span>
<span id="cb250-14"><a href="pandas-basics.html#cb250-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01     Delhi          India      18.136</span></span>
<span id="cb250-15"><a href="pandas-basics.html#cb250-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011-02-01   Rangoon          Burma      26.631</span></span>
<span id="cb250-16"><a href="pandas-basics.html#cb250-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb250-17"><a href="pandas-basics.html#cb250-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [700 rows x 3 columns]</span></span></code></pre></div>
</div>
<div id="subsetting-by-rowcolumn-number" class="section level3" number="7.5.7">
<h3>
<span class="header-section-number">7.5.7</span> subsetting by row/column number<a class="anchor" aria-label="anchor" href="#subsetting-by-rowcolumn-number"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb251"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb251-1"><a href="pandas-basics.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the 23rd row, 2nd column (index positions 22 and 1).</span></span>
<span id="cb251-2"><a href="pandas-basics.html#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[<span class="dv">22</span>,<span class="dv">1</span>])</span>
<span id="cb251-3"><a href="pandas-basics.html#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="pandas-basics.html#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the first 5 rows (index positions 0 to 5).</span></span>
<span id="cb251-5"><a href="pandas-basics.html#cb251-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abidjan</span></span>
<span id="cb251-6"><a href="pandas-basics.html#cb251-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[:<span class="dv">5</span>])</span>
<span id="cb251-7"><a href="pandas-basics.html#cb251-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-8"><a href="pandas-basics.html#cb251-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all rows, columns 3 and 4 (index positions 2 to 4).</span></span>
<span id="cb251-9"><a href="pandas-basics.html#cb251-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         date     city        country  avg_temp_c</span></span>
<span id="cb251-10"><a href="pandas-basics.html#cb251-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 2000-01-01  Abidjan  Côte D'Ivoire      27.293</span></span>
<span id="cb251-11"><a href="pandas-basics.html#cb251-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2000-02-01  Abidjan  Côte D'Ivoire      27.685</span></span>
<span id="cb251-12"><a href="pandas-basics.html#cb251-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2000-03-01  Abidjan  Côte D'Ivoire      29.061</span></span>
<span id="cb251-13"><a href="pandas-basics.html#cb251-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2000-04-01  Abidjan  Côte D'Ivoire      28.162</span></span>
<span id="cb251-14"><a href="pandas-basics.html#cb251-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 2000-05-01  Abidjan  Côte D'Ivoire      27.547</span></span>
<span id="cb251-15"><a href="pandas-basics.html#cb251-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[:,<span class="dv">2</span>:<span class="dv">4</span>])</span>
<span id="cb251-16"><a href="pandas-basics.html#cb251-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-17"><a href="pandas-basics.html#cb251-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the first 5 rows, columns 3 and 4.</span></span>
<span id="cb251-18"><a href="pandas-basics.html#cb251-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              country  avg_temp_c</span></span>
<span id="cb251-19"><a href="pandas-basics.html#cb251-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0      Côte D'Ivoire      27.293</span></span>
<span id="cb251-20"><a href="pandas-basics.html#cb251-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      Côte D'Ivoire      27.685</span></span>
<span id="cb251-21"><a href="pandas-basics.html#cb251-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      Côte D'Ivoire      29.061</span></span>
<span id="cb251-22"><a href="pandas-basics.html#cb251-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      Côte D'Ivoire      28.162</span></span>
<span id="cb251-23"><a href="pandas-basics.html#cb251-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      Côte D'Ivoire      27.547</span></span>
<span id="cb251-24"><a href="pandas-basics.html#cb251-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...              ...         ...</span></span>
<span id="cb251-25"><a href="pandas-basics.html#cb251-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16495          China      18.979</span></span>
<span id="cb251-26"><a href="pandas-basics.html#cb251-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16496          China      23.522</span></span>
<span id="cb251-27"><a href="pandas-basics.html#cb251-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16497          China      25.251</span></span>
<span id="cb251-28"><a href="pandas-basics.html#cb251-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16498          China      24.528</span></span>
<span id="cb251-29"><a href="pandas-basics.html#cb251-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16499          China         NaN</span></span>
<span id="cb251-30"><a href="pandas-basics.html#cb251-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb251-31"><a href="pandas-basics.html#cb251-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16500 rows x 2 columns]</span></span>
<span id="cb251-32"><a href="pandas-basics.html#cb251-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temperatures.iloc[:<span class="dv">5</span>, <span class="dv">2</span>:<span class="dv">4</span>])</span>
<span id="cb251-33"><a href="pandas-basics.html#cb251-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          country  avg_temp_c</span></span>
<span id="cb251-34"><a href="pandas-basics.html#cb251-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  Côte D'Ivoire      27.293</span></span>
<span id="cb251-35"><a href="pandas-basics.html#cb251-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  Côte D'Ivoire      27.685</span></span>
<span id="cb251-36"><a href="pandas-basics.html#cb251-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  Côte D'Ivoire      29.061</span></span>
<span id="cb251-37"><a href="pandas-basics.html#cb251-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  Côte D'Ivoire      28.162</span></span>
<span id="cb251-38"><a href="pandas-basics.html#cb251-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  Côte D'Ivoire      27.547</span></span></code></pre></div>
</div>
</div>
<div id="pivot-table-1" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> pivot table<a class="anchor" aria-label="anchor" href="#pivot-table-1"><i class="fas fa-link"></i></a>
</h2>
<div id="intro" class="section level3" number="7.6.1">
<h3>
<span class="header-section-number">7.6.1</span> Intro<a class="anchor" aria-label="anchor" href="#intro"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>pandas有個dplyr沒有的優點，就是他可以做excel的樞紐分析表<br>
</li>
<li>最簡單的例子，就是你可以指定table的row是性別，col是年級，然後cell是去算該性別該年級下的平均成績之類的</li>
</ul>
<div class="inline-table"><table style="width:96%;" class="table table-sm">
<colgroup>
<col width="29%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th>dplyr無, Excel樞紐</th>
<th>pandas</th>
</tr></thead>
<tbody><tr class="odd">
<td></td>
<td><pre><code>df.pivot_table(
  index = cat_col1, #row
  columns = cat_col2, #col
  values = con_col, #cell要by誰做計算
  aggfunc = np.mean, #計算用的function
  margins = True #是否要算overall row/col
)</code></pre></td>
</tr></tbody>
</table></div>
<ul>
<li>例如，我想by “type” + “is_holiday” 去算平均”weekly_sales”</li>
</ul>
<div class="sourceCode" id="cb253"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb253-1"><a href="pandas-basics.html#cb253-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb253-2"><a href="pandas-basics.html#cb253-2" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="st">"type"</span>, <span class="co"># pivot table的row要放啥</span></span>
<span id="cb253-3"><a href="pandas-basics.html#cb253-3" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="st">"is_holiday"</span>, <span class="co"># pivot table的column要放啥</span></span>
<span id="cb253-4"><a href="pandas-basics.html#cb253-4" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> <span class="st">"weekly_sales"</span>, <span class="co"># pivot table 的 cell ，要對哪個變數做計算</span></span>
<span id="cb253-5"><a href="pandas-basics.html#cb253-5" aria-hidden="true" tabindex="-1"></a>    aggfunc <span class="op">=</span> np.mean <span class="co"># 計算的function要用甚麼</span></span>
<span id="cb253-6"><a href="pandas-basics.html#cb253-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb253-7"><a href="pandas-basics.html#cb253-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; is_holiday         False       True</span></span>
<span id="cb253-8"><a href="pandas-basics.html#cb253-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                               </span></span>
<span id="cb253-9"><a href="pandas-basics.html#cb253-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A           23768.583523  590.04525</span></span>
<span id="cb253-10"><a href="pandas-basics.html#cb253-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B           25751.980533  810.70500</span></span></code></pre></div>
<ul>
<li>如果我想算marginal mean，那就：</li>
</ul>
<div class="sourceCode" id="cb254"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb254-1"><a href="pandas-basics.html#cb254-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb254-2"><a href="pandas-basics.html#cb254-2" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="st">"type"</span>, <span class="co"># pivot table的row要放啥</span></span>
<span id="cb254-3"><a href="pandas-basics.html#cb254-3" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="st">"is_holiday"</span>, <span class="co"># pivot table的column要放啥</span></span>
<span id="cb254-4"><a href="pandas-basics.html#cb254-4" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> <span class="st">"weekly_sales"</span>, <span class="co"># pivot table 的 cell ，要對哪個變數做計算</span></span>
<span id="cb254-5"><a href="pandas-basics.html#cb254-5" aria-hidden="true" tabindex="-1"></a>    aggfunc <span class="op">=</span> np.mean, <span class="co"># 計算的function要用甚麼</span></span>
<span id="cb254-6"><a href="pandas-basics.html#cb254-6" aria-hidden="true" tabindex="-1"></a>    margins<span class="op">=</span> <span class="va">True</span></span>
<span id="cb254-7"><a href="pandas-basics.html#cb254-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb254-8"><a href="pandas-basics.html#cb254-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; is_holiday         False        True           All</span></span>
<span id="cb254-9"><a href="pandas-basics.html#cb254-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                                              </span></span>
<span id="cb254-10"><a href="pandas-basics.html#cb254-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A           23768.583523  590.045250  23674.667242</span></span>
<span id="cb254-11"><a href="pandas-basics.html#cb254-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B           25751.980533  810.705000  25696.678370</span></span>
<span id="cb254-12"><a href="pandas-basics.html#cb254-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; All         23934.913873  600.552857  23843.950149</span></span></code></pre></div>
<ul>
<li>如果cross的地方，沒有數據，他的預設會是NA。例如：by “department”+“type”去計算平均”weekly_sales”</li>
</ul>
<div class="sourceCode" id="cb255"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb255-1"><a href="pandas-basics.html#cb255-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb255-2"><a href="pandas-basics.html#cb255-2" aria-hidden="true" tabindex="-1"></a>  index <span class="op">=</span> <span class="st">"department"</span>,</span>
<span id="cb255-3"><a href="pandas-basics.html#cb255-3" aria-hidden="true" tabindex="-1"></a>  columns <span class="op">=</span> <span class="st">"type"</span>,</span>
<span id="cb255-4"><a href="pandas-basics.html#cb255-4" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="st">"weekly_sales"</span>,</span>
<span id="cb255-5"><a href="pandas-basics.html#cb255-5" aria-hidden="true" tabindex="-1"></a>  aggfunc<span class="op">=</span> np.mean</span>
<span id="cb255-6"><a href="pandas-basics.html#cb255-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb255-7"><a href="pandas-basics.html#cb255-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                    A              B</span></span>
<span id="cb255-8"><a href="pandas-basics.html#cb255-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; department                              </span></span>
<span id="cb255-9"><a href="pandas-basics.html#cb255-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            30961.725379   44050.626667</span></span>
<span id="cb255-10"><a href="pandas-basics.html#cb255-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            67600.158788  112958.526667</span></span>
<span id="cb255-11"><a href="pandas-basics.html#cb255-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            17160.002955   30580.655000</span></span>
<span id="cb255-12"><a href="pandas-basics.html#cb255-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            44285.399091   51219.654167</span></span>
<span id="cb255-13"><a href="pandas-basics.html#cb255-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            34821.011364   63236.875000</span></span>
<span id="cb255-14"><a href="pandas-basics.html#cb255-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                   ...            ...</span></span>
<span id="cb255-15"><a href="pandas-basics.html#cb255-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 95          123933.787121   77082.102500</span></span>
<span id="cb255-16"><a href="pandas-basics.html#cb255-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 96           21367.042857    9528.538333</span></span>
<span id="cb255-17"><a href="pandas-basics.html#cb255-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97           28471.266970    5828.873333</span></span>
<span id="cb255-18"><a href="pandas-basics.html#cb255-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 98           12875.423182     217.428333</span></span>
<span id="cb255-19"><a href="pandas-basics.html#cb255-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 99             379.123659            NaN</span></span>
<span id="cb255-20"><a href="pandas-basics.html#cb255-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb255-21"><a href="pandas-basics.html#cb255-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [80 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>可以發現右下角出現NaN<br>
</li>
<li>如果你想用數值來fill這個NaN，可以用<code>fill_value =</code>這個指令</li>
</ul>
<div class="sourceCode" id="cb256"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb256-1"><a href="pandas-basics.html#cb256-1" aria-hidden="true" tabindex="-1"></a>sales.pivot_table(</span>
<span id="cb256-2"><a href="pandas-basics.html#cb256-2" aria-hidden="true" tabindex="-1"></a>  index <span class="op">=</span> <span class="st">"department"</span>,</span>
<span id="cb256-3"><a href="pandas-basics.html#cb256-3" aria-hidden="true" tabindex="-1"></a>  columns <span class="op">=</span> <span class="st">"type"</span>,</span>
<span id="cb256-4"><a href="pandas-basics.html#cb256-4" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="st">"weekly_sales"</span>,</span>
<span id="cb256-5"><a href="pandas-basics.html#cb256-5" aria-hidden="true" tabindex="-1"></a>  aggfunc<span class="op">=</span> np.mean,</span>
<span id="cb256-6"><a href="pandas-basics.html#cb256-6" aria-hidden="true" tabindex="-1"></a>  fill_value <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb256-7"><a href="pandas-basics.html#cb256-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb256-8"><a href="pandas-basics.html#cb256-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type                    A              B</span></span>
<span id="cb256-9"><a href="pandas-basics.html#cb256-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; department                              </span></span>
<span id="cb256-10"><a href="pandas-basics.html#cb256-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            30961.725379   44050.626667</span></span>
<span id="cb256-11"><a href="pandas-basics.html#cb256-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            67600.158788  112958.526667</span></span>
<span id="cb256-12"><a href="pandas-basics.html#cb256-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            17160.002955   30580.655000</span></span>
<span id="cb256-13"><a href="pandas-basics.html#cb256-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            44285.399091   51219.654167</span></span>
<span id="cb256-14"><a href="pandas-basics.html#cb256-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            34821.011364   63236.875000</span></span>
<span id="cb256-15"><a href="pandas-basics.html#cb256-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                   ...            ...</span></span>
<span id="cb256-16"><a href="pandas-basics.html#cb256-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 95          123933.787121   77082.102500</span></span>
<span id="cb256-17"><a href="pandas-basics.html#cb256-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 96           21367.042857    9528.538333</span></span>
<span id="cb256-18"><a href="pandas-basics.html#cb256-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97           28471.266970    5828.873333</span></span>
<span id="cb256-19"><a href="pandas-basics.html#cb256-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 98           12875.423182     217.428333</span></span>
<span id="cb256-20"><a href="pandas-basics.html#cb256-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 99             379.123659       0.000000</span></span>
<span id="cb256-21"><a href="pandas-basics.html#cb256-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb256-22"><a href="pandas-basics.html#cb256-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [80 rows x 2 columns]</span></span></code></pre></div>
<ul>
<li>再來練習下一個題目，用”temperatures.csv”的資料<br>
</li>
<li>我想看：各city/各年，的平均溫度<br>
</li>
<li>而原始資料中，沒有”年”這個column，只有”date”這個column(“yyyy-mm-dd”)，所以我要再擷取出year的資訊</li>
</ul>
<div class="sourceCode" id="cb257"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb257-1"><a href="pandas-basics.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a year column to temperatures</span></span>
<span id="cb257-2"><a href="pandas-basics.html#cb257-2" aria-hidden="true" tabindex="-1"></a>temperatures[<span class="st">"year"</span>] <span class="op">=</span> temperatures[<span class="st">"date"</span>].dt.year</span>
<span id="cb257-3"><a href="pandas-basics.html#cb257-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-4"><a href="pandas-basics.html#cb257-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot avg_temp_c by country and city vs year</span></span>
<span id="cb257-5"><a href="pandas-basics.html#cb257-5" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year <span class="op">=</span> temperatures.pivot_table(index <span class="op">=</span> [<span class="st">"country"</span>,<span class="st">"city"</span>], columns <span class="op">=</span> <span class="st">"year"</span>, values <span class="op">=</span> <span class="st">"avg_temp_c"</span>)</span>
<span id="cb257-6"><a href="pandas-basics.html#cb257-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-7"><a href="pandas-basics.html#cb257-7" aria-hidden="true" tabindex="-1"></a><span class="co"># See the result</span></span>
<span id="cb257-8"><a href="pandas-basics.html#cb257-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(temp_by_country_city_vs_year)</span>
<span id="cb257-9"><a href="pandas-basics.html#cb257-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                                 2000       2001  ...       2012       2013</span></span>
<span id="cb257-10"><a href="pandas-basics.html#cb257-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country       city                                    ...                      </span></span>
<span id="cb257-11"><a href="pandas-basics.html#cb257-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Afghanistan   Kabul             15.822667  15.847917  ...  14.510333  16.206125</span></span>
<span id="cb257-12"><a href="pandas-basics.html#cb257-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Angola        Luanda            24.410333  24.427083  ...  24.240083  24.553875</span></span>
<span id="cb257-13"><a href="pandas-basics.html#cb257-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Australia     Melbourne         14.320083  14.180000  ...  14.268667  14.741500</span></span>
<span id="cb257-14"><a href="pandas-basics.html#cb257-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Sydney            17.567417  17.854500  ...  17.474333  18.089750</span></span>
<span id="cb257-15"><a href="pandas-basics.html#cb257-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bangladesh    Dhaka             25.905250  25.931250  ...  26.283583  26.587000</span></span>
<span id="cb257-16"><a href="pandas-basics.html#cb257-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...                                   ...        ...  ...        ...        ...</span></span>
<span id="cb257-17"><a href="pandas-basics.html#cb257-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; United States Chicago           11.089667  11.703083  ...  12.821250  11.586889</span></span>
<span id="cb257-18"><a href="pandas-basics.html#cb257-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Los Angeles       16.643333  16.466250  ...  17.089583  18.120667</span></span>
<span id="cb257-19"><a href="pandas-basics.html#cb257-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               New York           9.969083  10.931000  ...  11.971500  12.163889</span></span>
<span id="cb257-20"><a href="pandas-basics.html#cb257-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Vietnam       Ho Chi Minh City  27.588917  27.831750  ...  28.248750  28.455000</span></span>
<span id="cb257-21"><a href="pandas-basics.html#cb257-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Zimbabwe      Harare            20.283667  20.861000  ...  20.523333  19.756500</span></span>
<span id="cb257-22"><a href="pandas-basics.html#cb257-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb257-23"><a href="pandas-basics.html#cb257-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [100 rows x 14 columns]</span></span></code></pre></div>
</div>
<div id="subsetting-pivot-table" class="section level3" number="7.6.2">
<h3>
<span class="header-section-number">7.6.2</span> subsetting pivot table<a class="anchor" aria-label="anchor" href="#subsetting-pivot-table"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>那因為pivot table他就是一個pandas dataframe，所以你也可以用.loc去subset他，</li>
<li>例如，我想subset出country從”Egypt”到”India”的資料</li>
</ul>
<div class="sourceCode" id="cb258"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb258-1"><a href="pandas-basics.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset for Egypt to India</span></span>
<span id="cb258-2"><a href="pandas-basics.html#cb258-2" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year.loc[<span class="st">"Egypt"</span>:<span class="st">"India"</span>]</span>
<span id="cb258-3"><a href="pandas-basics.html#cb258-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                       2000       2001  ...       2012       2013</span></span>
<span id="cb258-4"><a href="pandas-basics.html#cb258-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                               ...                      </span></span>
<span id="cb258-5"><a href="pandas-basics.html#cb258-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Egypt    Alexandria   20.744500  21.454583  ...  21.552583  21.438500</span></span>
<span id="cb258-6"><a href="pandas-basics.html#cb258-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Cairo        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb258-7"><a href="pandas-basics.html#cb258-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Gizeh        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb258-8"><a href="pandas-basics.html#cb258-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ethiopia Addis Abeba  18.241250  18.296417  ...  18.448583  19.539000</span></span>
<span id="cb258-9"><a href="pandas-basics.html#cb258-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; France   Paris        11.739667  11.371250  ...  11.219917  11.011625</span></span>
<span id="cb258-10"><a href="pandas-basics.html#cb258-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Germany  Berlin       10.963667   9.690250  ...   9.964333  10.121500</span></span>
<span id="cb258-11"><a href="pandas-basics.html#cb258-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; India    Ahmadabad    27.436000  27.198083  ...  27.027250  27.608625</span></span>
<span id="cb258-12"><a href="pandas-basics.html#cb258-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bangalore    25.337917  25.528167  ...  26.042333  26.610500</span></span>
<span id="cb258-13"><a href="pandas-basics.html#cb258-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bombay       27.203667  27.243667  ...  27.192500  26.713000</span></span>
<span id="cb258-14"><a href="pandas-basics.html#cb258-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Calcutta     26.491333  26.515167  ...  26.935083  27.369250</span></span>
<span id="cb258-15"><a href="pandas-basics.html#cb258-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Delhi        26.048333  25.862917  ...  25.889417  26.709250</span></span>
<span id="cb258-16"><a href="pandas-basics.html#cb258-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Hyderabad    27.231833  27.555167  ...  28.018583  28.851250</span></span>
<span id="cb258-17"><a href="pandas-basics.html#cb258-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Jaipur       26.430250  26.023000  ...  25.884500  26.844125</span></span>
<span id="cb258-18"><a href="pandas-basics.html#cb258-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Kanpur       25.353917  25.326500  ...  25.445417  26.121250</span></span>
<span id="cb258-19"><a href="pandas-basics.html#cb258-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Lakhnau      25.353917  25.326500  ...  25.445417  26.121250</span></span>
<span id="cb258-20"><a href="pandas-basics.html#cb258-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Madras       28.811667  29.162917  ...  29.778417  30.411750</span></span>
<span id="cb258-21"><a href="pandas-basics.html#cb258-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Nagpur       26.181417  26.321667  ...  26.327917  27.112375</span></span>
<span id="cb258-22"><a href="pandas-basics.html#cb258-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          New Delhi    26.048333  25.862917  ...  25.889417  26.709250</span></span>
<span id="cb258-23"><a href="pandas-basics.html#cb258-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Pune         25.110917  25.337833  ...  25.296833  25.847625</span></span>
<span id="cb258-24"><a href="pandas-basics.html#cb258-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Surat        27.029000  26.897250  ...  26.889250  27.437750</span></span>
<span id="cb258-25"><a href="pandas-basics.html#cb258-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb258-26"><a href="pandas-basics.html#cb258-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20 rows x 14 columns]</span></span></code></pre></div>
<ul>
<li>我想subset出country-city從”Egypt-Cairo” 到 “India-Delhi”</li>
</ul>
<div class="sourceCode" id="cb259"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb259-1"><a href="pandas-basics.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset for Egypt, Cairo to India, Delhi</span></span>
<span id="cb259-2"><a href="pandas-basics.html#cb259-2" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year.loc[(<span class="st">"Egypt"</span>,<span class="st">"Cairo"</span>):(<span class="st">"India"</span>,<span class="st">"Delhi"</span>)]</span>
<span id="cb259-3"><a href="pandas-basics.html#cb259-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                       2000       2001  ...       2012       2013</span></span>
<span id="cb259-4"><a href="pandas-basics.html#cb259-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                               ...                      </span></span>
<span id="cb259-5"><a href="pandas-basics.html#cb259-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Egypt    Cairo        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb259-6"><a href="pandas-basics.html#cb259-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Gizeh        21.486167  22.330833  ...  22.484250  22.907000</span></span>
<span id="cb259-7"><a href="pandas-basics.html#cb259-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ethiopia Addis Abeba  18.241250  18.296417  ...  18.448583  19.539000</span></span>
<span id="cb259-8"><a href="pandas-basics.html#cb259-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; France   Paris        11.739667  11.371250  ...  11.219917  11.011625</span></span>
<span id="cb259-9"><a href="pandas-basics.html#cb259-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Germany  Berlin       10.963667   9.690250  ...   9.964333  10.121500</span></span>
<span id="cb259-10"><a href="pandas-basics.html#cb259-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; India    Ahmadabad    27.436000  27.198083  ...  27.027250  27.608625</span></span>
<span id="cb259-11"><a href="pandas-basics.html#cb259-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bangalore    25.337917  25.528167  ...  26.042333  26.610500</span></span>
<span id="cb259-12"><a href="pandas-basics.html#cb259-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bombay       27.203667  27.243667  ...  27.192500  26.713000</span></span>
<span id="cb259-13"><a href="pandas-basics.html#cb259-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Calcutta     26.491333  26.515167  ...  26.935083  27.369250</span></span>
<span id="cb259-14"><a href="pandas-basics.html#cb259-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Delhi        26.048333  25.862917  ...  25.889417  26.709250</span></span>
<span id="cb259-15"><a href="pandas-basics.html#cb259-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb259-16"><a href="pandas-basics.html#cb259-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10 rows x 14 columns]</span></span></code></pre></div>
<ul>
<li>綜合行和列，subset出country-city從”Egypt-Cairo” 到 “India-Delhi”，以及年份從2005~2010的資料：</li>
</ul>
<div class="sourceCode" id="cb260"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb260-1"><a href="pandas-basics.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># From Egypt, Cairo to India, Delhi, and 2005 to 2010.</span></span>
<span id="cb260-2"><a href="pandas-basics.html#cb260-2" aria-hidden="true" tabindex="-1"></a>temp_by_country_city_vs_year.loc[(<span class="st">"Egypt"</span>,<span class="st">"Cairo"</span>):(<span class="st">"India"</span>,<span class="st">"Delhi"</span>),<span class="st">"2005"</span>:<span class="st">"2010"</span>]</span>
<span id="cb260-3"><a href="pandas-basics.html#cb260-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year                       2005       2006  ...       2009       2010</span></span>
<span id="cb260-4"><a href="pandas-basics.html#cb260-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city                               ...                      </span></span>
<span id="cb260-5"><a href="pandas-basics.html#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Egypt    Cairo        22.006500  22.050000  ...  22.625000  23.718250</span></span>
<span id="cb260-6"><a href="pandas-basics.html#cb260-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Gizeh        22.006500  22.050000  ...  22.625000  23.718250</span></span>
<span id="cb260-7"><a href="pandas-basics.html#cb260-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ethiopia Addis Abeba  18.312833  18.427083  ...  18.765333  18.298250</span></span>
<span id="cb260-8"><a href="pandas-basics.html#cb260-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; France   Paris        11.552917  11.788500  ...  11.464083  10.409833</span></span>
<span id="cb260-9"><a href="pandas-basics.html#cb260-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Germany  Berlin        9.919083  10.545333  ...  10.062500   8.606833</span></span>
<span id="cb260-10"><a href="pandas-basics.html#cb260-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; India    Ahmadabad    26.828083  27.282833  ...  28.095833  28.017833</span></span>
<span id="cb260-11"><a href="pandas-basics.html#cb260-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bangalore    25.476500  25.418250  ...  25.725750  25.705250</span></span>
<span id="cb260-12"><a href="pandas-basics.html#cb260-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Bombay       27.035750  27.381500  ...  27.844500  27.765417</span></span>
<span id="cb260-13"><a href="pandas-basics.html#cb260-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Calcutta     26.729167  26.986250  ...  27.153250  27.288833</span></span>
<span id="cb260-14"><a href="pandas-basics.html#cb260-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Delhi        25.716083  26.365917  ...  26.554250  26.520250</span></span>
<span id="cb260-15"><a href="pandas-basics.html#cb260-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb260-16"><a href="pandas-basics.html#cb260-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10 rows x 6 columns]</span></span></code></pre></div>
</div>
<div id="calculating-on-a-pivot-table" class="section level3" number="7.6.3">
<h3>
<span class="header-section-number">7.6.3</span> Calculating on a pivot table<a class="anchor" aria-label="anchor" href="#calculating-on-a-pivot-table"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>因為pivot table還是pandas dataframe，所以你也可以對他做運算<br>
</li>
<li>例如：這邊想做colmean和rowmean<br>
</li>
<li>先看column mean，用的語法是 <code>df.mean(axis = 0)</code><br>
</li>
<li>例如，我們看看各年的溫度：</li>
</ul>
<div class="sourceCode" id="cb261"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb261-1"><a href="pandas-basics.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the worldwide mean temp by year</span></span>
<span id="cb261-2"><a href="pandas-basics.html#cb261-2" aria-hidden="true" tabindex="-1"></a>mean_temp_by_year <span class="op">=</span> temp_by_country_city_vs_year.mean(axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb261-3"><a href="pandas-basics.html#cb261-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_year)</span>
<span id="cb261-4"><a href="pandas-basics.html#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year</span></span>
<span id="cb261-5"><a href="pandas-basics.html#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2000    19.506243</span></span>
<span id="cb261-6"><a href="pandas-basics.html#cb261-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2001    19.679352</span></span>
<span id="cb261-7"><a href="pandas-basics.html#cb261-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2002    19.855685</span></span>
<span id="cb261-8"><a href="pandas-basics.html#cb261-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2003    19.630197</span></span>
<span id="cb261-9"><a href="pandas-basics.html#cb261-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2004    19.672204</span></span>
<span id="cb261-10"><a href="pandas-basics.html#cb261-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2005    19.607239</span></span>
<span id="cb261-11"><a href="pandas-basics.html#cb261-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2006    19.793993</span></span>
<span id="cb261-12"><a href="pandas-basics.html#cb261-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2007    19.854270</span></span>
<span id="cb261-13"><a href="pandas-basics.html#cb261-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2008    19.608778</span></span>
<span id="cb261-14"><a href="pandas-basics.html#cb261-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2009    19.833752</span></span>
<span id="cb261-15"><a href="pandas-basics.html#cb261-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2010    19.911734</span></span>
<span id="cb261-16"><a href="pandas-basics.html#cb261-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2011    19.549197</span></span>
<span id="cb261-17"><a href="pandas-basics.html#cb261-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2012    19.668239</span></span>
<span id="cb261-18"><a href="pandas-basics.html#cb261-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2013    20.312285</span></span>
<span id="cb261-19"><a href="pandas-basics.html#cb261-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: float64</span></span></code></pre></div>
<ul>
<li>挑出最大值的那年</li>
</ul>
<div class="sourceCode" id="cb262"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb262-1"><a href="pandas-basics.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the year that had the highest mean temp</span></span>
<span id="cb262-2"><a href="pandas-basics.html#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_year[mean_temp_by_year <span class="op">==</span> mean_temp_by_year.<span class="bu">max</span>()])</span>
<span id="cb262-3"><a href="pandas-basics.html#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year</span></span>
<span id="cb262-4"><a href="pandas-basics.html#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2013    20.312285</span></span>
<span id="cb262-5"><a href="pandas-basics.html#cb262-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: float64</span></span></code></pre></div>
<ul>
<li>接著，看各city的溫度：</li>
</ul>
<div class="sourceCode" id="cb263"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb263-1"><a href="pandas-basics.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the mean temp by city</span></span>
<span id="cb263-2"><a href="pandas-basics.html#cb263-2" aria-hidden="true" tabindex="-1"></a>mean_temp_by_city <span class="op">=</span> temp_by_country_city_vs_year.mean(axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb263-3"><a href="pandas-basics.html#cb263-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_city)</span>
<span id="cb263-4"><a href="pandas-basics.html#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country        city            </span></span>
<span id="cb263-5"><a href="pandas-basics.html#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Afghanistan    Kabul               15.541955</span></span>
<span id="cb263-6"><a href="pandas-basics.html#cb263-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Angola         Luanda              24.391616</span></span>
<span id="cb263-7"><a href="pandas-basics.html#cb263-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Australia      Melbourne           14.275411</span></span>
<span id="cb263-8"><a href="pandas-basics.html#cb263-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                Sydney              17.799250</span></span>
<span id="cb263-9"><a href="pandas-basics.html#cb263-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bangladesh     Dhaka               26.174440</span></span>
<span id="cb263-10"><a href="pandas-basics.html#cb263-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                      ...    </span></span>
<span id="cb263-11"><a href="pandas-basics.html#cb263-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; United States  Chicago             11.330825</span></span>
<span id="cb263-12"><a href="pandas-basics.html#cb263-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                Los Angeles         16.675399</span></span>
<span id="cb263-13"><a href="pandas-basics.html#cb263-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                New York            10.911034</span></span>
<span id="cb263-14"><a href="pandas-basics.html#cb263-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Vietnam        Ho Chi Minh City    27.922857</span></span>
<span id="cb263-15"><a href="pandas-basics.html#cb263-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Zimbabwe       Harare              20.699000</span></span>
<span id="cb263-16"><a href="pandas-basics.html#cb263-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Length: 100, dtype: float64</span></span></code></pre></div>
<ul>
<li>找最低溫的city</li>
</ul>
<div class="sourceCode" id="cb264"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb264-1"><a href="pandas-basics.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the city that had the lowest mean temp</span></span>
<span id="cb264-2"><a href="pandas-basics.html#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mean_temp_by_city[mean_temp_by_city<span class="op">==</span>mean_temp_by_city.<span class="bu">min</span>()])</span>
<span id="cb264-3"><a href="pandas-basics.html#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; country  city  </span></span>
<span id="cb264-4"><a href="pandas-basics.html#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; China    Harbin    4.876551</span></span>
<span id="cb264-5"><a href="pandas-basics.html#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: float64</span></span></code></pre></div>
</div>
</div>
<div id="visualizing-dataframe" class="section level2" number="7.7">
<h2>
<span class="header-section-number">7.7</span> Visualizing DataFrame<a class="anchor" aria-label="anchor" href="#visualizing-dataframe"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb265"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb265-1"><a href="pandas-basics.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb265-2"><a href="pandas-basics.html#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre></div>
<ul>
<li>先讀一個資料集進來”avoplotto.pkl”</li>
</ul>
<div class="sourceCode" id="cb266"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb266-1"><a href="pandas-basics.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"data/avoplotto.pkl"</span>, <span class="st">"rb"</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb266-2"><a href="pandas-basics.html#cb266-2" aria-hidden="true" tabindex="-1"></a>  avocados <span class="op">=</span> pickle.load(<span class="bu">file</span>)</span></code></pre></div>
<div class="sourceCode" id="cb267"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb267-1"><a href="pandas-basics.html#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(avocados))</span>
<span id="cb267-2"><a href="pandas-basics.html#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.frame.DataFrame'&gt;</span></span>
<span id="cb267-3"><a href="pandas-basics.html#cb267-3" aria-hidden="true" tabindex="-1"></a>avocados.head()</span>
<span id="cb267-4"><a href="pandas-basics.html#cb267-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type  year  avg_price   size     nb_sold</span></span>
<span id="cb267-5"><a href="pandas-basics.html#cb267-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2015-12-27  conventional  2015       0.95  small  9626901.09</span></span>
<span id="cb267-6"><a href="pandas-basics.html#cb267-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2015-12-20  conventional  2015       0.98  small  8710021.76</span></span>
<span id="cb267-7"><a href="pandas-basics.html#cb267-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2015-12-13  conventional  2015       0.93  small  9855053.66</span></span>
<span id="cb267-8"><a href="pandas-basics.html#cb267-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015       0.89  small  9405464.36</span></span>
<span id="cb267-9"><a href="pandas-basics.html#cb267-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2015-11-29  conventional  2015       0.99  small  8094803.56</span></span></code></pre></div>
<ul>
<li>avocado是酪梨，這筆資料是想了解酪梨在USA的供需狀況<br>
</li>
<li>size是指酪梨的大小，分成三類(small, large, extra_large)<br>
</li>
<li>type有兩種(organic, conventional)<br>
</li>
<li>所以這筆資料，等於是看該類型該size的酪梨，在那個date下的賣價(avg_price)，以及賣出多少個(nb_sold = number sold)</li>
</ul>
<div id="bar" class="section level3" number="7.7.1">
<h3>
<span class="header-section-number">7.7.1</span> Bar<a class="anchor" aria-label="anchor" href="#bar"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想了解，不同size，總計賣出多少個？</li>
</ul>
<div class="sourceCode" id="cb268"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb268-1"><a href="pandas-basics.html#cb268-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_size <span class="op">=</span> avocados.groupby(<span class="st">"size"</span>)[<span class="st">"nb_sold"</span>].<span class="bu">sum</span>()</span>
<span id="cb268-2"><a href="pandas-basics.html#cb268-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nb_sold_by_size)</span>
<span id="cb268-3"><a href="pandas-basics.html#cb268-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; size</span></span>
<span id="cb268-4"><a href="pandas-basics.html#cb268-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extra_large    1.561752e+08</span></span>
<span id="cb268-5"><a href="pandas-basics.html#cb268-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; large          2.015012e+09</span></span>
<span id="cb268-6"><a href="pandas-basics.html#cb268-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; small          2.054936e+09</span></span>
<span id="cb268-7"><a href="pandas-basics.html#cb268-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: nb_sold, dtype: float64</span></span></code></pre></div>
<ul>
<li>別忘了，你summarise的方式是是對某個column做sum method，所以結果是series，不是dataframe!!</li>
</ul>
<div class="sourceCode" id="cb269"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb269-1"><a href="pandas-basics.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(nb_sold_by_size))</span>
<span id="cb269-2"><a href="pandas-basics.html#cb269-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<ul>
<li>畫成bar plot</li>
</ul>
<div class="sourceCode" id="cb270"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb270-1"><a href="pandas-basics.html#cb270-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_size.plot(kind <span class="op">=</span> <span class="st">"bar"</span>, <span class="co">#不需要指定x軸是啥，y軸是啥，因為你現在只是個series</span></span>
<span id="cb270-2"><a href="pandas-basics.html#cb270-2" aria-hidden="true" tabindex="-1"></a>                     title <span class="op">=</span> <span class="st">"hahaha"</span>, </span>
<span id="cb270-3"><a href="pandas-basics.html#cb270-3" aria-hidden="true" tabindex="-1"></a>                     rot <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb270-4"><a href="pandas-basics.html#cb270-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-77-1.png" width="672"></div>
<ul>
<li>看起來，small是賣最好的，但和large沒有差太多，而extra_large則少非常多</li>
</ul>
</div>
<div id="line-plot" class="section level3" number="7.7.2">
<h3>
<span class="header-section-number">7.7.2</span> Line plot<a class="anchor" aria-label="anchor" href="#line-plot"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想看一下，售出數量隨時間的變化</li>
</ul>
<div class="sourceCode" id="cb271"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb271-1"><a href="pandas-basics.html#cb271-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_date <span class="op">=</span> avocados.groupby(<span class="st">"date"</span>)[<span class="st">"nb_sold"</span>].<span class="bu">sum</span>()</span>
<span id="cb271-2"><a href="pandas-basics.html#cb271-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nb_sold_by_date.head())</span>
<span id="cb271-3"><a href="pandas-basics.html#cb271-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date</span></span>
<span id="cb271-4"><a href="pandas-basics.html#cb271-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-04    27279606.03</span></span>
<span id="cb271-5"><a href="pandas-basics.html#cb271-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-11    25081927.33</span></span>
<span id="cb271-6"><a href="pandas-basics.html#cb271-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-18    24961540.48</span></span>
<span id="cb271-7"><a href="pandas-basics.html#cb271-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-01-25    24094678.66</span></span>
<span id="cb271-8"><a href="pandas-basics.html#cb271-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2015-02-01    39838734.08</span></span>
<span id="cb271-9"><a href="pandas-basics.html#cb271-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: nb_sold, dtype: float64</span></span></code></pre></div>
<ul>
<li>別忘了，現在是series，不是dataframe</li>
</ul>
<div class="sourceCode" id="cb272"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb272-1"><a href="pandas-basics.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(nb_sold_by_date))</span>
<span id="cb272-2"><a href="pandas-basics.html#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;class 'pandas.core.series.Series'&gt;</span></span></code></pre></div>
<ul>
<li>畫趨勢圖吧：</li>
</ul>
<div class="sourceCode" id="cb273"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb273-1"><a href="pandas-basics.html#cb273-1" aria-hidden="true" tabindex="-1"></a>nb_sold_by_date.plot(kind <span class="op">=</span> <span class="st">"line"</span>, rot <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb273-2"><a href="pandas-basics.html#cb273-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-80-3.png" width="672"></div>
</div>
<div id="scatter-plot" class="section level3" number="7.7.3">
<h3>
<span class="header-section-number">7.7.3</span> scatter plot<a class="anchor" aria-label="anchor" href="#scatter-plot"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>我想看看供需之間的關係，所以我想看賣出的數量(nb_sold)，與賣出的價錢(avg_price)的關係：</li>
</ul>
<div class="sourceCode" id="cb274"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb274-1"><a href="pandas-basics.html#cb274-1" aria-hidden="true" tabindex="-1"></a>avocados.plot(x <span class="op">=</span> <span class="st">"nb_sold"</span>,</span>
<span id="cb274-2"><a href="pandas-basics.html#cb274-2" aria-hidden="true" tabindex="-1"></a>              y <span class="op">=</span> <span class="st">"avg_price"</span>,</span>
<span id="cb274-3"><a href="pandas-basics.html#cb274-3" aria-hidden="true" tabindex="-1"></a>              kind <span class="op">=</span> <span class="st">"scatter"</span>,</span>
<span id="cb274-4"><a href="pandas-basics.html#cb274-4" aria-hidden="true" tabindex="-1"></a>              title <span class="op">=</span> <span class="st">"Number of avocados sold vs. average price"</span>)</span>
<span id="cb274-5"><a href="pandas-basics.html#cb274-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-81-5.png" width="672"></div>
<ul>
<li>看起來賣越多的時候，價格就降下來了</li>
</ul>
</div>
<div id="histogram" class="section level3" number="7.7.4">
<h3>
<span class="header-section-number">7.7.4</span> Histogram<a class="anchor" aria-label="anchor" href="#histogram"><i class="fas fa-link"></i></a>
</h3>
<div id="single-histogram" class="section level4" number="7.7.4.1">
<h4>
<span class="header-section-number">7.7.4.1</span> single histogram<a class="anchor" aria-label="anchor" href="#single-histogram"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>我如果想看賣出價格的分布，我可以這樣做：</li>
</ul>
<div class="sourceCode" id="cb275"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb275-1"><a href="pandas-basics.html#cb275-1" aria-hidden="true" tabindex="-1"></a>avocados[<span class="st">"avg_price"</span>].hist(bins <span class="op">=</span> <span class="dv">20</span>)</span>
<span id="cb275-2"><a href="pandas-basics.html#cb275-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-82-7.png" width="672"></div>
</div>
<div id="multiple-histogram" class="section level4" number="7.7.4.2">
<h4>
<span class="header-section-number">7.7.4.2</span> multiple histogram<a class="anchor" aria-label="anchor" href="#multiple-histogram"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>如果我想比較兩個分布，例如，我想看conventional酪梨的價格分布，和organic酪梨的價格分布有啥不同：</li>
</ul>
<div class="sourceCode" id="cb276"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb276-1"><a href="pandas-basics.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram of conventional avg_price </span></span>
<span id="cb276-2"><a href="pandas-basics.html#cb276-2" aria-hidden="true" tabindex="-1"></a>avocados[avocados[<span class="st">"type"</span>] <span class="op">==</span> <span class="st">"conventional"</span>][<span class="st">"avg_price"</span>].hist(bins <span class="op">=</span> <span class="dv">20</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb276-3"><a href="pandas-basics.html#cb276-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-4"><a href="pandas-basics.html#cb276-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram of organic avg_price</span></span>
<span id="cb276-5"><a href="pandas-basics.html#cb276-5" aria-hidden="true" tabindex="-1"></a>avocados[avocados[<span class="st">"type"</span>] <span class="op">==</span> <span class="st">"organic"</span>][<span class="st">"avg_price"</span>].hist(bins <span class="op">=</span> <span class="dv">20</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb276-6"><a href="pandas-basics.html#cb276-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-7"><a href="pandas-basics.html#cb276-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a legend</span></span>
<span id="cb276-8"><a href="pandas-basics.html#cb276-8" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">"conventional"</span>, <span class="st">"organic"</span>])</span>
<span id="cb276-9"><a href="pandas-basics.html#cb276-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-10"><a href="pandas-basics.html#cb276-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb276-11"><a href="pandas-basics.html#cb276-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-83-9.png" width="672"></div>
</div>
</div>
</div>
<div id="missing-values" class="section level2" number="7.8">
<h2>
<span class="header-section-number">7.8</span> Missing values<a class="anchor" aria-label="anchor" href="#missing-values"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>先來做個假資料：</li>
</ul>
<div class="sourceCode" id="cb277"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb277-1"><a href="pandas-basics.html#cb277-1" aria-hidden="true" tabindex="-1"></a>sub_avocados <span class="op">=</span> avocados.iloc[:<span class="dv">4</span>]</span>
<span id="cb277-2"><a href="pandas-basics.html#cb277-2" aria-hidden="true" tabindex="-1"></a>sub_avocados.iloc[<span class="dv">1</span>,[<span class="dv">3</span>,<span class="dv">5</span>]] <span class="op">=</span> <span class="bu">float</span>(<span class="st">"NaN"</span>)</span>
<span id="cb277-3"><a href="pandas-basics.html#cb277-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; /Volumes/GoogleDrive/我的雲端硬碟/0. codepool_python/ds_tutorial/renv/python/virtualenvs/renv-python-3.8.0/lib/python3.8/site-packages/pandas/core/indexing.py:1817: SettingWithCopyWarning: </span></span>
<span id="cb277-4"><a href="pandas-basics.html#cb277-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A value is trying to be set on a copy of a slice from a DataFrame.</span></span>
<span id="cb277-5"><a href="pandas-basics.html#cb277-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Try using .loc[row_indexer,col_indexer] = value instead</span></span>
<span id="cb277-6"><a href="pandas-basics.html#cb277-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb277-7"><a href="pandas-basics.html#cb277-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy</span></span>
<span id="cb277-8"><a href="pandas-basics.html#cb277-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   self._setitem_single_column(loc, value, pi)</span></span>
<span id="cb277-9"><a href="pandas-basics.html#cb277-9" aria-hidden="true" tabindex="-1"></a>sub_avocados.iloc[[<span class="dv">0</span>,<span class="dv">2</span>],<span class="dv">2</span>] <span class="op">=</span> <span class="bu">float</span>(<span class="st">"NaN"</span>)</span>
<span id="cb277-10"><a href="pandas-basics.html#cb277-10" aria-hidden="true" tabindex="-1"></a>sub_avocados</span>
<span id="cb277-11"><a href="pandas-basics.html#cb277-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type    year  avg_price   size     nb_sold</span></span>
<span id="cb277-12"><a href="pandas-basics.html#cb277-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2015-12-27  conventional     NaN       0.95  small  9626901.09</span></span>
<span id="cb277-13"><a href="pandas-basics.html#cb277-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2015-12-20  conventional  2015.0        NaN  small         NaN</span></span>
<span id="cb277-14"><a href="pandas-basics.html#cb277-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2015-12-13  conventional     NaN       0.93  small  9855053.66</span></span>
<span id="cb277-15"><a href="pandas-basics.html#cb277-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015.0       0.89  small  9405464.36</span></span></code></pre></div>
<ul>
<li>可以看到有NA在裡面了</li>
</ul>
<div id="finding-missing-values" class="section level3" number="7.8.1">
<h3>
<span class="header-section-number">7.8.1</span> Finding missing values<a class="anchor" aria-label="anchor" href="#finding-missing-values"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>看dataframe哪個cell有NA</li>
</ul>
<div class="sourceCode" id="cb278"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb278-1"><a href="pandas-basics.html#cb278-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna()</span>
<span id="cb278-2"><a href="pandas-basics.html#cb278-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     date   type   year  avg_price   size  nb_sold</span></span>
<span id="cb278-3"><a href="pandas-basics.html#cb278-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  False  False   True      False  False    False</span></span>
<span id="cb278-4"><a href="pandas-basics.html#cb278-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  False  False  False       True  False     True</span></span>
<span id="cb278-5"><a href="pandas-basics.html#cb278-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  False  False   True      False  False    False</span></span>
<span id="cb278-6"><a href="pandas-basics.html#cb278-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  False  False  False      False  False    False</span></span></code></pre></div>
<ul>
<li>看df各個column有沒有NA</li>
</ul>
<div class="sourceCode" id="cb279"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb279-1"><a href="pandas-basics.html#cb279-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna().<span class="bu">any</span>()</span>
<span id="cb279-2"><a href="pandas-basics.html#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date         False</span></span>
<span id="cb279-3"><a href="pandas-basics.html#cb279-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type         False</span></span>
<span id="cb279-4"><a href="pandas-basics.html#cb279-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year          True</span></span>
<span id="cb279-5"><a href="pandas-basics.html#cb279-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; avg_price     True</span></span>
<span id="cb279-6"><a href="pandas-basics.html#cb279-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; size         False</span></span>
<span id="cb279-7"><a href="pandas-basics.html#cb279-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nb_sold       True</span></span>
<span id="cb279-8"><a href="pandas-basics.html#cb279-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: bool</span></span></code></pre></div>
<ul>
<li>看df各個column的NA總數</li>
</ul>
<div class="sourceCode" id="cb280"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb280-1"><a href="pandas-basics.html#cb280-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna().<span class="bu">sum</span>()</span>
<span id="cb280-2"><a href="pandas-basics.html#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date         0</span></span>
<span id="cb280-3"><a href="pandas-basics.html#cb280-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; type         0</span></span>
<span id="cb280-4"><a href="pandas-basics.html#cb280-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year         2</span></span>
<span id="cb280-5"><a href="pandas-basics.html#cb280-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; avg_price    1</span></span>
<span id="cb280-6"><a href="pandas-basics.html#cb280-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; size         0</span></span>
<span id="cb280-7"><a href="pandas-basics.html#cb280-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nb_sold      1</span></span>
<span id="cb280-8"><a href="pandas-basics.html#cb280-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: int64</span></span></code></pre></div>
<ul>
<li>畫個bar chart看一下：</li>
</ul>
<div class="sourceCode" id="cb281"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb281-1"><a href="pandas-basics.html#cb281-1" aria-hidden="true" tabindex="-1"></a>sub_avocados.isna().<span class="bu">sum</span>().plot(kind <span class="op">=</span> <span class="st">"bar"</span>)</span></code></pre></div>
<div class="inline-figure"><img src="pandas_basics_files/figure-html/unnamed-chunk-88-11.png" width="672"></div>
</div>
<div id="remove-na" class="section level3" number="7.8.2">
<h3>
<span class="header-section-number">7.8.2</span> Remove NA<a class="anchor" aria-label="anchor" href="#remove-na"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>如果要留下complete cases，可用pandas的<code>.dropna()</code>指令</li>
</ul>
<div class="sourceCode" id="cb282"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb282-1"><a href="pandas-basics.html#cb282-1" aria-hidden="true" tabindex="-1"></a>avocados_complete <span class="op">=</span> sub_avocados.dropna()</span>
<span id="cb282-2"><a href="pandas-basics.html#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(avocados_complete)</span>
<span id="cb282-3"><a href="pandas-basics.html#cb282-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type    year  avg_price   size     nb_sold</span></span>
<span id="cb282-4"><a href="pandas-basics.html#cb282-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015.0       0.89  small  9405464.36</span></span></code></pre></div>
<ul>
<li>只剩這一個case了</li>
</ul>
</div>
<div id="replacing-na" class="section level3" number="7.8.3">
<h3>
<span class="header-section-number">7.8.3</span> Replacing NA<a class="anchor" aria-label="anchor" href="#replacing-na"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>這邊只教了最簡單的，遺漏值全補0</li>
</ul>
<div class="sourceCode" id="cb283"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb283-1"><a href="pandas-basics.html#cb283-1" aria-hidden="true" tabindex="-1"></a>avocados_fill_zero <span class="op">=</span> sub_avocados.fillna(<span class="dv">0</span>)</span>
<span id="cb283-2"><a href="pandas-basics.html#cb283-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(avocados_fill_zero)</span>
<span id="cb283-3"><a href="pandas-basics.html#cb283-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date          type    year  avg_price   size     nb_sold</span></span>
<span id="cb283-4"><a href="pandas-basics.html#cb283-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  2015-12-27  conventional     0.0       0.95  small  9626901.09</span></span>
<span id="cb283-5"><a href="pandas-basics.html#cb283-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2015-12-20  conventional  2015.0       0.00  small        0.00</span></span>
<span id="cb283-6"><a href="pandas-basics.html#cb283-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2015-12-13  conventional     0.0       0.93  small  9855053.66</span></span>
<span id="cb283-7"><a href="pandas-basics.html#cb283-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2015-12-06  conventional  2015.0       0.89  small  9405464.36</span></span></code></pre></div>
<ul>
<li>呵呵，很怪吧! 這只適用在，補0有意義的地方，例如，nb_sold如果是因為沒有賣出任何酪梨時，會寫NA，那這時補0就是對的<br>
</li>
<li>詳細的處理missing value的方法，留待data cleaning的章節再來好好講</li>
</ul>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="pandas_cheatsheet.html"><span class="header-section-number">6</span> pandas_cheatsheet</a></div>
<div class="next"><a href="join-data.html"><span class="header-section-number">8</span> Join data</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#pandas-basics"><span class="header-section-number">7</span> Pandas basics</a></li>
<li><a class="nav-link" href="#inspecting-dataframe"><span class="header-section-number">7.1</span> Inspecting DataFrame</a></li>
<li><a class="nav-link" href="#parts-of-a-dataframe"><span class="header-section-number">7.2</span> Parts of a DataFrame</a></li>
<li>
<a class="nav-link" href="#select-filter-arrange-mutate"><span class="header-section-number">7.3</span> select, filter, arrange, &amp; mutate</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#select-1"><span class="header-section-number">7.3.1</span> select</a></li>
<li><a class="nav-link" href="#filter-1"><span class="header-section-number">7.3.2</span> filter</a></li>
<li><a class="nav-link" href="#arrange-1"><span class="header-section-number">7.3.3</span> arrange</a></li>
<li><a class="nav-link" href="#mutate-and-rename-1"><span class="header-section-number">7.3.4</span> mutate and rename</a></li>
<li><a class="nav-link" href="#summarise"><span class="header-section-number">7.3.5</span> summarise</a></li>
<li><a class="nav-link" href="#group_by-summarise-2"><span class="header-section-number">7.3.6</span> group_by + summarise</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#slice-by-.loc%E5%88%97%E5%90%8D-%E8%A1%8C%E5%90%8D-and-.iloc%E5%88%97%E6%95%B8-%E8%A1%8C%E6%95%B8"><span class="header-section-number">7.4</span> slice by .loc[列名, 行名] and .iloc[列數, 行數]</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0value-%E9%9D%9Edf-type"><span class="header-section-number">7.4.1</span> 取某列某行(得到value, 非df type)</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E6%9F%90%E5%88%97%E6%9F%90%E8%A1%8C%E5%BE%97%E5%88%B0df-type"><span class="header-section-number">7.4.2</span> 取某列某行(得到df type)</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E5%A4%9A%E5%88%97%E5%A4%9A%E8%A1%8C"><span class="header-section-number">7.4.3</span> 取多列多行</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E5%88%97%E5%B0%B1%E5%A5%BD%E8%A1%8C%E6%88%91%E5%85%A8%E8%A6%81"><span class="header-section-number">7.4.4</span> 取多個列就好，行我全要</a></li>
<li><a class="nav-link" href="#%E5%8F%96%E5%A4%9A%E5%80%8B%E8%A1%8C%E5%B0%B1%E5%A5%BD%E5%88%97%E6%88%91%E5%85%A8%E8%A6%81"><span class="header-section-number">7.4.5</span> 取多個行就好，列我全要</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#indexing"><span class="header-section-number">7.5</span> Indexing</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%B0%87city%E6%AC%84%E4%BD%8D%E8%A8%AD%E7%82%BAindex"><span class="header-section-number">7.5.1</span> 將city欄位設為index</a></li>
<li><a class="nav-link" href="#filter%E5%87%BAcitymoscow%E6%88%96saint-petersburg"><span class="header-section-number">7.5.2</span> filter出city=“Moscow”或”Saint Petersburg”</a></li>
<li><a class="nav-link" href="#%E7%94%A8.sort_index%E5%81%9A%E6%8E%92%E5%BA%8F"><span class="header-section-number">7.5.3</span> 用.sort_index()做排序</a></li>
<li><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97outer%E5%88%97"><span class="header-section-number">7.5.4</span> 排序後，取連續的列(outer列)</a></li>
<li><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E9%80%A3%E7%BA%8C%E7%9A%84%E5%88%97inner%E5%88%97"><span class="header-section-number">7.5.5</span> 排序後，取連續的列(inner列)</a></li>
<li><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E5%BE%8C%E5%8F%96%E6%99%82%E9%96%93%E6%80%A7%E8%B3%87%E6%96%99"><span class="header-section-number">7.5.6</span> 排序後，取時間性資料</a></li>
<li><a class="nav-link" href="#subsetting-by-rowcolumn-number"><span class="header-section-number">7.5.7</span> subsetting by row/column number</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#pivot-table-1"><span class="header-section-number">7.6</span> pivot table</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#intro"><span class="header-section-number">7.6.1</span> Intro</a></li>
<li><a class="nav-link" href="#subsetting-pivot-table"><span class="header-section-number">7.6.2</span> subsetting pivot table</a></li>
<li><a class="nav-link" href="#calculating-on-a-pivot-table"><span class="header-section-number">7.6.3</span> Calculating on a pivot table</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#visualizing-dataframe"><span class="header-section-number">7.7</span> Visualizing DataFrame</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#bar"><span class="header-section-number">7.7.1</span> Bar</a></li>
<li><a class="nav-link" href="#line-plot"><span class="header-section-number">7.7.2</span> Line plot</a></li>
<li><a class="nav-link" href="#scatter-plot"><span class="header-section-number">7.7.3</span> scatter plot</a></li>
<li><a class="nav-link" href="#histogram"><span class="header-section-number">7.7.4</span> Histogram</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#missing-values"><span class="header-section-number">7.8</span> Missing values</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#finding-missing-values"><span class="header-section-number">7.8.1</span> Finding missing values</a></li>
<li><a class="nav-link" href="#remove-na"><span class="header-section-number">7.8.2</span> Remove NA</a></li>
<li><a class="nav-link" href="#replacing-na"><span class="header-section-number">7.8.3</span> Replacing NA</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/LeeHank/ds_tutorial/blob/master/pandas_basics.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/LeeHank/ds_tutorial/edit/master/pandas_basics.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Science Tutorial</strong>" was written by Hank Lee. It was last built on 2022-01-15.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
